[{"id":0,"title":"HM - é¸¿è’™-åº”ç”¨ç¨‹åºå¼€å‘","routePath":"/interview-handbook-project/guide/app","lang":"","toc":[{"text":"è·¯ç”±ä¸Žç”Ÿå‘½å‘¨æœŸ","id":"è·¯ç”±ä¸Žç”Ÿå‘½å‘¨æœŸ","depth":2,"charIndex":3},{"text":"1. è·¯ç”±-å¸¸ç”¨API","id":"1-è·¯ç”±-å¸¸ç”¨api","depth":3,"charIndex":14},{"text":"2. è·¯ç”±-å‚æ•°ä¼ é€’","id":"2-è·¯ç”±-å‚æ•°ä¼ é€’","depth":3,"charIndex":1133},{"text":"3. UIAbility-ç”Ÿå‘½å‘¨æœŸ","id":"3-uiability-ç”Ÿå‘½å‘¨æœŸ","depth":3,"charIndex":2107},{"text":"4. ç»„ä»¶-ç”Ÿå‘½å‘¨æœŸ","id":"4-ç»„ä»¶-ç”Ÿå‘½å‘¨æœŸ","depth":3,"charIndex":2661},{"text":"5. UIAbilityè·³è½¬","id":"5-uiabilityè·³è½¬","depth":3,"charIndex":3130},{"text":"ä½¿ç”¨åŠ¨ç”»","id":"ä½¿ç”¨åŠ¨ç”»","depth":2,"charIndex":3668},{"text":"1. å±žæ€§åŠ¨ç”»","id":"1-å±žæ€§åŠ¨ç”»","depth":3,"charIndex":3676},{"text":"2. æ˜¾ç¤ºåŠ¨ç”»","id":"2-æ˜¾ç¤ºåŠ¨ç”»","depth":3,"charIndex":4485},{"text":"3. å…ƒç´ å…±äº«è½¬åœº","id":"3-å…ƒç´ å…±äº«è½¬åœº","depth":3,"charIndex":5037},{"text":"4. æ‹–åŠ¨æ‰‹åŠ¿-é˜»å°¼å’Œç£å¸","id":"4-æ‹–åŠ¨æ‰‹åŠ¿-é˜»å°¼å’Œç£å¸","depth":3,"charIndex":6127},{"text":"ç³»ç»Ÿèƒ½åŠ›","id":"ç³»ç»Ÿèƒ½åŠ›","depth":2,"charIndex":8224},{"text":"1. æ•°æ®ç®¡ç†-ç”¨æˆ·é¦–é€‰é¡¹","id":"1-æ•°æ®ç®¡ç†-ç”¨æˆ·é¦–é€‰é¡¹","depth":3,"charIndex":8232},{"text":"2. ç»˜ç”»èƒ½åŠ›-ç”»å¸ƒç»„ä»¶","id":"2-ç»˜ç”»èƒ½åŠ›-ç”»å¸ƒç»„ä»¶","depth":3,"charIndex":10464},{"text":"3. å…¬å…±äº‹ä»¶ä¸Žé€šçŸ¥-é€šçŸ¥ç®¡ç†","id":"3-å…¬å…±äº‹ä»¶ä¸Žé€šçŸ¥-é€šçŸ¥ç®¡ç†","depth":3,"charIndex":12218},{"text":"4. åŽå°ä»»åŠ¡-åŽå°ä»£ç†æé†’","id":"4-åŽå°ä»»åŠ¡-åŽå°ä»£ç†æé†’","depth":3,"charIndex":13791}],"domain":"","content":"#\n\n\nè·¯ç”±ä¸Žç”Ÿå‘½å‘¨æœŸ#\n\n\n1. è·¯ç”±-å¸¸ç”¨API#\n\n> å¦‚ä½•æ–°å»ºé¡µé¢ï¼Œå¦‚ä½•è·³è½¬å’Œå›žé€€æ“ä½œ\n\n1ï¼‰æ–°å»ºé¡µé¢\n\n@Entry\n@Component\nstruct DetailPage {\n  build() {\n    Column({ space: 15 }) {\n      Text('Detail Page')\n        .fontSize(40)\n      Button('Back')\n    }\n    .height('100%')\n    .width('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\n{\n  \"src\": [\n    \"pages/Index\",\n+    \"pages/DetailPage\"\n  ]\n}\n\n\nTIP\n * æ‰‹åŠ¨æ–°å»ºä¸€ä¸ªé¡µé¢ï¼ˆetsï¼‰æ–‡ä»¶ï¼Œéœ€è¦åœ¨ main_pages.json ä¸­æ‰‹åŠ¨é…ç½®\n * å¯ä»¥è‡ªåŠ¨åˆ›å»º\n\n2ï¼‰è·³è½¬ä¸ŽåŽé€€ API\n\n * è·³è½¬ router.pushUrl()\n * åŽé€€ router.back()\n * æ›¿æ¢è·³è½¬ router.replaceUrl()\n\n\n@Entry\n@Component\nstruct Index {\n  build() {\n    Column({ space: 15 }) {\n      Text('Index Page')\n        .fontSize(40)\n      Button('Jump To Detail Page')\n        .onClick(() => {\n          // 1. è·³è½¬ï¼ŒåŽ‹å…¥é¡µé¢æ ˆé¡¶éƒ¨\n          // router.pushUrl({\n          //   url: 'pages/DetailPage'\n          // })\n\n          // 2. è·³è½¬ï¼Œæ›¿æ¢å½“å‰é¡µé¢æ ˆ\n          // router.replaceUrl({\n          //   url: 'pages/DetailPage'\n          // })\n\n          // 3. è¿”å›ž\n          // router.back()\n        })\n    }\n    .height('100%')\n    .width('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\nTIP\n * é¡µé¢æ ˆçš„æœ€å¤§å®¹é‡ä¸º32ä¸ªé¡µé¢ã€‚å¦‚æžœè¶…è¿‡è¿™ä¸ªé™åˆ¶ï¼Œå¯ä»¥è°ƒç”¨ router.clear() æ–¹æ³•æ¸…ç©ºåŽ†å²é¡µé¢æ ˆï¼Œé‡Šæ”¾å†…å­˜ç©ºé—´ã€‚\n\n\n2. è·¯ç”±-å‚æ•°ä¼ é€’#\n\n> é¡µé¢å‚æ•°ä¼ é€’å’ŒèŽ·å–\n\n1ï¼‰ä¼ å‚\n\n\n\nclass User {\n  name: string\n  age: number\n}\n\n@Entry\n@Component\nstruct Index {\n\n  @State\n  user: User = {\n    name: 'jack',\n    age: 18\n  }\n\n  build() {\n    Column({ space: 15 }) {\n      Text('Index Page')\n        .fontSize(40)\n      Button('Jump To Detail Page')\n        .onClick(() => {\n          router.pushUrl({\n            url: 'pages/DetailPage',\n            params: this.user\n          })\n        })\n    }\n    .height('100%')\n    .width('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\n2ï¼‰èŽ·å–\n\n\n\n@Entry\n@Component\nstruct DetailPage {\n\n  aboutToAppear() {\n    const params = router.getParams()\n    promptAction.showToast({ message: params['name'] + params['age'] })\n  }\n\n  build() {\n    Column({ space: 15 }) {\n      Text('Detail Page')\n        .fontSize(40)\n      Button('Back')\n        .onClick(() => {\n          router.back()\n        })\n    }\n    .height('100%')\n    .width('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\n\n3. UIAbility-ç”Ÿå‘½å‘¨æœŸ#\n\n> å½“ç”¨æˆ·æ‰“å¼€ã€åˆ‡æ¢å’Œè¿”å›žåˆ°å¯¹åº”åº”ç”¨æ—¶ï¼Œåº”ç”¨ä¸­çš„UIAbilityå®žä¾‹ä¼šåœ¨å…¶ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒçŠ¶æ€ä¹‹é—´è½¬æ¢ã€‚\n\n 1. UIAbilityå®žä¾‹åˆ›å»ºå®Œæˆæ—¶è§¦å‘ï¼Œç³»ç»Ÿä¼šè°ƒç”¨ onCreate() å›žè°ƒã€‚\n    \n    * å¯ä»¥åœ¨è¯¥å›žè°ƒä¸­è¿›è¡Œåº”ç”¨åˆå§‹åŒ–æ“ä½œï¼Œä¾‹å¦‚å˜é‡å®šä¹‰èµ„æºåŠ è½½ç­‰ï¼Œç”¨äºŽåŽç»­çš„UIç•Œé¢å±•ç¤ºã€‚\n\n 2. onForeground() å›žè°ƒï¼Œåœ¨ UIAbility çš„UIç•Œé¢å¯è§ä¹‹å‰ï¼Œå¦‚ UIAbility åˆ‡æ¢è‡³å‰å°æ—¶è§¦å‘ã€‚\n    \n    * å¯ä»¥åœ¨ onForeground() å›žè°ƒä¸­ç”³è¯·ç³»ç»Ÿéœ€è¦çš„èµ„æºï¼Œæˆ–è€…é‡æ–°ç”³è¯·åœ¨ onBackground() ä¸­é‡Šæ”¾çš„èµ„æºã€‚\n\n 3. onBackground() å›žè°ƒï¼Œåœ¨ UIAbility çš„UIç•Œé¢å®Œå…¨ä¸å¯è§ä¹‹åŽï¼Œå¦‚ UIAbility åˆ‡æ¢è‡³åŽå°æ—¶å€™è§¦å‘ã€‚\n    \n    * å¯ä»¥åœ¨ onBackground() å›žè°ƒä¸­é‡Šæ”¾UIç•Œé¢ä¸å¯è§æ—¶æ— ç”¨çš„èµ„æºï¼Œæˆ–è€…åœ¨æ­¤å›žè°ƒä¸­æ‰§è¡Œè¾ƒä¸ºè€—æ—¶çš„æ“ä½œï¼Œä¾‹å¦‚çŠ¶æ€ä¿å­˜ç­‰\n\n 4. Destroy çŠ¶æ€åœ¨ UIAbility å®žä¾‹é”€æ¯æ—¶è§¦å‘ï¼Œç³»ç»Ÿä¼šè°ƒç”¨ onDestroy() å›žè°ƒã€‚\n    \n    * å¯ä»¥åœ¨è¯¥å›žè°ƒä¸­è¿›è¡Œç³»ç»Ÿèµ„æºçš„é‡Šæ”¾ã€æ•°æ®çš„ä¿å­˜ç­‰æ“ä½œã€‚\n\n\n4. ç»„ä»¶-ç”Ÿå‘½å‘¨æœŸ#\n\n1ï¼‰ä»»ä½•ç»„ä»¶\n\naboutToAppear\n\n * aboutToAppear å‡½æ•°åœ¨åˆ›å»ºè‡ªå®šä¹‰ç»„ä»¶çš„æ–°å®žä¾‹åŽï¼Œåœ¨æ‰§è¡Œå…¶ build å‡½æ•°ä¹‹å‰æ‰§è¡Œã€‚\n * å…è®¸åœ¨ aboutToAppear å‡½æ•°ä¸­æ”¹å˜çŠ¶æ€å˜é‡ï¼Œæ›´æ”¹å°†åœ¨åŽç»­æ‰§è¡Œ build å‡½æ•°ä¸­ç”Ÿæ•ˆã€‚\n\naboutToDisappear\n\n * aboutToDisappear å‡½æ•°åœ¨è‡ªå®šä¹‰ç»„ä»¶æžæž„é”€æ¯ä¹‹å‰æ‰§è¡Œã€‚\n\n * ä¸å…è®¸åœ¨ aboutToDisappear å‡½æ•°ä¸­æ”¹å˜çŠ¶æ€å˜é‡ï¼Œç‰¹åˆ«æ˜¯ @Link å˜é‡çš„ä¿®æ”¹å¯èƒ½ä¼šå¯¼è‡´åº”ç”¨ç¨‹åºè¡Œä¸ºä¸ç¨³å®šã€‚\n\n2ï¼‰ä»…é¡µé¢ @Entry ç»„ä»¶\n\nonPageShow\n\n * é¡µé¢æ¯æ¬¡æ˜¾ç¤ºæ—¶è§¦å‘ä¸€æ¬¡ï¼ŒåŒ…æ‹¬è·¯ç”±è¿‡ç¨‹ã€åº”ç”¨è¿›å…¥å‰åŽå°ç­‰åœºæ™¯ï¼Œä»… @Entry ä¿®é¥°çš„è‡ªå®šä¹‰ç»„ä»¶ç”Ÿæ•ˆã€‚\n\nonPageHide\n\n * é¡µé¢æ¯æ¬¡éšè—æ—¶è§¦å‘ä¸€æ¬¡ï¼ŒåŒ…æ‹¬è·¯ç”±è¿‡ç¨‹ã€åº”ç”¨è¿›å…¥å‰åŽå°ç­‰åœºæ™¯ï¼Œä»… @Entry ä¿®é¥°çš„è‡ªå®šä¹‰ç»„ä»¶ç”Ÿæ•ˆã€‚\n\nonBackPress\n\n * å½“ç”¨æˆ·ç‚¹å‡»è¿”å›žæŒ‰é’®æ—¶è§¦å‘ï¼Œä»… @Entry ä¿®é¥°çš„è‡ªå®šä¹‰ç»„ä»¶ç”Ÿæ•ˆã€‚\n\n\n5. UIAbilityè·³è½¬#\n\n> UIAbilityç»„ä»¶æ˜¯ä¸€ç§åŒ…å«UIç•Œé¢çš„åº”ç”¨ç»„ä»¶ï¼Œä¸»è¦ç”¨äºŽå’Œç”¨æˆ·äº¤äº’\n\n * UIAbilityç»„ä»¶æ˜¯ç³»ç»Ÿè°ƒåº¦çš„åŸºæœ¬å•å…ƒï¼Œä¸ºåº”ç”¨æä¾›ç»˜åˆ¶ç•Œé¢çš„çª—å£ï¼›\n * ä¸€ä¸ªUIAbilityç»„ä»¶ä¸­å¯ä»¥é€šè¿‡å¤šä¸ªé¡µé¢æ¥å®žçŽ°ä¸€ä¸ªåŠŸèƒ½æ¨¡å—ï¼›\n * æ¯ä¸€ä¸ªUIAbilityç»„ä»¶å®žä¾‹ï¼Œéƒ½å¯¹åº”äºŽä¸€ä¸ªæœ€è¿‘ä»»åŠ¡åˆ—è¡¨ä¸­çš„ä»»åŠ¡ã€‚\n\nButton('Jump To PayAbility Page')\n  .onClick(() => {\n    const context = getContext(this) as common.UIAbilityContext\n    const want: Want = {\n      bundleName: 'com.itcast.myapplication',\n      abilityName: 'PayAbility'\n    }\n    context.startAbility(want)\n  })\n\n\nButton('Back')\n  .onClick(() => {\n    router.back()\n  })\n\n\nTIP\n * åŽç»­æ¶ˆæ¯é€šçŸ¥è·³è½¬åˆ°åº”ç”¨ä¹Ÿéœ€è¦è·³è½¬åˆ°å¯¹åº”çš„ UIAbility æ–¹å¼ç±»ä¼¼\n\n\nä½¿ç”¨åŠ¨ç”»#\n\n\n1. å±žæ€§åŠ¨ç”»#\n\n> ç»„ä»¶çš„æŸäº›é€šç”¨å±žæ€§å˜åŒ–æ—¶ï¼Œå¯ä»¥é€šè¿‡å±žæ€§åŠ¨ç”»å®žçŽ°æ¸å˜è¿‡æ¸¡æ•ˆæžœï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚\n\n * æ”¯æŒçš„å±žæ€§åŒ…æ‹¬widthã€heightã€backgroundColorã€opacityã€scaleã€rotateã€translateç­‰ã€‚\n\n@Entry\n@Component\nstruct Index {\n  @State\n  widthSize: number = 100\n  @State\n  heightSize: number = 40\n\n  build() {\n    Column({ space: 15 }) {\n      Button('å…ƒç´ åŠ¨ç”»')\n        .width(this.widthSize)\n        .height(this.heightSize)\n        .onClick(() => {\n          this.widthSize = 200\n          this.heightSize = 100\n        })\n        .animation({\n          // åŠ¨ç”»æ—¶é—´\n          duration: 1000,\n          // æ‰§è¡Œæ¬¡æ•°\n          iterations: -1,\n          // åŠ¨ç”»æ›²çº¿\n          curve: Curve.Ease,\n          // å»¶æ—¶æ—¶é—´\n          delay: 1000,\n          // æ’­æ”¾æ¨¡å¼\n          playMode: PlayMode.Alternate\n        })\n    }\n    .height('100%')\n    .width('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\n\n2. æ˜¾ç¤ºåŠ¨ç”»#\n\n> æä¾›å…¨å±€animateToæ˜¾å¼åŠ¨ç”»æŽ¥å£æ¥æŒ‡å®šç”±äºŽé—­åŒ…ä»£ç å¯¼è‡´çš„çŠ¶æ€å˜åŒ–æ’å…¥è¿‡æ¸¡åŠ¨æ•ˆã€‚\n\n@Entry\n@Component\nstruct Index {\n  @State\n  heightSize: number = 40\n\n  build() {\n    Column() {\n      Text('ä¸€çº§èœå•')\n        .height(40)\n        .onClick(() => {\n          animateTo({\n            duration: 200\n          }, () => {\n            this.heightSize = this.heightSize === 40 ? 0 : 40\n          })\n        })\n      Column() {\n        Text('ä¸€çº§èœå•')\n          .height(this.heightSize)\n        Text('ä¸€çº§èœå•')\n          .height(this.heightSize)\n      }\n    }\n    .backgroundColor('#069')\n  }\n}\n\n\n\n3. å…ƒç´ å…±äº«è½¬åœº#\n\n> å½“è·¯ç”±è¿›è¡Œåˆ‡æ¢æ—¶ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ç»„ä»¶çš„ sharedTransition å±žæ€§å°†è¯¥å…ƒç´ æ ‡è®°ä¸ºå…±äº«å…ƒç´ å¹¶è®¾ç½®å¯¹åº”çš„å…±äº«å…ƒç´ è½¬åœºåŠ¨æ•ˆã€‚\n\n\n@Entry\n@Component\nstruct Index {\n  build() {\n    Row({ space: 15 }) {\n      Column({ space: 10 }){\n        Image($rawfile('apple.png'))\n          .width('100%')\n          .aspectRatio(1)\n          .sharedTransition('apple', { duration: 500 })\n        Text('é¸£æ˜¥è°· æ­£å®—ç”˜è‚ƒç‰¹äº§èŠ±ç‰›æ°´æžœè‹¹æžœ ã€å¤©æ°´ç›´å‘ã€‘ 4.5-5æ–¤ä¸­æžœA(çº¦13-16ä¸ª)')\n          .sharedTransition('text', { duration: 500 })\n      }\n      .padding(15)\n      .width('50%')\n      .onClick(() => {\n        router.pushUrl({\n          url: 'pages/DetailPage'\n        })\n      })\n    }\n    .width('100%')\n  }\n}\n\n\n@Entry\n@Component\nstruct DetailPage {\n  build() {\n    Column({ space: 15 }) {\n      Column({ space: 10 }){\n        Image($rawfile('apple.png'))\n          .width('100%')\n          .aspectRatio(1)\n          .sharedTransition('apple', { duration: 500 })\n        Text('é¸£æ˜¥è°· æ­£å®—ç”˜è‚ƒç‰¹äº§èŠ±ç‰›æ°´æžœè‹¹æžœ ã€å¤©æ°´ç›´å‘ã€‘ 4.5-5æ–¤ä¸­æžœA(çº¦13-16ä¸ª)')\n          .fontSize(18)\n          .sharedTransition('text', { duration: 500 })\n      }\n      .padding(15)\n    }\n    .height('100%')\n    .width('100%')\n  }\n}\n\n\n\n4. æ‹–åŠ¨æ‰‹åŠ¿-é˜»å°¼å’Œç£å¸#\n\n> æ‹–åŠ¨æ‰‹åŠ¿ï¼ˆPanGestureï¼‰\n\n * æ‹–åŠ¨æ‰‹åŠ¿ç”¨äºŽè§¦å‘æ‹–åŠ¨æ‰‹åŠ¿äº‹ä»¶ï¼Œæ»‘åŠ¨è¾¾åˆ°æœ€å°æ»‘åŠ¨è·ç¦»ï¼ˆé»˜è®¤å€¼ä¸º5vpï¼‰æ—¶æ‹–åŠ¨æ‰‹åŠ¿è¯†åˆ«æˆåŠŸã€‚\n\nå®žçŽ°ä¸‹æ‹‰åˆ·æ–°æ•ˆæžœï¼š\n\n 1. ä½¿ç”¨ Stack å †å ä¸‹æ‹‰åˆ·æ–°å®¹å™¨å’Œåˆ—è¡¨å®¹å™¨\n 2. ä½¿ç”¨æ‰‹åŠ¿äº‹ä»¶ PanGesture å®žçŽ°æ‹–åŠ¨åˆ—è¡¨å®¹å™¨\n 3. ä½¿ç”¨ animateTo å®žçŽ°ç£å¸åŠ¨ç”»æ•ˆæžœ\n 4. æ‹–åŠ¨è·ç¦»è¶…å‡ºé˜€å€¼ï¼Œæ¨¡æ‹Ÿå¼€å¯åŠ è½½æ•ˆæžœï¼ŒæŽ§åˆ¶æ–‡å­—æ˜¾ç¤ºå’ŒåŠ¨ç”»\n\n\n@Entry\n@Component\nstruct Index {\n  @State\n  translateY: number = 0\n  @State\n  text: string = 'ä¸‹æ‹‰å³å¯åˆ·æ–°'\n  @State\n  loading: boolean = false\n\n  ease (originValue: number = 0) {\n    const space = 60\n    const damp = 0.3\n    if ( originValue > space ) {\n      return space + ( originValue - space ) * damp\n    }\n    return originValue\n  }\n\n  build() {\n    Stack({ alignContent: Alignment.Top }) {\n      Row() {\n        if (this.loading) {\n          LoadingProgress()\n            .width(32)\n            .aspectRatio(1)\n        }\n        Text(this.text)\n          .fontColor('#999')\n          .width(100)\n      }\n      .height(100)\n\n      List() {\n\n      }\n      .backgroundColor('#fff')\n      .height('100%')\n      .width('100%')\n      .translate({ y: this.translateY })\n      .gesture(\n        PanGesture()\n          .onActionUpdate((event: GestureEvent) => {\n            this.translateY = this.ease(event.offsetY)\n            if ( this.translateY > 100 ) {\n              this.text = 'é‡Šæ”¾ç«‹å³åˆ·æ–°'\n            }\n          })\n          .onActionEnd((event: GestureEvent) => {\n            if (this.translateY > 100) {\n              this.loading = true\n              this.text = 'æ­£åœ¨åˆ·æ–°ä¸­...'\n              animateTo({ duration: 300 }, () => {\n                this.translateY = 100\n              })\n              // åŠ è½½æ•°æ®\n              setTimeout(() => {\n                this.loading = false\n                this.text = ''\n                animateTo({ duration: 300, onFinish: () => this.text = 'ä¸‹æ‹‰å³å¯åˆ·æ–°' }, () => {\n                  this.translateY = 0\n                })\n                promptAction.showToast({ message: 'åˆ·æ–°æˆåŠŸ' })\n              }, 2000)\n            } else {\n              animateTo({ duration: 300 }, () => {\n                this.translateY = 0\n              })\n            }\n          })\n      )\n    }\n    .height('100%')\n    .width('100%')\n    .backgroundColor('#f3f4f5')\n  }\n}\n\n\n\nç³»ç»Ÿèƒ½åŠ›#\n\n\n1. æ•°æ®ç®¡ç†-ç”¨æˆ·é¦–é€‰é¡¹#\n\n> ç”¨æˆ·é¦–é€‰é¡¹ä¸ºåº”ç”¨æä¾› Key-Value é”®å€¼åž‹çš„æ•°æ®å¤„ç†èƒ½åŠ›ï¼Œæ”¯æŒåº”ç”¨æŒä¹…åŒ–è½»é‡çº§æ•°æ®ï¼Œå¹¶å¯¹å…¶ä¿®æ”¹å’ŒæŸ¥è¯¢ã€‚\n\n * Key é”®ä¸º string ç±»åž‹ï¼Œè¦æ±‚éžç©ºä¸”é•¿åº¦ä¸è¶…è¿‡ 80 ä¸ªå­—èŠ‚ã€‚\n * å¦‚æžœ Value å€¼ä¸º string ç±»åž‹ï¼Œå¯ä»¥ä¸ºç©ºï¼Œä¸ä¸ºç©ºæ—¶é•¿åº¦ä¸è¶…è¿‡ 8192 ä¸ªå­—èŠ‚ã€‚\n * å†…å­˜ä¼šéšç€å­˜å‚¨æ•°æ®é‡çš„å¢žå¤§è€Œå¢žå¤§ï¼Œæ‰€ä»¥å­˜å‚¨çš„æ•°æ®é‡åº”è¯¥æ˜¯è½»é‡çº§çš„ï¼Œå»ºè®®å­˜å‚¨çš„æ•°æ®ä¸è¶…è¿‡ä¸€ä¸‡æ¡ï¼Œå¦åˆ™ä¼šåœ¨å†…å­˜æ–¹é¢äº§ç”Ÿè¾ƒå¤§çš„å¼€é”€ã€‚\n\n1ï¼‰çŸ¥æ™“ API ç”¨æ³•\n\n// èŽ·å–é¦–é€‰é¡¹å®žä¾‹\ngetPreferences(context: Context, name: string): Promise\n\n// é¦–é€‰é¡¹å®žâ†’èŽ·å–æ•°æ®\nget(key: string, defValue: ValueType): Promise\n// é¦–é€‰é¡¹å®žâ†’è®¾ç½®|ä¿®æ”¹æ•°æ®\nput(key: string, value: ValueType): Promise\n// é¦–é€‰é¡¹å®žâ†’åˆ é™¤æ•°æ®\ndelete(key: string): Promise\n\n\n\n2ï¼‰å†™ä¸€ä¸ªå­˜å‚¨ç”¨æˆ·çš„å·¥å…·\n\n\n\nexport class User {\n  name?: string\n  age?: number\n}\n\nexport class UserStore {\n  KEY = 'user-store'\n\n  getStore() {\n    return preferences.getPreferences(getContext(this), 'userStore')\n  }\n\n  async setData(data: User) {\n    const store = await this.getStore()\n    await store.put(this.KEY, JSON.stringify(data))\n    await store.flush()\n  }\n\n  async getData() {\n    const store = await this.getStore()\n    const data = await store.get(this.KEY, '{}') as string\n    return JSON.parse(data) as User\n  }\n\n  async delData() {\n    const store = await this.getStore()\n    await store.delete(this.KEY)\n    await store.flush()\n  }\n\n}\n\n\n\n\n\n@Entry\n@Component\nstruct Index {\n  userStore: UserStore\n  @State\n  user: User = {}\n\n  aboutToAppear() {\n    this.userStore = new UserStore()\n    this.getUser()\n  }\n\n  async getUser () {\n    const user = await this.userStore.getData()\n    this.user = user\n  }\n\n  build() {\n    Column({ space: 15 }) {\n\n      if ( this.user?.name && this.user?.age ) {\n        Text(`${ this.user.name } ä»Šå¹´ ${ this.user.age } å²`)\n      }\n\n      Button('è®¾ç½® User')\n        .onClick(async () => {\n          await this.userStore.setData({ name: 'jack', age: 18 })\n          await this.getUser()\n        })\n\n      Button('ä¿®æ”¹ User')\n        .onClick(async () => {\n          await this.userStore.setData({ name: 'tom', age: 17 })\n          await this.getUser()\n        })\n\n      Button('åˆ é™¤ User')\n        .onClick(async () => {\n          await this.userStore.delData()\n          await this.getUser()\n        })\n\n      Button('æ¢ä¸€é¡µ')\n        .onClick(() => {\n          router.pushUrl({\n            url: 'pages/DetailPage'\n          })\n        })\n    }\n    .height('100%')\n    .width('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\n\n2. ç»˜ç”»èƒ½åŠ›-ç”»å¸ƒç»„ä»¶#\n\n1ï¼‰äº†è§£ ç”»å¸ƒ åŸºæœ¬ç”¨æ³•\n\n@Entry\n@Component\nstruct Index{\n\n  // æŠ—é”¯é½¿è®¾ç½®\n  private settings: RenderingContextSettings = new RenderingContextSettings(true)\n  // ç”»å¸ƒå®žä¾‹\n  private context: CanvasRenderingContext2D = new CanvasRenderingContext2D(this.settings)\n\n  build() {\n    Column({ space: 15 }) {\n      // ç”»å¸ƒç»„ä»¶\n      Canvas(this.context)\n        .width(252)\n        .aspectRatio(1)\n        .backgroundColor('#ccc')\n        .onReady(() => {\n          // ç»˜åˆ¶è¾¹æ¡†ç›’å­\n          this.context.strokeRect(100, 100, 50, 50)\n          // ç»˜åˆ¶å¡«å……ç›’å­\n          this.context.fillRect(150, 150, 50, 50)\n        })\n    }\n    .height('100%')\n    .width('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\n2ï¼‰ç»˜åˆ¶è¡¨ç›˜å’Œç§’é’ˆ\n\nå‰ç½®çŸ¥è¯†ï¼š\n\n * drawImage(img: ImageBitmap, x, y, w, h) å›¾ç‰‡éœ€è¦ ImageBitmap æ ¼å¼\n * rotate(angle: number) angle æ˜¯å¼§åº¦ï¼Œ1Â° = Math.PI / 180ï¼Œå›´ç»• 0 0 ä¸­å¿ƒæ—‹è½¬\n\n@Entry\n@Component\nstruct Index{\n\n  private settings: RenderingContextSettings = new RenderingContextSettings(true)\n  private context: CanvasRenderingContext2D = new CanvasRenderingContext2D(this.settings)\n  private panImg: ImageBitmap = new ImageBitmap('/images/ic_clock_pan.png')\n  private secondImg: ImageBitmap = new ImageBitmap('/images/ic_second_pointer.png')\n\n\n  build() {\n    Column({ space: 15 }) {\n      Canvas(this.context)\n        .width(252)\n        .aspectRatio(1)\n        .onReady(() => {\n          // å‚æ•°ï¼šå›¾ç‰‡ã€ç»˜åˆ¶åŽŸç‚¹xåæ ‡ã€ç»˜åˆ¶åŽŸç‚¹yåæ ‡ã€å›¾ç‰‡ç»˜åˆ¶å®½åº¦ã€å›¾ç‰‡ç»˜åˆ¶é«˜åº¦\n          this.context.drawImage(this.panImg, 0 ,0 , 252, 252)\n\n          this.context.translate(126, 126)\n          this.context.rotate(Math.PI / 180 * 180)\n          this.context.translate(-126, -126)\n          this.context.drawImage(this.secondImg, 122, 0, 8, 252)\n        })\n    }\n    .height('100%')\n    .width('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\n\n3. å…¬å…±äº‹ä»¶ä¸Žé€šçŸ¥-é€šçŸ¥ç®¡ç†#\n\n> æœ¬æ¨¡å—æä¾›é€šçŸ¥ç®¡ç†çš„èƒ½åŠ›ï¼ŒåŒ…æ‹¬å‘å¸ƒã€å–æ¶ˆå‘å¸ƒé€šçŸ¥ï¼Œåˆ›å»ºã€èŽ·å–ã€ç§»é™¤é€šçŸ¥é€šé“ï¼ŒèŽ·å–é€šçŸ¥çš„ä½¿èƒ½çŠ¶æ€ã€è§’æ ‡ä½¿èƒ½çŠ¶æ€ï¼ŒèŽ·å–é€šçŸ¥çš„ç›¸å…³ä¿¡æ¯ç­‰ã€‚\n\nå‚è€ƒæ–‡æ¡£ é“¾æŽ¥\n\n1ï¼‰å‘é€é€šçŸ¥å’Œå–æ¶ˆé€šçŸ¥\n\n\n\n@Entry\n@Component\nstruct Index {\n  notifyId = 100\n\n  build() {\n    Column({ space: 15 }) {\n      Button('æ·»åŠ é€šçŸ¥')\n        .onClick(async () => {\n          const request: notificationManager.NotificationRequest = {\n            id: this.notifyId,\n            content: {\n              contentType: notificationManager.ContentType.NOTIFICATION_CONTENT_BASIC_TEXT,\n              normal: {\n                title: \"æ¸©é¦¨æç¤º\",\n                text: \"æ‚¨çš„äº¬ä¸œå¿«é€’ 100321120341233 å¿«é€’å·²ç»è¾¾åˆ°åŒ—äº¬ï¼\",\n                additionalText: \"ç‰©æµæé†’\"\n              }\n            },\n          }\n          notificationManager.publish(request)\n        })\n      Button('å–æ¶ˆé€šçŸ¥')\n        .onClick(() => {\n          notificationManager.cancel(this.notifyId)\n        })\n    }\n    .height('100%')\n    .width('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\nTIP\n * è¿è¡Œä¸Šé¢é€šçŸ¥å¦‚æžœé‡åˆ°é—ªå´©çŽ°è±¡ï¼Œå‘ŠçŸ¥ Invalid Parameter çš„è¯ï¼Œè¯·æ“¦é™¤æ¨¡æ‹Ÿå™¨æ•°æ®ã€‚\n\n2ï¼‰é€šçŸ¥ç‚¹å‡»å”¤èµ·åº”ç”¨\n\n\n\n\n// èŽ·å– wantAgent\nconst want = await wantAgent.getWantAgent({\n  wants: [\n    {\n      bundleName: 'com.itcast.myapplication',\n      abilityName: 'EntryAbility'\n    }\n  ],\n  operationType: wantAgent.OperationType.START_ABILITY,\n  requestCode: 0\n})\n\n\nconst request: notificationManager.NotificationRequest = {\n  id: this.notifyId,\n  content: {\n    contentType: notificationManager.ContentType.NOTIFICATION_CONTENT_BASIC_TEXT,\n    normal: {\n      title: \"æ¸©é¦¨æç¤º\",\n      text: \"æ‚¨çš„äº¬ä¸œå¿«é€’ 100321120341233 å¿«é€’å·²ç»è¾¾åˆ°åŒ—äº¬ï¼\",\n      additionalText: \"ç‰©æµæé†’\"\n    }\n  },\n  // è·³è½¬åº”ç”¨\n+  wantAgent: want\n}\n\n\n\n4. åŽå°ä»»åŠ¡-åŽå°ä»£ç†æé†’#\n\n> åº”ç”¨é€€åˆ°åŽå°æˆ–è¿›ç¨‹ç»ˆæ­¢åŽï¼Œä»ç„¶æœ‰ä¸€äº›æé†’ç”¨æˆ·çš„å®šæ—¶ç±»ä»»åŠ¡ï¼Œ\n> \n> ä¾‹å¦‚è´­ç‰©ç±»åº”ç”¨æŠ¢è´­æé†’ç­‰ï¼Œä¸ºæ»¡è¶³æ­¤ç±»åŠŸèƒ½åœºæ™¯ï¼Œç³»ç»Ÿæä¾›äº†ä»£ç†æé†’ï¼ˆreminderAgentManagerï¼‰çš„èƒ½åŠ›ã€‚\n\nå‚è€ƒæ–‡æ¡£ é“¾æŽ¥\n\n * å€’è®¡æ—¶ç±»ï¼šåŸºäºŽå€’è®¡æ—¶çš„æé†’åŠŸèƒ½\n * æ—¥åŽ†ç±»ï¼šåŸºäºŽæ—¥åŽ†çš„æé†’åŠŸèƒ½\n * é—¹é’Ÿç±»ï¼šåŸºäºŽæ—¶é’Ÿçš„æé†’åŠŸèƒ½\n\néœ€è¦å¼€å¯ ohos.permission.PUBLISH_AGENT_REMINDER æƒé™\n\n1ï¼‰é—¹é“ƒ\n\n\n\n\n@Entry\n@Component\nstruct Index {\n  reminderId = null\n\n  build() {\n    Column({ space: 15 }) {\n      Button('æ·»åŠ é—¹é“ƒ')\n        .onClick(async () => {\n          let targetReminderAgent: reminderAgentManager.ReminderRequestAlarm = {\n            // æé†’ç±»åž‹ä¸ºé—¹é’Ÿç±»åž‹\n            reminderType: reminderAgentManager.ReminderType.REMINDER_TYPE_ALARM, \n            // æŒ‡æ˜Žæé†’çš„ç›®æ ‡æ—¶åˆ»\n            hour: 19, \n            // æŒ‡æ˜Žæé†’çš„ç›®æ ‡åˆ†é’Ÿ\n            minute: 57, \n            // æŒ‡æ˜Žæ¯å‘¨å“ªå‡ å¤©éœ€è¦é‡å¤æé†’\n            daysOfWeek: [], \n            // è®¾ç½®å¼¹å‡ºçš„æé†’é€šçŸ¥ä¿¡æ¯ä¸Šæ˜¾ç¤ºçš„æŒ‰é’®ç±»åž‹å’Œæ ‡é¢˜\n            actionButton: [ \n              {\n                title: 'åœæ­¢',\n                type: reminderAgentManager.ActionButtonType.ACTION_BUTTON_TYPE_CLOSE\n              },\n            ],\n            // å“é“ƒæ—¶é•¿ç§’\n            ringDuration: 60, \n            // ç‚¹å‡»é€šçŸ¥è·³è½¬çš„ want\n            wantAgent: {\n              pkgName: 'com.itcast.myapplication',\n              abilityName: 'EntryAbility',\n            },\n          }\n          // è®°å½•id æ¸…ç†ä½¿ç”¨\n          this.reminderId = await reminderAgentManager.publishReminder(targetReminderAgent)\n          promptAction.showToast({ message: 'æ·»åŠ é—¹é“ƒæˆåŠŸ' })\n        })\n      Button('å–æ¶ˆé—¹é“ƒ')\n        .onClick(async () => {\n          // ä¸èƒ½é€€å‡ºåº”ç”¨ï¼Œå¦åˆ™ this.reminderId æ˜¯ nullï¼Œå¼€å‘çš„æ—¶å€™å¯ä»¥æŒä¹…åŒ–\n          await reminderAgentManager.cancelReminder(this.reminderId)\n          promptAction.showToast({ message: 'å–æ¶ˆé—¹é“ƒæˆåŠŸ' })\n        })\n    }\n    .height('100%')\n    .width('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n","frontmatter":{"title":"HM - é¸¿è’™-åº”ç”¨ç¨‹åºå¼€å‘"},"version":""},{"id":1,"title":"HM - é¸¿è’™-ç»„ä»¶åŸºç¡€","routePath":"/interview-handbook-project/guide/","lang":"","toc":[{"text":"å¼€å‘çŽ¯å¢ƒ","id":"å¼€å‘çŽ¯å¢ƒ","depth":2,"charIndex":3},{"text":"1. èµ·æ­¥-é¸¿è’™ç®€ä»‹","id":"1-èµ·æ­¥-é¸¿è’™ç®€ä»‹","depth":3,"charIndex":11},{"text":"2. èµ·æ­¥-DevEco Studio","id":"2-èµ·æ­¥-deveco-studio","depth":3,"charIndex":510},{"text":"3. èµ·æ­¥-HelloWorld","id":"3-èµ·æ­¥-helloworld","depth":3,"charIndex":795},{"text":"4. èµ·æ­¥-æ•ˆæžœé¢„è§ˆ","id":"4-èµ·æ­¥-æ•ˆæžœé¢„è§ˆ","depth":3,"charIndex":881},{"text":"5. èµ·æ­¥-å·¥ç¨‹ç»“æž„","id":"5-èµ·æ­¥-å·¥ç¨‹ç»“æž„","depth":3,"charIndex":1580},{"text":"ç»„ä»¶åŸºç¡€","id":"ç»„ä»¶åŸºç¡€","depth":2,"charIndex":1761},{"text":"1. ç»„ä»¶-ä»€ä¹ˆæ˜¯ArkTS","id":"1-ç»„ä»¶-ä»€ä¹ˆæ˜¯arkts","depth":3,"charIndex":1769},{"text":"2. åŸºç¡€-ç»„ä»¶ç»“æž„","id":"2-åŸºç¡€-ç»„ä»¶ç»“æž„","depth":3,"charIndex":2292},{"text":"3. åŸºç¡€-ç³»ç»Ÿç»„ä»¶(ArkUI)","id":"3-åŸºç¡€-ç³»ç»Ÿç»„ä»¶arkui","depth":3,"charIndex":3131},{"text":"4. åŸºç¡€-ç»„ä»¶çŠ¶æ€","id":"4-åŸºç¡€-ç»„ä»¶çŠ¶æ€","depth":3,"charIndex":3644},{"text":"æ ·å¼å¤„ç†","id":"æ ·å¼å¤„ç†","depth":2,"charIndex":5093},{"text":"1. æ ·å¼-è¯­æ³•(é“¾å¼&æžšä¸¾)","id":"1-æ ·å¼-è¯­æ³•é“¾å¼æžšä¸¾","depth":3,"charIndex":5101},{"text":"2. æ ·å¼-å•ä½vpå’Œé€‚é…","id":"2-æ ·å¼-å•ä½vpå’Œé€‚é…","depth":3,"charIndex":5733},{"text":"2. æ ·å¼-@Styles å¤ç”¨","id":"2-æ ·å¼-styles-å¤ç”¨","depth":3,"charIndex":8893},{"text":"3. æ ·å¼-@Extends å¤ç”¨","id":"3-æ ·å¼-extends-å¤ç”¨","depth":3,"charIndex":11412},{"text":"4. æ ·å¼-å¤šæ€","id":"4-æ ·å¼-å¤šæ€","depth":3,"charIndex":12355},{"text":"ç»„ä»¶çŠ¶æ€","id":"ç»„ä»¶çŠ¶æ€","depth":2,"charIndex":13999},{"text":"1. çŠ¶æ€-classè¯­æ³•","id":"1-çŠ¶æ€-classè¯­æ³•","depth":3,"charIndex":14007},{"text":"2. çŠ¶æ€-å¤æ‚çŠ¶æ€","id":"2-çŠ¶æ€-å¤æ‚çŠ¶æ€","depth":3,"charIndex":15062},{"text":"ç•Œé¢æ¸²æŸ“","id":"ç•Œé¢æ¸²æŸ“","depth":2,"charIndex":17043},{"text":"1. æ¸²æŸ“-æ¡ä»¶æ¸²æŸ“","id":"1-æ¸²æŸ“-æ¡ä»¶æ¸²æŸ“","depth":3,"charIndex":17051},{"text":"2. æ¸²æŸ“-å¾ªçŽ¯æ¸²æŸ“","id":"2-æ¸²æŸ“-å¾ªçŽ¯æ¸²æŸ“","depth":3,"charIndex":18318}],"domain":"","content":"#\n\n\nå¼€å‘çŽ¯å¢ƒ#\n\n\n1. èµ·æ­¥-é¸¿è’™ç®€ä»‹#\n\nä»‹ç»ï¼š\n\n * HarmonyOS æ˜¯æ–°ä¸€ä»£çš„æ™ºèƒ½ç»ˆç«¯æ“ä½œç³»ç»Ÿï¼Œä¸ºä¸åŒè®¾å¤‡çš„æ™ºèƒ½åŒ–ã€äº’è”ä¸ŽååŒæä¾›äº†ç»Ÿä¸€çš„è¯­è¨€ã€‚å¸¦æ¥ç®€æ´ï¼Œæµç•…ï¼Œè¿žç»­ï¼Œå®‰å…¨å¯é çš„å…¨åœºæ™¯äº¤äº’ä½“éªŒã€‚\n\nåŽ†ç¨‹ï¼š\n\næ—¶é—´       äº‹ä»¶\n2019     HarmonyOS 1.0ï¼ŒåŽä¸ºåœ¨ä¸œèŽžä¸¾è¡ŒåŽä¸ºå¼€å‘è€…å¤§ä¼šï¼Œæ­£å¼å‘å¸ƒæ“ä½œç³»ç»Ÿé¸¿è’™ OSï¼Œä¸»è¦ç”¨äºŽç‰©è”ç½‘\n2020     HarmonyOS 2.0ï¼ŒåŸºäºŽå¼€æºé¡¹ç›® OpenHarmony å¼€å‘çš„é¢å‘å¤šç§å…¨åœºæ™¯æ™ºèƒ½è®¾å¤‡çš„å•†ç”¨ç‰ˆæœ¬\n2021     HarmonyOS 3.0ï¼Œå…ˆåŽä¼˜åŒ–æ¸¸æˆæµç•…åº¦ã€åœ°å›¾ä¸‰ç»´ä½“éªŒã€ç³»ç»Ÿå®‰å…¨ï¼Œå¦å¤–ç³»ç»Ÿçš„ç¨³å®šæ€§ä¹Ÿå¾—åˆ°äº†å¢žå¼º\n2023.2   HarmonyOS 3.1ï¼Œç³»ç»Ÿçº¯å‡€èƒ½åŠ›è¿›ä¸€æ­¥æå‡ï¼Œå¯¹åŽå°å¼¹çª—ã€ éšè—åº”ç”¨ã€åŽå°è·³è½¬ç­‰æƒ…å†µ\n2023.7   åŽä¸º Mate 50 ç³»åˆ—æ‰‹æœºèŽ·æŽ¨ HarmonyOS 4.0\n2024     HarmonyOS Next å³å°†å‘å¸ƒï¼Œå°†ä¸åœ¨å…¼å®¹å®‰å“åº”ç”¨\n\nå’Œæˆ‘ä»¬æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ\n\n * çŽ¯å¢ƒå¼±è¡Œä¸šå·ï¼Œæ€Žä¹ˆåŠžï¼Ÿ\n * çº¯é¸¿è’™åº”ç”¨å¼€å‘æ½®ï¼Œä½ è·Ÿä¸è·Ÿï¼Ÿ\n * å‰ç«¯æŠ€æœ¯è¿ç§»é¸¿è’™å¼€å‘æ˜“ä¸Šæ‰‹ï¼Œä½ å­¦ä¸å­¦ï¼Ÿ\n\n\n2. èµ·æ­¥-DevEco Studio#\n\nå®‰è£… DevEco Studio ç¼–è¾‘å™¨\n\n 1. ä¸‹è½½ï¼šhttps://developer.harmonyos.com/cn/develop/deveco-studio#download\n    * Windows(64-bit)\n    * Mac(X86)\n    * Mac(ARM)\n 2. å®‰è£…ï¼šDevEco Studio â†’ ä¸€è·¯ Next\n 3. è¿è¡Œï¼š\n    * åŸºç¡€å®‰è£…ï¼šNode.js >= 16.9.1 + Install ohpm é¸¿è’™åŒ…ç®¡ç†å™¨\n    * SDK å®‰è£…\n    * å®‰è£…å®Œæ¯•\n\n\n3. èµ·æ­¥-HelloWorld#\n\nåˆ›å»ºä¸€ä¸ªç©ºé¡¹ç›®:\n\n 1. Create Project\n\n 2. é€‰æ‹©é¡¹ç›®æ¨¡æ¿\n\n 3. å¡«å†™é¡¹ç›®ä¿¡æ¯\n\n 4. Finish\n\n\n4. èµ·æ­¥-æ•ˆæžœé¢„è§ˆ#\n\næ•ˆæžœé¢„è§ˆæ–¹æ³•ï¼š\n\n * Previewer é¢„è§ˆæ¨¡å¼\n * Local Emulator æœ¬åœ°æ¨¡æ‹Ÿå™¨\n * Remote Emulator è¿œç¨‹æ¨¡æ‹Ÿå™¨\n * Remote Device è¿œç¨‹çœŸæœº\n * Local Device æœ¬åœ°çœŸæœº\n\næŽ¨èä½¿ç”¨\n * Previewer é¢„è§ˆ å’Œ Local Emulator æœ¬åœ°æ¨¡æ‹Ÿå™¨ï¼›\n * å°¤å…¶æŽ¨èä½¿ç”¨ é¥é¥é¢†å…ˆ çœŸæœºè°ƒè¯•ï¼›\n\n1ï¼‰Previewer é¢„è§ˆ\n\n> åœºæ™¯ï¼šé™æ€é¡µé¢ï¼ˆæ²¡æœ‰ç»„ä»¶é—´æ•°æ®é€šä¿¡ã€ä¸æ¶‰åŠåˆ°ç½‘ç»œè¯·æ±‚ï¼‰\n> \n> æ¡ä»¶ï¼šæœ‰ @Entry æˆ– @Preview è£…é¥°å™¨é¡µé¢\n\n * é¢„è§ˆå’Œå®¡æŸ¥å…ƒç´ \n\n * å¤šè®¾å¤‡é¢„è§ˆ\n\n2ï¼‰Local Emulator æœ¬åœ°æ¨¡æ‹Ÿå™¨\n\n> åœºæ™¯ï¼šåŠ¨æ€é¡µé¢ï¼ˆå‡ ä¹Žå…¨åœºæ™¯ï¼Œä¸€äº›æ— æ³•æ¨¡æ‹Ÿçš„ç¡¬ä»¶åŠŸèƒ½ï¼‰\n\n * æ–°å»ºæ¨¡æ‹Ÿå™¨\n   \n   ä¸€è·¯ Next ...\n\n * å¯åŠ¨æ¨¡æ‹Ÿå™¨\n\n * è¿è¡Œé¡¹ç›®çœ‹æ•ˆæžœ\n\n * æ›´æ”¹åŽæ¯æ¬¡éœ€è¦ï¼ˆæ‰“åŒ… â†’ å¸è½½ â†’ å®‰è£… â†’ é¢„è§ˆï¼‰ï¼Œæœ‰æ²¡æœ‰çƒ­æ›´æ–°æˆ–è€…åˆ·æ–°è¿™ç§é¢„è§ˆæ–¹å¼ï¼Ÿ\n   \n   è°ƒè¯•é™æ€é¡µé¢å¯ä»¥ï¼Œä¸€æ—¦æœ‰äº†æ•°æ®å˜åŒ–ä¹Ÿéœ€è¦é‡å¯ï¼Œä½“éªŒä¸€èˆ¬~ ï¼ˆå­¦ä¹ éœ€è¦è€å¿ƒï¼ŒæœŸå¾… Next åšçš„æ›´å¥½~ï¼‰\n\nå…¶ä»–æ–¹å¼\n * Remote Emulator è¿œç¨‹æ¨¡æ‹Ÿå™¨\n * Remote Device è¿œç¨‹çœŸæœº\n * Local Device æœ¬åœ°çœŸæœº\n\næ¡ä»¶ï¼š\n\n * éœ€è¦æ³¨å†ŒåŽä¸ºè´¦å·, ç‚¹è¿™ https://developer.harmonyos.com/ ç„¶åŽç‚¹å‡»ç™»å½•é¡µé¢ï¼ŒåŽ»æ³¨å†Œå§~\n * ç™»å½•ä¹‹åŽï¼Œéœ€è¦è‡ªåŠ¨ç”Ÿæˆç­¾åä¿¡æ¯ï¼Œè¿™ä¸ªæˆ‘ä»¬åŽé¢è®²çœŸæœºè°ƒè¯•å†ç»™å¤§å®¶æ¼”ç¤ºã€‚\n\n\n5. èµ·æ­¥-å·¥ç¨‹ç»“æž„#\n\n> æˆ‘ä»¬åœ¨å“ªé‡Œå†™ä»£ç ï¼Ÿ\n\nStage æ¨¡åž‹\n\näº†è§£Appç»“æž„å…³ç³»ï¼Œç­‰åŽé¢æˆ‘ä»¬é¡¹ç›®é˜¶æ®µæ¥è®²ä¸€äº›å·¥ç¨‹é…ç½®æ–‡ä»¶ä½œç”¨ï¼ŒçŽ°åœ¨ä½ è¦çŸ¥é“ï¼š\n\n * entry æ˜¯ä¸€ä¸ª Module åº”ç”¨åŒ…\n\n * entryability æ˜¯ä¸€ä¸ª UIAbility åŒ…å«ç”¨æˆ·ç•Œé¢çš„åº”ç”¨ç»„ä»¶\n\n * pages æ˜¯é¡µé¢\n\n * components å¯ä»¥æ˜¯ç»„ä»¶\n\n\nç»„ä»¶åŸºç¡€#\n\n\n1. ç»„ä»¶-ä»€ä¹ˆæ˜¯ArkTS#\n\nArkTSæ˜¯HarmonyOSä¼˜é€‰çš„ä¸»åŠ›åº”ç”¨å¼€å‘è¯­è¨€ã€‚ArkTSå›´ç»•åº”ç”¨å¼€å‘åœ¨TypeScriptï¼ˆç®€ç§°TSï¼‰ç”Ÿæ€åŸºç¡€ä¸Šåšäº†è¿›ä¸€æ­¥æ‰©å±•ï¼Œç»§æ‰¿äº†TSçš„æ‰€æœ‰ç‰¹æ€§ï¼Œæ˜¯\nTSçš„è¶…é›†ã€‚\n\næ‰©å±•èƒ½åŠ›å¦‚ä¸‹ï¼š\n\n 1. åŸºæœ¬è¯­æ³•\n    * å®šä¹‰å£°æ˜Žå¼UIã€è‡ªå®šä¹‰ç»„ä»¶ã€åŠ¨æ€æ‰©å±•UIå…ƒç´ ï¼›\n    * æä¾›ArkUIç³»ç»Ÿç»„ä»¶ï¼Œæä¾›ç»„ä»¶äº‹ä»¶ã€æ–¹æ³•ã€å±žæ€§ï¼›\n    * å…±åŒæž„æˆ UI å¼€å‘ä¸»ä½“\n 2. çŠ¶æ€ç®¡ç†\n    * ç»„ä»¶çŠ¶æ€ã€ç»„ä»¶æ•°æ®å…±äº«ã€åº”ç”¨æ•°æ®å…±äº«ã€è®¾å¤‡å…±äº«ï¼›\n 3. æ¸²æŸ“æŽ§åˆ¶\n    * æ¡ä»¶æ¸²æŸ“ã€å¾ªçŽ¯æ¸²æŸ“ã€æ•°æ®æ‡’åŠ è½½ï¼›\n\nå£°æ˜Žå¼UIï¼Ÿ\n\né—®é¢˜ï¼Ÿé€šè¿‡ä¸€æ®µ HTML æ ‡ç­¾å±•ç¤ºå‡ºå¯¹åº”çš„é¡µé¢æ–¹ä¾¿ï¼Œè¿˜æ˜¯ä½¿ç”¨ document.createElement('tag')åˆ›å»ºæ ‡ç­¾æž„å»ºé¡µé¢æ–¹ä¾¿ï¼Ÿ\n\n * æ˜¾ç„¶æ˜¯ HTML , å…¶å®ž HTML æœ¬èº«å°±æ˜¯å£°æ˜Žå¼çš„ï¼Œé€šè¿‡æè¿°çš„æ–¹å¼åŽ»å£°æ˜Ž UI ç•Œé¢ã€‚\n * ä¸€äº›å‰ç«¯æ¡†æž¶ä¹Ÿæ˜¯å£°æ˜Žå¼UIï¼Œå¦‚ Vue ä½¿ç”¨çš„ tempalte æ¨¡æ¿ï¼Œå¦‚ React ä½¿ç”¨çš„ JSXã€‚\n * åœ¨ä¾‹å¦‚çŽ°åœ¨çš„ Jetpack Compose SwiftUI Flutter ç­‰APPå¼€å‘æŠ€æœ¯ä¹Ÿæ˜¯å£°æ˜Žå¼ã€‚\n\n\n2. åŸºç¡€-ç»„ä»¶ç»“æž„#\n\nArkTSé€šè¿‡è£…é¥°å™¨ @Component å’Œ @Entry è£…é¥° struct å…³é”®å­—å£°æ˜Žçš„æ•°æ®ç»“æž„ï¼Œæž„æˆä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶ã€‚ è‡ªå®šä¹‰ç»„ä»¶ä¸­æä¾›äº†ä¸€ä¸ª build\nå‡½æ•°ï¼Œå¼€å‘è€…éœ€åœ¨è¯¥å‡½æ•°å†…ä»¥é“¾å¼è°ƒç”¨çš„æ–¹å¼è¿›è¡ŒåŸºæœ¬çš„ UI æè¿°ï¼ŒUI æè¿°çš„æ–¹æ³•è¯·å‚è€ƒ UI æè¿°è§„èŒƒã€‚\n\n1ï¼‰é¡µé¢ç»„ä»¶\n\n@Entry\n@Component\nstruct Index {\n  // å·¥ç¨‹é»˜è®¤æ˜¾ç¤º `Index` é¡µé¢ç»„ä»¶\n  // build æ˜¯å£°æ˜ŽUIçš„ä½ç½®\n  build() {\n    Text('é¡µé¢ç»„ä»¶')\n  }\n}\n\n\n2ï¼‰è‡ªå®šä¹‰ç»„ä»¶\n\n\n// å®šä¹‰ `Footer` ç»„ä»¶\n@Component\nstruct Footer {\n  build() {\n    Text('è‡ªå®šä¹‰ç»„ä»¶')\n  }\n}\n\n@Entry\n@Component\nstruct Index {\n  build() {\n    Column(){\n      // ä½¿ç”¨ `Footer` ç»„ä»¶\n      Footer()\n    }\n  }\n}\n\n\nä¸ºäº†æ›´å¥½ç»´æŠ¤ï¼Œè‡ªå®šä¹‰ç»„ä»¶é€šå¸¸ä¼šæ–°å»ºä¸€ä¸ªæ–‡ä»¶ Footer.etsï¼Œé€šè¿‡æ¨¡å—åŒ–è¯­æ³•å¯¼å‡ºå¯¼å…¥(é»˜è®¤|æŒ‰éœ€)ä½¿ç”¨ã€‚\n\n@Component\nexport default struct Footer {\n  build() {\n    Text('è‡ªå®šä¹‰ç»„ä»¶')\n  }\n}\n\n\n\n\n@Entry\n@Component\nstruct Index {\n  build() {\n    Column(){\n      // ä½¿ç”¨ `Footer` ç»„ä»¶\n      Footer()\n    }\n  }\n}\n\n\nTIP\n * @Entry @Component æ˜¯é¡µé¢ç»„ä»¶ï¼Œå°†æ¥éœ€è¦é¡µé¢è·³è½¬å°±éœ€è¦å†å®šä¹‰ä¸€ä¸ªé¡µé¢ã€‚\n * @Component è‡ªå®šä¹‰ç»„ä»¶ï¼Œä¸€ä¸ªé¡µé¢ç»„ä»¶ä¸‹å¯ä»¥æœ‰å¤šä¸ªè‡ªå®šä¹‰ç»„ä»¶ã€‚\n * build(){} åªèƒ½æœ‰ä¸€ä¸ªæ ¹å…ƒç´ \n\n\n3. åŸºç¡€-ç³»ç»Ÿç»„ä»¶(ArkUI)#\n\nå¸¸ç”¨ç³»ç»Ÿç»„ä»¶ Text Column Row Button TextInput æ›´å¤šç»„ä»¶\n\n * Text æ–‡æœ¬ç»„ä»¶\n * Column åˆ—ç»„ä»¶ï¼Œçºµå‘æŽ’åˆ—ï¼ŒFlexå¸ƒå±€ä¸»è½´æ˜¯Y\n * Row è¡Œç»„ä»¶ï¼Œæ¨ªå‘å‘æŽ’åˆ—ï¼ŒFlexå¸ƒå±€ä¸»è½´æ˜¯X\n * Button æŒ‰é’®ç»„ä»¶\n * InputText è¾“å…¥æ¡†ç»„ä»¶\n\nå®žçŽ°ä¸€ä¸ªç®€æ˜“ç™»å½•ç•Œé¢ï¼š\n\n@Entry\n@Component\nstruct Index {\n\n  build() {\n    Column(){\n      Row(){\n        Text('æ‰‹æœºå·')\n        TextInput()\n      }\n      Row(){\n        Text('éªŒè¯ç ')\n        TextInput()\n      }\n      Row(){\n        Button('é‡ç½®').backgroundColor('#ccc')\n        Button('ç™»å½•')\n      }\n    }\n  }\n}\n\n\nTIP\n * ArkUI ç»„ä»¶ä¸€èˆ¬éƒ½æ˜¯ Flex æ¨¡å¼ï¼Œå¤§éƒ¨åˆ†å¸ƒå±€å¯ä»¥ç”±è¡Œå’Œåˆ—ç»„æˆã€‚\n\n\n4. åŸºç¡€-ç»„ä»¶çŠ¶æ€#\n\n> å¦‚ä½•ä½¿ç”¨ @State å®šä¹‰ä¸€ä¸ªçŠ¶æ€å˜é‡ï¼Ÿ\n\n1ï¼‰ç»„ä»¶å˜é‡ï¼Œä¸å…·å¤‡é©±åŠ¨UIæ›´æ–°èƒ½åŠ›ã€‚\n\n@Entry\n@Component\nstruct Index {\n  count = 100\n\n  build() {\n    Text(this.count.toString())\n      .onClick(() => this.count++)\n  }\n}\n\n\n2ï¼‰çŠ¶æ€å˜é‡ï¼ŒæŒ‡é©±åŠ¨UIæ›´æ–°çš„æ•°æ®ï¼ŒåŠ ä¸Š @State è£…é¥°å™¨å³å¯ï¼Œæ³¨æ„ï¼šåŠ ä¸Šç±»åž‹å’Œåˆå§‹å€¼ã€‚\n\n@Entry\n@Component\nstruct Index {\n\n  @State\n  count: number = 100\n\n  build() {\n    Text(this.count.toString())\n      .onClick(() => this.count++)\n  }\n}\n\n\nTIP\n * åŠ ä¸Šç±»åž‹å’Œåˆå§‹å€¼\n * çŠ¶æ€å˜é‡ä¸å¯è®¾ç½®çš„ç±»åž‹æœ‰ï¼šany undefined null ä¸Žå¤æ‚ç±»åž‹çš„è”åˆç±»åž‹\n\nå…¶ä»–ï¼š\n\n * ç»‘å®šäº‹ä»¶åœ¨ç³»ç»Ÿç»„ä»¶åŽé“¾å¼ä½¿ç”¨ onXxxxx è¿›è¡Œç»‘å®šå³å¯\n * ä½¿ç”¨ @ohos.promptAction å¯ä»¥è¿›è¡Œè½»æç¤º promptAction.showToast({ message: 'Tip' })\n\nðŸ“•ðŸ“•ðŸ“• ç»ƒä¹ æ¡ˆä¾‹â†’å®žçŽ°ç™»å½•è¡¨å•æ•°æ®æ”¶é›†ã€é‡ç½®ã€æ¨¡æ‹Ÿæäº¤ã€‚\n\n\n@Entry\n@Component\nstruct Index {\n\n  @State\n  mobile: string = ''\n  @State\n  code: string = ''\n\n  build() {\n    Column(){\n      Row(){\n        Text('æ‰‹æœºå·')\n        TextInput({ text: this.mobile })\n          .onChange((value)=>this.mobile = value)\n      }\n      Row(){\n        Text('éªŒè¯ç ')\n        TextInput({ text: this.code })\n          .onChange((value)=>this.code = value)\n      }\n      Row(){\n        Button('é‡ç½®')\n          .backgroundColor('#ccc')\n          .onClick(()=>{\n            this.mobile = ''\n            this.code = ''\n          })\n        Button('ç™»å½•')\n          .onClick(()=>{\n            if (this.mobile && this.code) {\n              promptAction.showToast({ message: `${this.mobile} ç™»å½•æˆåŠŸ` })\n            } else {\n              promptAction.showToast({ message: `è¯·è¾“å…¥æ‰‹æœºå·æˆ–éªŒè¯ç ` })\n            }\n          })\n      }\n    }\n  }\n}\n\n\n\næ ·å¼å¤„ç†#\n\n\n1. æ ·å¼-è¯­æ³•(é“¾å¼&æžšä¸¾)#\n\n> ArkTSä»¥å£°æ˜Žæ–¹å¼ç»„åˆå’Œæ‰©å±•ç»„ä»¶æ¥æè¿°åº”ç”¨ç¨‹åºçš„UIï¼›\n> \n> åŒæ—¶è¿˜æä¾›äº†åŸºæœ¬çš„å±žæ€§ã€äº‹ä»¶å’Œå­ç»„ä»¶é…ç½®æ–¹æ³•ï¼Œå¸®åŠ©å¼€å‘è€…å®žçŽ°åº”ç”¨äº¤äº’é€»è¾‘ã€‚\n\n1ï¼‰æ ·å¼å±žæ€§\n\n * å±žæ€§æ–¹æ³•ä»¥ . é“¾å¼è°ƒç”¨çš„æ–¹å¼é…ç½®ç³»ç»Ÿç»„ä»¶çš„æ ·å¼å’Œå…¶ä»–å±žæ€§ï¼Œå»ºè®®æ¯ä¸ªå±žæ€§æ–¹æ³•å•ç‹¬å†™ä¸€è¡Œã€‚\n\n@Entry\n@Component\nstruct Index {\n  build() {\n    Text('æ¼”ç¤º')\n      .backgroundColor('red')\n      .fontSize(50)\n      .width('100%')\n      .height(100)\n  }\n}\n\n\n2ï¼‰æžšä¸¾å€¼\n\n * å¯¹äºŽç³»ç»Ÿç»„ä»¶ï¼ŒArkUIè¿˜ä¸ºå…¶å±žæ€§é¢„å®šä¹‰äº†ä¸€äº›æžšä¸¾ç±»åž‹ã€‚æ–‡æ¡£é“¾æŽ¥\n\n@Entry\n@Component\nstruct Index {\n  build() {\n    Text('æ¼”ç¤º')\n      .fontSize(50)\n      .width('100%')\n      .height(100)\n      .backgroundColor(Color.Blue)\n      .textAlign(TextAlign.Center)\n      .fontColor(Color.White)\n  }\n}\n\n\nTIP\n * æ ·å¼ç›¸å…³å±žæ€§é€šè¿‡é“¾å¼å‡½æ•°çš„æ–¹å¼è¿›è¡Œè®¾ç½®\n * å¦‚æžœç±»åž‹æ˜¯æžšä¸¾çš„ï¼Œé€šè¿‡æžšä¸¾ä¼ å…¥å¯¹åº”çš„å€¼\n\n\n2. æ ·å¼-å•ä½vpå’Œé€‚é…#\n\n> çŸ¥é“ vp å•ä½ï¼Œä»¥åŠé€‚é…æ€æƒ³\n\n1ï¼‰ vp æ˜¯ä»€ä¹ˆï¼Ÿvirtual pixel\n\n * å±å¹•å¯†åº¦ç›¸å…³åƒç´ ï¼Œæ ¹æ®å±å¹•åƒç´ å¯†åº¦è½¬æ¢ä¸ºå±å¹•ç‰©ç†åƒç´ ï¼Œå½“æ•°å€¼ä¸å¸¦å•ä½æ—¶ï¼Œé»˜è®¤å•ä½ vpï¼›åœ¨å®žé™…å®½åº¦ä¸º1440ç‰©ç†åƒç´ çš„å±å¹•ä¸Šï¼Œ1vp çº¦ç­‰äºŽ\n   3pxï¼ˆç‰©ç†åƒç´ ï¼‰\n\n * ä¸Šå›¾çš„æ„æ€æ˜¯ï¼Œä½¿ç”¨è¿™ä¸ªå•ä½åœ¨ä¸åŒå±å¹•ç‰©ç†åˆ†è¾¨çŽ‡çš„å®žé™…å°ºå¯¸ä¸€è‡´(Aè®¾å¤‡1è‹±å¯¸ï¼ŒBè®¾å¤‡1è‹±å¯¸)ã€‚\n\n2ï¼‰ä¹‹å‰ vw ã€rem å’Œ rpx ç›¸å¯¹äºŽå±å¹•å®½åº¦çš„å•ä½ï¼Œå¯ä»¥å®žçŽ°ç­‰æ¯”ä¾‹é€‚é…ï¼Œvp å¯ä»¥å—ï¼Ÿ\n\n\n\n@Entry\n@Component\nstruct Index {\n  build() {\n    Text('æ¼”ç¤º')\n      .width('100%')\n      .backgroundColor('red')\n      .onAreaChange((oldArea, newArea) => {\n        promptAction.showToast({\n          // 1. onAreaChangeæ”¹å˜å°ºå¯¸åŽä¼šè§¦å‘\n          // 2. newAreaä¸ºçŽ°åœ¨å…ƒç´ å°ºå¯¸\n          message: newArea.width.toString()\n        })\n      })\n  }\n}\n\n\næˆ‘ä»¬å‘çŽ°ï¼šä¸åŒçš„è®¾å¤‡å±å¹•çš„å®½åº¦ vp æ˜¯ä¸ä¸€è‡´çš„ï¼Œé‚£æ€Žä¹ˆé€‚é…å‘¢ï¼Ÿ\n\n3ï¼‰æ ¹æ®å®˜æ–¹çš„æ–‡æ¡£ï¼Œç»“åˆè‡ªå·±çš„ç†è§£ï¼Œé‡‡ç”¨ï¼šä¼¸ç¼©å¸ƒå±€ï¼Œç½‘æ ¼ç³»ç»Ÿï¼Œæ …æ ¼ç³»ç»Ÿè¿›è¡Œå¸ƒå±€é€‚é…ã€‚\n\nä¼¸ç¼© layoutWeight(flex: number) å å‰©ä½™ç©ºé—´å¤šå°‘ä»½ï¼Œå¯ä»¥ç†è§£æˆCSSçš„ flex: 1\n\n@Entry\n@Component\nstruct Index {\n  build() {\n    Row(){\n      Text('left')\n        .layoutWeight(1)\n        .backgroundColor('red')\n      Text('right')\n        .layoutWeight(2)\n        .backgroundColor('green')\n    }\n    .width('100%')\n  }\n}\n\n\nç­‰æ¯”ä¾‹ï¼Œè®¾ç½®å…ƒç´ å®½é«˜æ¯” aspectRatio(ratio: number)\n\n@Entry\n@Component\nstruct Index {\n  build() {\n    Text('left')\n      .width('50%')\n        // å®½é«˜æ¯”ä¾‹\n      .aspectRatio(1)\n      .backgroundColor('red')\n  }\n}\n\n\nTIP\n * vp æ˜¯é¸¿è’™é»˜è®¤å•ä½ï¼Œå’Œå±å¹•åƒç´ æœ‰å…³ï¼Œæœ€ç»ˆè¡¨çŽ°è§†è§‰å¤§å°åœ¨ä»»ä½•è®¾å¤‡ä¸€è‡´\n * é¸¿è’™ä¸€èˆ¬ä»¥ä¼¸ç¼© layoutWeightã€ç½‘æ ¼ã€æ …æ ¼è¿›è¡Œå¸ƒå±€é€‚é…ï¼Œå¦‚è¦ç­‰æ¯”ä¾‹ç¼©æ”¾å¯ä»¥è®¾ç½®é«˜å®½æ¯” aspectRatio\n\nðŸ“•ðŸ“•ðŸ“• ç»ƒä¹ æ¡ˆä¾‹â†’å®žçŽ°çŸ¥ä¹Žè¯„è®ºå›žå¤-è¯„è®ºåŒºåŸŸ\n\nè®¾è®¡ç¨¿ä¸€èˆ¬æ˜¯1080pxï¼š(è¿™é‡Œæ²¡æœ‰è®¾è®¡ç¨¿ï¼Œæä¾›äº†ä¸€äº›å°ºå¯¸)\n\n * Nav\n   * å·¦ä¾§è¿”å›žæŒ‰é’®24vpé«˜å®½èƒŒæ™¯é¢œè‰²#f5f5f5ï¼Œå›¾æ ‡12vpå°ºå¯¸é¢œè‰²#848484\n   * æ ‡é¢˜18vp\n * Comment\n   * å¤´åƒå°ºå¯¸32vpé«˜å®½ï¼Œå³ä¾§é—´è·10vp\n   * æ ‡é¢˜15vpï¼Œé¢œè‰²é»˜è®¤\n   * å†…å®¹16vpï¼Œé¢œè‰²#565656\n   * åº•éƒ¨12vpï¼Œé¢œè‰²#c3c4c5\n\n@Entry\n@Component\nstruct Index {\n  build() {\n    Column(){\n      // å¯¼èˆª\n      Row(){\n        Row(){\n          Image($r('app.media.ic_public_arrow_left'))\n            .width(16)\n            .aspectRatio(1)\n            // svg å›¾æ ‡å¯ä»¥ä½¿ç”¨å¡«å……é¢œè‰²\n            // .fillColor('red')\n        }\n        .width(24)\n        .aspectRatio(1)\n        .backgroundColor('#f5f5f5')\n        .borderRadius(12)\n        .justifyContent(FlexAlign.Center)\n        .margin({ left: 16 })\n\n        Text('è¯„è®ºå›žå¤')\n          .layoutWeight(1)\n          .textAlign(TextAlign.Center)\n          .padding({ right: 40 })\n      }\n      .height(40)\n      .border({ width: { bottom: 0.5 }, color: '#e4e4e4' })\n      // è¯„è®º\n      Row(){\n        Image($r('app.media.avatar'))\n          .width(32)\n          .aspectRatio(1)\n          .borderRadius(16)\n        Column({ space: 5 }){\n          Text('å‘¨æ°ä¼¦')\n            .width('100%')\n            .fontWeight(FontWeight.Bold)\n            .fontSize(15)\n          Text('å¤§ç†çŸ³èƒ½é›•åˆ»å‡ºè‚Œè‚‰å’Œçš®è‚¤çš„è´¨æ„Ÿï¼Œé‚£ä¸ªå¹´ä»£çš„å·¥åŒ å¥½ç‰›å•Š')\n            .width('100%')\n          Row(){\n            Text('10-21 Â· IPå±žåœ°åŒ—äº¬')\n              .fontSize(12)\n              .fontColor('#c3c4c5')\n            Row({ space: 4 }){\n              Image($r('app.media.ic_public_heart'))\n                .width(14)\n                .aspectRatio(1)\n                .fillColor('#c3c4c5')\n              Text('100')\n                .fontSize(12)\n                .fontColor('#c3c4c5')\n            }\n          }\n          .width('100%')\n          .justifyContent(FlexAlign.SpaceBetween)\n        }\n        .layoutWeight(1)\n        .padding({ left: 10 })\n      }\n      .padding(15)\n      .alignItems(VerticalAlign.Top)\n    }\n  }\n}\n\n\nTIP\n * åŽä¸ºå®˜æ–¹å›¾æ ‡ä¸‹è½½ é“¾æŽ¥\n\n\n2. æ ·å¼-@Styles å¤ç”¨#\n\n> åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¼šå‡ºçŽ°å¤§é‡ä»£ç åœ¨è¿›è¡Œé‡å¤æ ·å¼è®¾ç½®ï¼Œ@Styles å¯ä»¥å¸®æˆ‘ä»¬è¿›è¡Œæ ·å¼å¤ç”¨\n\n * å½“å‰ @Styles ä»…æ”¯æŒ é€šç”¨å±žæ€§ å’Œ é€šç”¨äº‹ä»¶ã€‚\n * æ”¯æŒ å…¨å±€ å®šä¹‰å’Œ ç»„ä»¶å†… å®šä¹‰ï¼ŒåŒæ—¶å­˜åœ¨ç»„ä»¶å†…è¦†ç›–å…¨å±€ç”Ÿæ•ˆã€‚\n\n// å…¨å±€\n@Styles \nfunction functionName() { ... }\n\n@Entry\n@Component\nsturt Index{\n  // ç»„ä»¶å†…\n  @Styles \n  functionName() { ... }\n\n  build() {\n    Text('Text')\n      .functionName()\n  }\n}\n\n\néœ€æ±‚ï¼šæ–‡å­—å’ŒæŒ‰é’®ç›¸åŒèƒŒæ™¯ï¼Œç‚¹å‡»+1\n\n1ï¼‰å…¨å±€\n\n@Styles function sameStyle() {\n  .backgroundColor(Color.Green)\n  .onClick(() => {\n    this.count++\n  })\n}\n\n@Entry\n@Component\nstruct Index {\n  @State\n  count: number = 10\n\n  build() {\n    Column() {\n      Text(this.count.toString())\n        .width(100)\n        .height(50)\n        .margin({ bottom: 10 })\n        .textAlign(TextAlign.Center)\n        .sameStyle()\n\n      Button('+1')\n        .sameStyle()\n    }\n    .height('100%')\n    .width('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\n2ï¼‰ç»„ä»¶å†…\n\n@Entry\n@Component\nstruct Index {\n  @State\n  count: number = 10\n\n  // ä¸éœ€è¦ `function` å…³é”®å­—ï¼Œè¦†ç›–å…¨å±€\n  @Styles\n  sameStyle (){\n    .backgroundColor(Color.Pink)\n    .onClick(() => {\n      this.count += 10\n    })\n  }\n\n  build() {\n    Column() {\n      Text(this.count.toString())\n        .width(100)\n        .height(50)\n        .margin({ bottom: 10 })\n        .textAlign(TextAlign.Center)\n        .sameStyle()\n\n      Button('+1')\n        .sameStyle()\n    }\n    .height('100%')\n    .width('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\nðŸ“•ðŸ“•ðŸ“• ç»ƒä¹ æ¡ˆä¾‹-ç™»å½•è¡¨å•-æ ·å¼ä¼˜åŒ–\n\n\n@Entry\n@Component\nstruct Index {\n\n  @State\n  mobile: string = ''\n  @State\n  code: string = ''\n\n\n  @Styles\n  inputStyle () {\n    .border({ width: 1, color: Color.Gray })\n    .layoutWeight(1)\n    .margin({ left: 10, bottom: 10, top: 10 })\n    .backgroundColor(Color.White)\n  }\n\n  build() {\n    Column(){\n      Row(){\n        Text('æ‰‹æœºå·')\n        TextInput({ text: this.mobile })\n          .inputStyle()\n          .onChange((value)=>this.mobile = value)\n      }\n      Row(){\n        Text('éªŒè¯ç ')\n        TextInput({ text: this.code })\n          .inputStyle()\n          .onChange((value)=>this.code = value)\n      }\n      Row({ space: 15 }){\n        Button('é‡ç½®')\n          .backgroundColor('#ccc')\n          .onClick(()=>{\n            this.mobile = ''\n            this.code = ''\n          })\n        Button('ç™»å½•')\n          .onClick(()=>{\n            if (this.mobile && this.code) {\n              promptAction.showToast({ message: `${this.mobile} ç™»å½•æˆåŠŸ` })\n            } else {\n              promptAction.showToast({ message: `è¯·è¾“å…¥æ‰‹æœºå·æˆ–éªŒè¯ç ` })\n            }\n          })\n      }\n    }\n    .padding({ left: 15, right: 15 })\n  }\n}\n\n\n\n3. æ ·å¼-@Extends å¤ç”¨#\n\n> @Extend ç”¨äºŽæ‰©å±•åŽŸç”Ÿç»„ä»¶æ ·å¼ï¼Œé€šè¿‡ä¼ å‚æä¾›æ›´çµæ´»çš„æ ·å¼å¤ç”¨\n\n * ä½¿ç”¨ @Extend è£…é¥°å™¨ä¿®é¥°çš„å‡½æ•°åªèƒ½æ˜¯ å…¨å±€\n * å‡½æ•°å¯ä»¥è¿›è¡Œ ä¼ å‚ï¼Œå¦‚æžœå‚æ•°æ˜¯çŠ¶æ€å˜é‡ï¼ŒçŠ¶æ€æ›´æ–°åŽä¼šåˆ·æ–°UI\n * ä¸”å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®žçŽ°å¤ç”¨äº‹ä»¶ä¸”å¯å¤„ç†ä¸åŒé€»è¾‘\n\n// å…¨å±€  åŽŸç”Ÿç»„ä»¶                     å‚æ•°\n//  â†“     â†“                          â†“ \n@Extend(Text) function functionName(w: number) { \n  .width(w)\n}\n\n\néœ€æ±‚ï¼šæŠŠ Text æ”¹æˆæŒ‰é’®æ ·å¼ï¼Œä¸”ç»‘å®š click äº‹ä»¶æ‰§è¡Œä¸åŒé€»è¾‘\n\n\n\n@Extend(Text) function myClick(color: string, cb: () => void) {\n  .backgroundColor(color)\n  .width(100)\n  .height(50)\n  .textAlign(TextAlign.Center)\n  .borderRadius(25)\n  .onClick(() => cb())\n}\n\n@Entry\n@Component\nstruct Other {\n  @State\n  color: string = '#ccc'\n\n  build() {\n    Column({ space: 20 }) {\n      Text('Text1')\n        .myClick(this.color, () => {\n          this.color = '#069'\n        })\n      Text('Text2')\n        .myClick('green', () => {\n          promptAction.showToast({ message: 'åšå…¶ä»–äº‹~' })\n        })\n    }\n    .width('100%')\n    .height('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\n\n4. æ ·å¼-å¤šæ€#\n\n> stateStyles() å¯ä»¥ä¾æ®ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€çš„ä¸åŒï¼Œå¿«é€Ÿè®¾ç½®ä¸åŒæ ·å¼ã€‚\n\nstateStyles æ˜¯å±žæ€§æ–¹æ³•ï¼Œå¯ä»¥æ ¹æ®UIå†…éƒ¨çŠ¶æ€æ¥è®¾ç½®æ ·å¼ï¼Œç±»ä¼¼äºŽ css ä¼ªç±»ï¼Œä½†è¯­æ³•ä¸åŒã€‚ArkUI æä¾›ä»¥ä¸‹å››ç§çŠ¶æ€ï¼š\n\n * focusedï¼šèŽ·ç„¦æ€ã€‚\n\n * normalï¼šæ­£å¸¸æ€ã€‚\n\n * pressedï¼šæŒ‰åŽ‹æ€ã€‚\n\n * disabledï¼šä¸å¯ç”¨æ€ã€‚\n\n\n\n// èƒ¶å›ŠæŒ‰é’®\n@Extend(Text)\nfunction capsule(){\n  .height(40)\n  .borderRadius(20)\n  .backgroundColor(Color.Gray)\n  .padding({ left: 15, right: 15 })\n  .margin({ bottom: 15 })\n}\n\n@Entry\n@Component\nstruct Index {\n  @State\n  disabled: boolean = false\n  @State\n  focused: boolean = false\n\n  build() {\n    Column() {\n\n      // Button TextInput é»˜è®¤å¼€å¯èŽ·å–ç„¦ç‚¹ï¼Œé¡µé¢ä¸­é»˜è®¤ç¬¬ä¸€ä¸ªè¿™æ ·çš„å…ƒç´ èŽ·å–ç„¦ç‚¹\n      // Button æ¯”è¾ƒå¤šé™åˆ¶ï¼Œä¸€ä¸ªæ˜¯é»˜è®¤å¼€å¯èŽ·å–ç„¦ç‚¹èƒ½çœ‹ï¼ŒäºŒæ˜¯ç¦ç”¨çŠ¶æ€ä¸‹æ ·å¼æ— æ³•ä¿®æ”¹\n      // Button('Button').focusable(false)\n\n      Text('toggle disabledï¼š' + this.disabled)\n        .capsule()\n        .onClick(()=>{\n          this.disabled = !this.disabled\n        })\n      Text('toggle focusedï¼š' + this.focused)\n        .capsule()\n        .onClick(()=>{\n          this.focused = !this.focused\n        })\n      Text('clickMe')\n        .capsule()\n        .enabled(!this.disabled)\n        .focusable(this.focused)\n        .onClick(() => {\n          promptAction.showToast({ message: 'click' })\n        })\n        .fontColor('#fff')\n        .stateStyles({\n          normal: {\n            .backgroundColor(Color.Blue)\n          },\n          focused: {\n            .backgroundColor(Color.Red)\n          },\n          disabled: {\n            .backgroundColor(Color.Black)\n          },\n          pressed: {\n            .backgroundColor(Color.Orange)\n          }\n        })\n    }\n  }\n}\n\n\nTIP\n * ä½¿ç”¨æ¯”è¾ƒå¤šçš„åº”è¯¥æ˜¯ normal pressed ç»“åˆä¸‹çš„æŒ‰åŽ‹æ•ˆæžœ\n * enabled(true|false) å¼€å¯|ç¦ç”¨ focusable(true|false) å¼€å¯èŽ·å–ç„¦ç‚¹èƒ½åŠ›|å…³é—­\n\næ³¨æ„ï¼š\n\n * é¡µé¢åˆå§‹åŒ–çš„æ—¶å€™ï¼Œé»˜è®¤ç¬¬ä¸€ä¸ªèƒ½èŽ·å–ç„¦ç‚¹çš„å…ƒç´ ï¼Œä¼šè‡ªåŠ¨èŽ·å–ç„¦ç‚¹\n\n\nç»„ä»¶çŠ¶æ€#\n\n\n1. çŠ¶æ€-classè¯­æ³•#\n\n> åœ¨é¸¿è’™å¼€å‘ä¸­å…³äºŽå¯¹è±¡çŠ¶æ€èŒƒå¼é‡‡ç”¨ class æ–¹å¼ï¼ŒåŽç»­ç»„ä»¶ä¼ å€¼é‡åˆ°æ·±å±‚å¯¹è±¡åµŒå¥—éœ€è¦åˆ©ç”¨ class\n\n1ï¼‰class åˆ›å»ºå¯¹è±¡å’Œ class ç±»åž‹\n\nclass Person {\n  age: number;\n  name: string;\n\n  constructor(name: string, age: number) {\n    this.name = name\n    this.age = age\n  }\n}\n\n// å½“ç±»åž‹ä½¿ç”¨å’Œæž„å½“é€ å‡½æ•°ä½¿ç”¨\nconst p: Person = new Person('jack', 18)\n// å½“ç±»åž‹ä½¿ç”¨è¿™ç§ä½¿ç”¨åŽç»­å±…å¤šï¼Œæˆ‘ä»¬ä½¿ç”¨å­—é¢é‡å¯¹è±¡å±…å¤šï¼Œå¯ä»¥çœç•¥ constructor\nconst p1: Person = {\n  name: 'tom',\n  age: 20\n}\n\n\n2ï¼‰implements å®žçŽ° interface æŽ¥å£\n\ninterface IPerson {\n  name: string,\n  age: number,\n  say: () => void\n}\n\n// å®žçŽ° IPerson æŽ¥å£ï¼Œéœ€è¦ç¬¦åˆæŽ¥å£çº¦å®š\nclass Person implements IPerson{\n  age: number;\n  name: string;\n\n  constructor(name: string, age: number) {\n    this.name = name\n    this.age = age\n  }\n\n  say () {\n    promptAction.showToast({ message: this.name })\n  }\n}\n\n\n3ï¼‰extends ç»§æ‰¿\n\nclass HmPerson extends Person {\n  github: string = 'https://github.com/zhousg'\n\n  coding () {\n    promptAction.showToast({ message: this.name + ': coding' })\n  }\n}\n\n\nTIP\n * å®šä¹‰ç±» class ç±»å { å±žæ€§ + æž„é€ å™¨ + æ–¹æ³• }ï¼Œç±»å¯ä»¥åˆ›å»ºå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥å½“ç±»åž‹ä½¿ç”¨ã€‚\n\næ‰©å±•ï¼š\n\n * class å¯ä»¥å®žçŽ° implements æŽ¥å£ï¼Œéœ€è¦å—åˆ°æŽ¥å£çº¦æŸ\n * class å¯ä»¥ç»§æ‰¿ extends å¦å¤–ä¸€ä¸ªclassçš„å±žæ€§å’Œæ–¹æ³•\n\n\n2. çŠ¶æ€-å¤æ‚çŠ¶æ€#\n\n> å½“è£…é¥°çš„æ•°æ®ç±»åž‹ä¸ºclassæˆ–è€…Objectæ—¶ï¼Œå¯ä»¥è§‚å¯Ÿåˆ°è‡ªèº«çš„èµ‹å€¼çš„å˜åŒ–ï¼Œå’Œå…¶å±žæ€§èµ‹å€¼çš„å˜åŒ–ï¼Œå³Object.keys(observedObject)è¿”å›ž\n> çš„æ‰€æœ‰å±žæ€§ã€‚\n\n1ï¼‰å¯¹è±¡ç±»åž‹çŠ¶æ€\n\n// å¯¹è±¡æ¨¡åž‹\nclass User {\n  nickname: string\n  age: number\n}\n\n@Entry\n@Component\nstruct Index {\n\n  @State\n  user: User = { nickname: 'jack', age: 18 }\n\n  build() {\n    Column({ space: 20 }){\n      Text(this.user.nickname)\n      Text(this.user.age.toString())\n      Button('age++')\n        .onClick(() => {\n          this.user.age ++\n        })\n    }\n    .width('100%')\n    .height('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\n2ï¼‰åµŒå¥—å¯¹è±¡ç±»åž‹çŠ¶æ€\n\n// å¯¹è±¡æ¨¡åž‹\nclass User {\n  nickname: string\n  age: number\n}\n\nclass UserData {\n  code: number\n  message: string\n  // åµŒå¥—å¯¹è±¡\n  data: User\n}\n\n@Entry\n@Component\nstruct Index {\n  @State\n  res: UserData = {\n    code: 10000,\n    message: 'èŽ·å–ç”¨æˆ·ä¿¡æ¯æˆåŠŸ',\n    // åµŒå¥—å¯¹è±¡\n    data: { nickname: 'jack', age: 18 }\n  }\n\n  build() {\n    Column({ space: 20 }) {\n      Text(this.res.data.nickname)\n      Text(this.res.data.age.toString())\n      Button('age++')\n        .onClick(() => {\n          // âŒ this.res.data.age ++\n          const user = this.res.data\n          // æ›¿æ¢å±žæ€§ï¼Œè§¦å‘UIæ›´æ–°\n          this.res.data = { ...user, age: user.age + 1 }\n        })\n    }\n    .width('100%')\n    .height('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\n3ï¼‰å¯¹è±¡æ•°ç»„ç±»åž‹çŠ¶æ€\n\n// å¯¹è±¡æ¨¡åž‹\nclass User {\n  nickname: string\n  age: number\n}\n\n@Entry\n@Component\nstruct Index {\n  @State\n  list: User[] = [\n    { nickname: 'jack', age: 18 },\n    { nickname: 'tom', age: 16 }\n  ]\n  build() {\n    Column({ space: 20 }) {\n      Text(JSON.stringify(this.list[0]))\n      Text(JSON.stringify(this.list[1]))\n      Button('age++')\n        .onClick(() => {\n          // âŒ this.list[1].age ++\n          const user = this.list[1]\n          this.list[1] = { ...user, age: user.age + 1 }\n        })\n    }\n    .width('100%')\n    .height('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\nTIP\n * ä½¿ç”¨ class æ¥çº¦æŸå¯¹è±¡ç±»åž‹ï¼Œå’ŒåµŒå¥—å¯¹è±¡å’Œå¯¹è±¡æ•°ç»„ã€‚\n * åµŒå¥—å¯¹è±¡å’Œå¯¹è±¡æ•°ç»„ï¼Œé‡‡ç”¨èµ‹å€¼çš„æ–¹å¼è¿›è¡Œæ›´æ–°ï¼Œå¯ä»¥æ›´æ–°UIã€‚\n * ðŸš¦ åŽæœŸå¦‚æžœå­¦ä¹ ç»„ä»¶ä¼ å€¼ï¼Œä¼šç»™å¤§å®¶è¡¥å……å¦å¤–ä¸€ç§æ·±å±‚æ•°æ®å˜æ›´æ›´æ–°UIçš„æ–¹å¼\n\n\nç•Œé¢æ¸²æŸ“#\n\n\n1. æ¸²æŸ“-æ¡ä»¶æ¸²æŸ“#\n\n> æ¡ä»¶æ¸²æŸ“å¯æ ¹æ®åº”ç”¨çš„ä¸åŒçŠ¶æ€ï¼Œä½¿ç”¨ifã€elseå’Œelse ifæ¸²æŸ“å¯¹åº”çŠ¶æ€ä¸‹çš„UIå†…å®¹ã€‚\n\n * æ¡ä»¶æ¸²æŸ“ï¼Œæ˜¯æ ¹æ®çŠ¶æ€æ•°æ®è¿›è¡Œåˆ¤æ–­å±•ç¤ºä¸åŒUI\n * æ¡ä»¶æ¸²æŸ“ï¼Œæ˜¯ä¼šé”€æ¯å’Œåˆ›å»ºç»„ä»¶ï¼Œç»„ä»¶çŠ¶æ€å°†ä¸ä¼šä¿ç•™\n\n1ï¼‰ä½¿ç”¨ if else å®žçŽ° loading æ•ˆæžœ\n\n@Entry\n@Component\nstruct Index {\n\n  @State\n  loading: boolean = false\n\n  build() {\n    Column({ space: 20 }){\n      if (this.loading) {\n        LoadingProgress()\n          .width(100)\n          .height(100)\n      } else  {\n        Text('åŽå°æ•°æ®')\n        Text('åŽå°æ•°æ®')\n        Text('åŽå°æ•°æ®')\n      }\n      Button('æ›´æ–°æ•°æ®')\n        .onClick(() => {\n          this.loading = true\n          setTimeout(() => {\n            this.loading = false\n          }, 2000)\n        })\n    }\n    .width('100%')\n    .height('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\n2ï¼‰æ·»åŠ æ¸²æŸ“ä¼šé”€æ¯å’Œé‡æ–°åˆ›å»ºç»„ä»¶ï¼Œç»„ä»¶çŠ¶æ€å°†ä¸ä¼šä¿ç•™ã€‚\n\n@Component\nstruct CounterComp {\n  @State\n  count: number = 0\n\n  build() {\n    Text(this.count.toString())\n      .onClick(() => {\n        this.count ++\n      })\n  }\n}\n\n@Entry\n@Component\nstruct Index {\n\n  @State\n  show: boolean = true\n\n  build() {\n    Column({ space: 20 }){\n      if (this.show) {\n        // ç´¯è®¡çš„ count åˆ‡æ¢æ—¶å€™ä¸ä¼šä¿ç•™\n        CounterComp()\n      }\n      Button('toggle')\n        .onClick(() => {\n          this.show = !this.show\n        })\n    }\n    .width('100%')\n    .height('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\n\n2. æ¸²æŸ“-å¾ªçŽ¯æ¸²æŸ“#\n\n> ForEach æŽ¥å£åŸºäºŽæ•°ç»„ç±»åž‹æ•°æ®æ¥è¿›è¡Œå¾ªçŽ¯æ¸²æŸ“ï¼Œéœ€è¦ä¸Žå®¹å™¨ç»„ä»¶é…åˆä½¿ç”¨ã€‚\n\nè¯­æ³•ï¼š\n\nForEach(\n  // æ•°æ®æº\n  arr: Array,\n  // ç»„ä»¶ç”Ÿæˆå‡½æ•°\n  itemGenerator: (item: Array, index?: number) => void,\n  // é”®å€¼ç”Ÿæˆå‡½æ•°\n  keyGenerator?: (item: Array, index?: number): string => string\n)\n\n\nåº”ç”¨ï¼š\n\nclass User {\n  id: string\n  name: string\n  age: number\n}\n\n\n@Entry\n@Component\nstruct Index {\n  @State\n  userList: User[] = []\n\n  build() {\n    Scroll() {\n      Column({ space: 20 }) {\n        // å¾ªçŽ¯æ¸²æŸ“\n        ForEach(\n          // 1. æ•°æ®æº\n          this.userList,\n          // 2. ç»„ä»¶ç”Ÿæˆå‡½æ•°\n          (item: User) => {\n            // å†…å®¹\n            Text(`${item.name} ä»Šå¹´ ${item.age} å²`)\n          },\n          // 3. é”®å€¼ç”Ÿæˆå‡½æ•°\n          item => item.id\n        )\n        Button('åŠ è½½æ›´å¤š')\n          .onClick(() => {\n            const arr: User[] = []\n            for (let index = 0; index < 10; index++) {\n              arr.push({ id: Math.random().toString(), name: 'jack', age: Math.ceil(Math.random() * 100) })\n            }\n            this.userList.push(...arr)\n          })\n      }\n    }\n    .width('100%')\n  }\n}\n\n\nTIP\n\nå…³äºŽ keyGenerator é”®ç”Ÿæˆå‡½æ•°çš„ä¸€äº›å»ºè®®ï¼š\n\n * ä¸èƒ½ç¼ºçœ\n * é¿å…æœ€ç»ˆç”Ÿæˆçš„é”®åŒ…å« index\n * å¯¹è±¡æ•°ç»„ï¼Œå»ºè®®ä½¿ç”¨å¯¹è±¡ä¸­ id å”¯ä¸€æ ‡è¯†\n * åŸºæœ¬æ•°æ®æ•°å­—ï¼Œå»ºè®®è½¬æ¢æˆå…·æœ‰ id å”¯ä¸€æ ‡è¯†çš„å¯¹è±¡ï¼Œå†ä½¿ç”¨","frontmatter":{"title":"HM - é¸¿è’™-ç»„ä»¶åŸºç¡€"},"version":""},{"id":2,"title":"HM - é¸¿è’™-ç¾Žå›¢å¤–å–","routePath":"/interview-handbook-project/guide/meituan","lang":"","toc":[{"text":"é˜¶æ®µæ¡ˆä¾‹-ç¾Žå›¢å¤–å–","id":"é˜¶æ®µæ¡ˆä¾‹-ç¾Žå›¢å¤–å–","depth":2,"charIndex":3},{"text":"1. é¡µé¢ç»“æž„-å…¥å£é¡µé¢","id":"1-é¡µé¢ç»“æž„-å…¥å£é¡µé¢","depth":3,"charIndex":34},{"text":"2. é¡µé¢ç»“æž„-åº•éƒ¨ç»„ä»¶","id":"2-é¡µé¢ç»“æž„-åº•éƒ¨ç»„ä»¶","depth":3,"charIndex":393},{"text":"3. é¡µé¢ç»“æž„-å¯¼èˆªç»„ä»¶","id":"3-é¡µé¢ç»“æž„-å¯¼èˆªç»„ä»¶","depth":3,"charIndex":1706},{"text":"4. é¡µé¢ç»“æž„-å•†å“èœå•å’Œå•†å“åˆ—è¡¨","id":"4-é¡µé¢ç»“æž„-å•†å“èœå•å’Œå•†å“åˆ—è¡¨","depth":3,"charIndex":2994},{"text":"5. ä¸šåŠ¡é€»è¾‘-æ¸²æŸ“å•†å“èœå•å’Œåˆ—è¡¨","id":"5-ä¸šåŠ¡é€»è¾‘-æ¸²æŸ“å•†å“èœå•å’Œåˆ—è¡¨","depth":3,"charIndex":5332},{"text":"6. é¡µé¢ç»“æž„-è´­ç‰©è½¦","id":"6-é¡µé¢ç»“æž„-è´­ç‰©è½¦","depth":3,"charIndex":8971},{"text":"7. ä¸šåŠ¡é€»è¾‘-åŠ å…¥è´­ç‰©è½¦","id":"7-ä¸šåŠ¡é€»è¾‘-åŠ å…¥è´­ç‰©è½¦","depth":3,"charIndex":11526},{"text":"8. ä¸šåŠ¡é€»è¾‘-è´­ç‰©è½¦ç®¡ç†","id":"8-ä¸šåŠ¡é€»è¾‘-è´­ç‰©è½¦ç®¡ç†","depth":3,"charIndex":13014}],"domain":"","content":"#\n\n\né˜¶æ®µæ¡ˆä¾‹-ç¾Žå›¢å¤–å–#\n\nå•†å“é¡µ   è´­ç‰©è½¦\n      \n\n\n1. é¡µé¢ç»“æž„-å…¥å£é¡µé¢#\n\n\n\n\n\n\n@Entry\n@Component\nstruct Index {\n\n  @State\n  showCart: boolean = false\n\n  build() {\n    Stack({ alignContent: Alignment.Bottom }) {\n      Column() {\n        Nav()\n        MenuWrapper()\n      }\n      .width('100%')\n      .height('100%')\n      if (this.showCart) {\n        Cart()\n      }\n      Footer({ showCart: $showCart })\n    }\n  }\n}\n\n\n\n2. é¡µé¢ç»“æž„-åº•éƒ¨ç»„ä»¶#\n\n@Component\nexport struct Footer {\n  @Link\n  showCart: boolean\n\n  build() {\n    Row() {\n      Row() {\n        Badge({\n          value: '0',\n          position: BadgePosition.Right,\n          style: { badgeSize: 18 }\n        }) {\n          Image('https://zqran.gitee.io/images/waimai/cart-2.png')\n            .width(47)\n            .height(69)\n            .position({ y: -19 })\n        }\n        .width(50)\n        .height(50)\n        .margin({ left: 25, right: 10 })\n        .onClick(() => {\n          this.showCart = !this.showCart\n        })\n\n        Column() {\n          Text() {\n            Span('Â¥')\n              .fontColor('#fff')\n              .fontSize(12)\n            Span('0.00')\n              .fontColor('#fff')\n              .fontSize(24)\n          }\n\n          Text('é¢„ä¼°å¦éœ€é…é€è´¹ Â¥5')\n            .fontSize(12)\n            .fontColor('#999')\n        }\n        .layoutWeight(1)\n        .alignItems(HorizontalAlign.Start)\n\n        Text('åŽ»ç»“ç®—')\n          .backgroundColor('#f8c74e')\n          .alignSelf(ItemAlign.Stretch)\n          .padding(15)\n          .borderRadius({\n            topRight: 25,\n            bottomRight: 25\n          })\n      }\n      .height(50)\n      .layoutWeight(1)\n      .backgroundColor('#222426')\n      .borderRadius(25)\n    }\n    .padding(15)\n    .height(80)\n  }\n}\n\n\n\n3. é¡µé¢ç»“æž„-å¯¼èˆªç»„ä»¶#\n\n@Component\nexport struct Nav {\n  @Builder\n  NavItem(active: boolean, title: string, subTitle?: string) {\n    Column() {\n      Text() {\n        Span(title)\n        if (subTitle) {\n          Span(' ' + subTitle)\n            .fontSize(10)\n            .fontColor(active ? '#000' : '#666')\n        }\n      }.layoutWeight(1)\n      .fontColor(active ? '#000' : '#666')\n      .fontWeight(active ? FontWeight.Bold : FontWeight.Normal)\n\n      Text()\n        .height(1)\n        .width(20)\n        .margin({ left: 6 })\n        .backgroundColor(active ? '#fa0' : 'transparent')\n    }\n    .width(73)\n    .alignItems(HorizontalAlign.Start)\n    .padding({ top: 3 })\n  }\n\n  build() {\n    Row() {\n      this.NavItem(true, 'ç‚¹èœ')\n      this.NavItem(false, 'è¯„ä»·', '1796')\n      this.NavItem(false, 'å•†å®¶')\n\n      Row() {\n        Image($r('app.media.ic_public_input_search'))\n          .width(14)\n          .aspectRatio(1)\n          .fillColor('#999')\n        Text('è¯·è¾“å…¥èœå“åç§°')\n          .fontSize(12)\n          .fontColor('#999')\n      }\n      .backgroundColor('#eee')\n      .height(25)\n      .borderRadius(13)\n      .padding({ left: 5, right: 5 })\n      .layoutWeight(1)\n    }\n    .padding({ left: 15, right: 15 })\n    .height(40)\n    .border({ width: { bottom: 0.5 }, color: '#e4e4e4' })\n  }\n}\n\n\n\n4. é¡µé¢ç»“æž„-å•†å“èœå•å’Œå•†å“åˆ—è¡¨#\n\n\n\n\n@Component\nexport struct MenuWrapper {\n  list: string[] = ['ä¸€äººå¥—é¤', 'ç‰¹è‰²çƒ§çƒ¤', 'æ‚ç²®ä¸»é£Ÿ']\n  @State\n  activeIndex: number = 0\n\n  build() {\n    Row() {\n      Column() {\n        ForEach(this.list, (item: string, index: number) => {\n          Text(item)\n            .height(50)\n            .width('100%')\n            .textAlign(TextAlign.Center)\n            .fontSize(14)\n            .backgroundColor(this.activeIndex === index ? '#fff' : '#f5f5f5')\n            .onClick(() => {\n              this.activeIndex = index\n            })\n        })\n      }\n      .width(90)\n\n      List() {\n        ListItem(){\n          MenuWrapperItem()\n        }\n      }\n      .layoutWeight(1)\n      .height('100%')\n      .backgroundColor('#fff')\n    }\n    .layoutWeight(1)\n    .alignItems(VerticalAlign.Top)\n    .backgroundColor('#f5f5f5')\n  }\n}\n\n\n\n\n@Component\nexport struct MenuWrapperItem {\n  build() {\n    Row() {\n      Image('https://zqran.gitee.io/images/waimai/8078956697.jpg')\n        .width(90)\n        .aspectRatio(1)\n      Column({ space: 5 }) {\n        Text('å°ä»½é…¸æ±¤èŽœé¢é±¼é±¼+è‚‰å¤¹é¦å¥—é¤')\n          .textOverflow({\n            overflow: TextOverflow.Ellipsis,\n          })\n          .maxLines(2)\n          .fontWeight(600)\n        Text('é…¸æ±¤èŽœé¢é±¼é±¼ï¼Œä¸»æ–™ï¼šé…¸æ±¤ã€èŽœé¢ è‚‰å¤¹é¦ï¼Œä¸»æ–™ï¼šç™½çš®é¥¼ã€çŒªè‚‰')\n          .textOverflow({\n            overflow: TextOverflow.Ellipsis,\n          })\n          .maxLines(1)\n          .fontSize(12)\n          .fontColor('#333')\n        Text('ç‚¹è¯„ç½‘å‹æŽ¨è')\n          .fontSize(10)\n          .backgroundColor('#fff5e2')\n          .fontColor('#ff8000')\n          .padding({ top: 2, bottom: 2, right: 5, left: 5 })\n          .borderRadius(2)\n        Text() {\n          Span('æœˆé”€å”®40')\n          Span(' ')\n          Span('å¥½è¯„åº¦100%')\n        }\n        .fontSize(12)\n        .fontColor('#999')\n\n        Row() {\n          Text() {\n            Span('Â¥ ')\n              .fontColor('#ff8000')\n              .fontSize(10)\n            Span('34.23')\n              .fontColor('#ff8000')\n              .fontWeight(FontWeight.Bold)\n          }\n\n          CalcBtn({ icon: $r('app.media.ic_public_add_filled') })\n        }\n        .justifyContent(FlexAlign.SpaceBetween)\n        .width('100%')\n      }\n      .layoutWeight(1)\n      .alignItems(HorizontalAlign.Start)\n      .padding({ left: 10, right: 10 })\n    }\n    .padding(10)\n    .alignItems(VerticalAlign.Top)\n  }\n}\n\n\n\n5. ä¸šåŠ¡é€»è¾‘-æ¸²æŸ“å•†å“èœå•å’Œåˆ—è¡¨#\n\n1ï¼‰å®šä¹‰ model æ•°æ®æ¨¡åž‹\n\nexport class FoodItem {\n  id: number\n  name: string\n  like_ratio_desc: string\n  food_tag_list: string[]\n  price: number\n  picture: string\n  description: string\n  tag: string\n  month_saled: number\n}\n\nexport class Category {\n  tag: string\n  name: string\n  foods: FoodItem[]\n}\n\n\n2ï¼‰ä½¿ç”¨ http å‘é€è¯·æ±‚ï¼ŒèŽ·å–æ•°æ®\n\n\n\n\n\n\n\n\nconst req = http.createHttp()\n\n@Entry\n@Component\nstruct Index {\n  @State\n  showCart: boolean = false\n\n  @State\n  categoryList: Category[] = []\n\n  aboutToAppear() {\n    req.request('http://172.16.39.26:3000/takeaway')\n      .then(res => {\n        const data = JSON.parse(res.result as string) as Category[]\n        this.categoryList = data\n      })\n      .catch(err => {\n        console.error('MEITU', err.message)\n      })\n  }\n\n  build() {\n    Stack({ alignContent: Alignment.Bottom }) {\n      Column() {\n        Nav()\n        MenuWrapper({ categoryList: $categoryList })\n      }\n      .width('100%')\n      .height('100%')\n\n      if (this.showCart) {\n        Cart()\n      }\n      Footer({ showCart: $showCart })\n    }\n  }\n}\n\n\n3ï¼‰ä¼ å…¥åˆ—è¡¨æ•°æ®ç»™ï¼Œå•†å“èœå•ç»„ä»¶ï¼Œè¿›è¡Œæ¸²æŸ“\n\n\n\n\n@Component\nexport struct MenuWrapper {\n  @Link\n  categoryList: Category[]\n  @State\n  activeIndex: number = 0\n\n  build() {\n    Row() {\n      Column() {\n        ForEach(this.categoryList, (item: Category, index: number) => {\n          Text(item.name)\n            .height(50)\n            .width('100%')\n            .textAlign(TextAlign.Center)\n            .fontSize(14)\n            .backgroundColor(this.activeIndex === index ? '#fff' : '#f5f5f5')\n            .onClick(() => {\n              this.activeIndex = index\n            })\n        })\n      }\n      .width(90)\n\n      List() {\n        ForEach(this.categoryList[this.activeIndex]?.foods, (item: FoodItem) => {\n          ListItem() {\n            MenuWrapperItem({ food: item })\n          }\n        })\n      }\n      .layoutWeight(1)\n      .height('100%')\n      .backgroundColor('#fff')\n    }\n    .layoutWeight(1)\n    .alignItems(VerticalAlign.Top)\n    .backgroundColor('#f5f5f5')\n  }\n}\n\n\n\n\n\n@Component\nexport struct MenuWrapperItem {\n\n  @ObjectLink\n  food: FoodItem\n\n  build() {\n    Row() {\n      Image(this.food.picture)\n        .width(90)\n        .aspectRatio(1)\n      Column({ space: 5 }) {\n        Text(this.food.name)\n          .textOverflow({\n            overflow: TextOverflow.Ellipsis,\n          })\n          .maxLines(2)\n          .fontWeight(600)\n        Text(this.food.description)\n          .textOverflow({\n            overflow: TextOverflow.Ellipsis,\n          })\n          .maxLines(1)\n          .fontSize(12)\n          .fontColor('#333')\n        ForEach(this.food.food_tag_list, (tag) => {\n          Text(tag)\n            .fontSize(10)\n            .backgroundColor('#fff5e2')\n            .fontColor('#ff8000')\n            .padding({ top: 2, bottom: 2, right: 5, left: 5 })\n            .borderRadius(2)\n        })\n        Text() {\n          Span('æœˆé”€å”®'+this.food.month_saled)\n          Span(' ')\n          Span(this.food.like_ratio_desc)\n        }\n        .fontSize(12)\n        .fontColor('#999')\n\n        Row() {\n          Text() {\n            Span('Â¥ ')\n              .fontColor('#ff8000')\n              .fontSize(10)\n            Span(this.food.price.toFixed(2))\n              .fontColor('#ff8000')\n              .fontWeight(FontWeight.Bold)\n          }\n\n          CalcBtn({ icon: $r('app.media.ic_public_add_filled') })\n        }\n        .justifyContent(FlexAlign.SpaceBetween)\n        .width('100%')\n      }\n      .layoutWeight(1)\n      .alignItems(HorizontalAlign.Start)\n      .padding({ left: 10, right: 10 })\n    }\n    .padding(10)\n    .alignItems(VerticalAlign.Top)\n  }\n}\n\n\n\n6. é¡µé¢ç»“æž„-è´­ç‰©è½¦#\n\n * æŠ½å–è®¡ç®—æ¡ˆä¾‹ç»„ä»¶\n * æ­å»ºè´­ç‰©è½¦é¡µé¢\n\n@Component\nexport struct CalcBtn {\n\n  icon: Resource\n\n  plain?: boolean\n\n  build() {\n    Row() {\n      Image(this.icon)\n        .width(10)\n        .aspectRatio(1)\n    }\n    .width(16)\n    .aspectRatio(1)\n    .backgroundColor(this.plain ? '#fff' : '#f8c74e')\n    .border(this.plain ? { width: 0.5 , color: '#f8c74e'}: {})\n    .borderRadius(4)\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\n\n@Component\nexport struct Cart {\n  build() {\n    Column(){\n      Column(){\n        Row(){\n          Text('è´­ç‰©è½¦')\n            .fontSize(14)\n          Text('æ¸…ç©ºè´­ç‰©è½¦')\n            .fontSize(14)\n            .fontColor('#999')\n        }\n        .width('100%')\n        .height(40)\n        .justifyContent(FlexAlign.SpaceBetween)\n        .padding({ left: 15, right: 15 })\n        .border({ width: { bottom: 0.5 }, color: '#e4e4e4' })\n        // è´­ç‰©è½¦åˆ—è¡¨\n        List(){\n          ListItem(){\n            CartItem()\n          }\n          ListItem(){\n            CartItem()\n          }\n          ListItem(){\n            CartItem()\n          }\n        }\n        .divider({\n          strokeWidth: 0.5,\n          color: '#e4e4e4'\n        })\n        .padding({ left: 15, right: 15 })\n      }\n      .width('100%')\n      .padding({ bottom: 100 })\n      .backgroundColor('#fff')\n      .borderRadius({\n        topLeft: 16,\n        topRight: 16\n      })\n    }\n    .height('100%')\n    .width('100%')\n    .backgroundColor('rgba(0,0,0,0.5)')\n    .justifyContent(FlexAlign.End)\n  }\n}\n\n\n\n@Component\nexport struct CartItem {\n  build() {\n    Row(){\n      Image('https://zqran.gitee.io/images/waimai/7384994864.jpg')\n        .width(60)\n        .aspectRatio(1)\n      Column({ space: 10 }){\n        Text('å°ä»½é…¸æ±¤èŽœé¢é±¼é±¼+è‚‰å¤¹é¦å¥—é¤')\n          .textOverflow({\n            overflow: TextOverflow.Ellipsis\n          })\n          .maxLines(2)\n        Row(){\n          Text(){\n            Span('Â¥ ')\n              .fontSize(10)\n              .fontColor('#ff8000')\n            Span('23.23')\n              .fontWeight(600)\n              .fontColor('#ff8000')\n          }\n\n          Row({ space: 10 }){\n            CalcBtn({ icon: $r('app.media.ic_screenshot_line'), plain: true })\n            Text('0')\n              .fontSize(14)\n            CalcBtn({ icon: $r('app.media.ic_public_add_filled') })\n          }\n        }\n        .width('100%')\n        .justifyContent(FlexAlign.SpaceBetween)\n      }\n      .layoutWeight(1)\n      .alignItems(HorizontalAlign.Start)\n      .padding({ left: 10 })\n    }\n    .padding({ top: 15, bottom: 15 })\n    .alignItems(VerticalAlign.Top)\n  }\n}\n\n\n\n7. ä¸šåŠ¡é€»è¾‘-åŠ å…¥è´­ç‰©è½¦#\n\n1ï¼‰è´­ç‰©è½¦æ•°æ®æ¨¡åž‹\n\nexport class CartItemModel {\n  id: number\n  name: string\n  price: number\n  picture: string\n  count: number\n}\n\n\n2ï¼‰è´­ç‰©è½¦æ·»åŠ é€»è¾‘\n\n\n\nexport const CART_KEY = 'CART_KEY'\n\nexport const getCart = () => {\n  return JSON.parse(AppStorage.Get(CART_KEY) || '[]') as CartItemModel[]\n}\n\nexport const addCart = (food: FoodItem) => {\n  const cart = getCart()\n  const f = cart.find(f => f.id === food.id)\n  if (f) {\n    f.count++\n  } else {\n    const { id, price, picture, name } = food\n    cart.unshift({\n      id,\n      price,\n      picture,\n      name,\n      count: 1\n    })\n  }\n  AppStorage.Set(CART_KEY, JSON.stringify(cart))\n}\n\n\n3ï¼‰è´­ç‰©è½¦çŠ¶æ€æŒä¹…åŒ–\n\n\n\n\nPersistentStorage.PersistProp(CART_KEY, '[]')\n\n\n4ï¼‰ç›‘å¬è´­ç‰©è½¦æ•°æ®å˜åŒ–ï¼Œè®¾ç½®è´­ç‰©è½¦çŠ¶æ€ï¼Œåº•éƒ¨ç»„ä»¶æ˜¾ç¤ºæ•°é‡å’Œæ€»ä»·\n\n  @StorageProp(CART_KEY)\n  @Watch('onUpdateCart')\n  cartJson: string = '[]'\n  @State\n  cart: CartItem[] = JSON.parse(this.cartJson)\n  onUpdateCart () {\n    this.cart = JSON.parse(this.cartJson)\n  }\n\n\nFooter({ showCart: $showCart, cart: $cart })\n\n\n@Link\ncart: CartItem[]\n\n  // ...\n          Badge({\n          value: this.cart.reduce((p, c) => p + c.count, 0) + '',\n          })\n\n  // ...\n          Span(this.cart.reduce((p, c) => p + (c.count * c.price * 100) / 100, 0).toFixed(2))\n          .fontColor('#fff')\n          .fontSize(24)\n\n\n\n5ï¼‰æ·»åŠ è´­ç‰©è½¦\n\n          CalcBtn({ icon: $r('app.media.ic_public_add_filled') })\n            .onClick(() => {\n              addCart(this.food)\n              promptAction.showToast({ message: 'æ·»åŠ è´­ç‰©è½¦æˆåŠŸ' })\n            })\n\n\n\n8. ä¸šåŠ¡é€»è¾‘-è´­ç‰©è½¦ç®¡ç†#\n\n1ï¼‰æ¸²æŸ“è´­ç‰©è½¦\n\n      if (this.showCart) {\n        Cart({ cart: $cart })\n      }\n\n\n@Component\nexport struct Cart {\n  @Link\n  cart: CartItemModel[]\n\n  // ...\n\n          List({ space: 30 }) {\n          ForEach(this.cart, (item:CartItemModel) => {\n            ListItem() {\n              CartItemComp({ item })\n            }\n          })\n        }\n\n\n\n\n\n@Component\nexport struct CartItem {\n\n  @ObjectLink\n  item: CartItemModel\n\n  build() {\n    Row() {\n      Image(this.item.picture)\n        .width(60)\n        .aspectRatio(1)\n        .borderRadius(8)\n      Column({ space: 5 }) {\n        Text(this.item.name)\n          .fontSize(14)\n          .textOverflow({\n            overflow: TextOverflow.Ellipsis\n          })\n          .maxLines(2)\n        Row() {\n          Text() {\n            Span('Â¥ ')\n              .fontColor('#ff8000')\n              .fontSize(10)\n            Span(this.item.price.toFixed(2))\n              .fontColor('#ff8000')\n              .fontWeight(FontWeight.Bold)\n          }\n\n          Row() {\n            CalcBtn({ icon: $r('app.media.ic_screenshot_line'), plain: true })\n            Text(this.item.count+'')\n              .padding(10)\n              .fontSize(12)\n            CalcBtn({ icon: $r('app.media.ic_public_add_filled') })\n          }\n        }\n        .justifyContent(FlexAlign.SpaceBetween)\n        .width('100%')\n      }\n      .layoutWeight(1)\n      .alignItems(HorizontalAlign.Start)\n      .padding({ left: 10, right: 10 })\n    }\n    .alignItems(VerticalAlign.Top)\n  }\n}\n\n\n2ï¼‰è´­ç‰©è½¦æ•°é‡ä¿®æ”¹\n\nexport const addCart = (food: FoodItem | CartItemModel) => { ... }\n\nexport const delCart = (id: number) => {\n  const cart = getCart()\n  const f = cart.find(f => f.id === id)\n  if (f && f.count > 0) {\n    f.count--\n  }\n  AppStorage.Set(CART_KEY, JSON.stringify(cart))\n}\n\n\n            CalcBtn({ icon: $r('app.media.ic_screenshot_line'), plain: true })\n              .onClick(() => {\n                delCart(this.item.id)\n              })\n            Text(this.item.count+'')\n              .padding(10)\n              .fontSize(12)\n            CalcBtn({ icon: $r('app.media.ic_public_add_filled') })\n              .onClick(()=>{\n                addCart(this.item)\n              })\n\n\n3ï¼‰æ¸…ç©ºè´­ç‰©è½¦\n\nexport const clearCart  = () => {\n  AppStorage.Set(CART_KEY, '[]')\n}\n\n\n          Text('æ¸…ç©ºè´­ç‰©è½¦')\n            .fontSize(12)\n            .fontColor('#999')\n            .onClick(() => {\n              clearCart()\n            })\n","frontmatter":{"title":"HM - é¸¿è’™-ç¾Žå›¢å¤–å–"},"version":""},{"id":3,"title":"HM - é¸¿è’™-åŽä¸ºé—¹é’Ÿ","routePath":"/interview-handbook-project/guide/naozhong","lang":"","toc":[{"text":"é˜¶æ®µæ¡ˆä¾‹-åŽä¸ºé—¹é’Ÿ","id":"é˜¶æ®µæ¡ˆä¾‹-åŽä¸ºé—¹é’Ÿ","depth":2,"charIndex":3},{"text":"1. é¡µé¢ç»“æž„-é¦–é¡µç»“æž„","id":"1-é¡µé¢ç»“æž„-é¦–é¡µç»“æž„","depth":3,"charIndex":32},{"text":"2. é¡µé¢ç»“æž„-ç»˜åˆ¶é—¹é’Ÿ","id":"2-é¡µé¢ç»“æž„-ç»˜åˆ¶é—¹é’Ÿ","depth":3,"charIndex":1104},{"text":"3. é¡µé¢ç»“æž„-ç»˜åˆ¶é—¹é’Ÿä»»åŠ¡åˆ—è¡¨","id":"3-é¡µé¢ç»“æž„-ç»˜åˆ¶é—¹é’Ÿä»»åŠ¡åˆ—è¡¨","depth":3,"charIndex":2900},{"text":"4. é¡µé¢ç»“æž„-è¯¦æƒ…é¡µ","id":"4-é¡µé¢ç»“æž„-è¯¦æƒ…é¡µ","depth":3,"charIndex":3675},{"text":"5. ä¸šåŠ¡é€»è¾‘-é¦–é€‰é¡¹å­˜å‚¨å·¥å…·","id":"5-ä¸šåŠ¡é€»è¾‘-é¦–é€‰é¡¹å­˜å‚¨å·¥å…·","depth":3,"charIndex":4918},{"text":"6. ä¸šåŠ¡é€»è¾‘-æ·»åŠ é—¹é’Ÿä»»åŠ¡","id":"6-ä¸šåŠ¡é€»è¾‘-æ·»åŠ é—¹é’Ÿä»»åŠ¡","depth":3,"charIndex":5750},{"text":"7. ä¸šåŠ¡é€»è¾‘-æ¸²æŸ“é—¹é’Ÿä»»åŠ¡åˆ—è¡¨","id":"7-ä¸šåŠ¡é€»è¾‘-æ¸²æŸ“é—¹é’Ÿä»»åŠ¡åˆ—è¡¨","depth":3,"charIndex":6767},{"text":"8. ä¸šåŠ¡é€»è¾‘-ä¿®æ”¹é—¹é“ƒä»»åŠ¡","id":"8-ä¸šåŠ¡é€»è¾‘-ä¿®æ”¹é—¹é“ƒä»»åŠ¡","depth":3,"charIndex":7778},{"text":"9. ä¸šåŠ¡é€»è¾‘-åˆ é™¤é—¹é’Ÿä»»åŠ¡","id":"9-ä¸šåŠ¡é€»è¾‘-åˆ é™¤é—¹é’Ÿä»»åŠ¡","depth":3,"charIndex":9030},{"text":"10. ä¸šåŠ¡é€»è¾‘-é€šçŸ¥å”¤èµ·åº”ç”¨å’Œå…³é—­å»¶æ—¶","id":"10-ä¸šåŠ¡é€»è¾‘-é€šçŸ¥å”¤èµ·åº”ç”¨å’Œå…³é—­å»¶æ—¶","depth":3,"charIndex":9826},{"text":"11. ä¸šåŠ¡é€»è¾‘-åœæ­¢å’Œå¼€å¯é—¹é’Ÿä»»åŠ¡","id":"11-ä¸šåŠ¡é€»è¾‘-åœæ­¢å’Œå¼€å¯é—¹é’Ÿä»»åŠ¡","depth":3,"charIndex":11590}],"domain":"","content":"#\n\n\né˜¶æ®µæ¡ˆä¾‹-åŽä¸ºé—¹é’Ÿ#\n\né¦–é¡µ   è¯¦æƒ…é¡µ\n     \n\n\n1. é¡µé¢ç»“æž„-é¦–é¡µç»“æž„#\n\n\n\n\n@Entry\n@Component\nstruct Index {\n  build() {\n    Stack({ alignContent: Alignment.Bottom }){\n      Column({ space: 15 }) {\n        Text('é—¹é’Ÿ')\n          .fontSize('24')\n          .width('100%')\n\n        CanvasComp()\n\n        ForEach([1, 2, 3], () => {\n          ClockItemComp()\n            .onClick(() => {\n              router.pushUrl({\n                url: 'pages/DetailPage',\n              })\n            })\n        })\n      }\n      .padding(15)\n      .height('100%')\n      .width('100%')\n      .backgroundColor('#f5f5f5')\n      // æ·»åŠ \n      Text('+')\n        .width(50)\n        .aspectRatio(1)\n        .backgroundColor('#06f')\n        .fontSize(40)\n        .fontWeight(100)\n        .fontColor('#fff')\n        .borderRadius(25)\n        .textAlign(TextAlign.Center)\n        .margin({ bottom: 50 })\n        .onClick(() => {\n          router.pushUrl({\n            url: 'pages/DetailPage',\n          })\n        })\n    }\n  }\n}\n\n\n@Component\nexport struct CanvasComp {\n  build() {\n    \n  }\n}\n\n\n@Component\nexport struct ClockItemComp {\n  build() {\n    \n  }\n}\n\n\n\n2. é¡µé¢ç»“æž„-ç»˜åˆ¶é—¹é’Ÿ#\n\n 1. ç»˜åˆ¶è¡¨ç›˜\n 2. ç»˜åˆ¶ æ—¶åˆ†ç§’ æŒ‡é’ˆ\n 3. èµ°èµ·æ¥\n\n@Component\nexport struct CanvasComp {\n  private settings = new RenderingContextSettings(true)\n  private context = new CanvasRenderingContext2D(this.settings)\n  private panImg = new ImageBitmap('/images/ic_clock_pan.png')\n  private hourImg = new ImageBitmap('/images/ic_hour_pointer.png')\n  private minuteImg = new ImageBitmap('/images/ic_minute_pointer.png')\n  private secondImg = new ImageBitmap('/images/ic_second_pointer.png')\n\n  // ç”»å¸ƒå°ºå¯¸\n  canvasSize = 252\n  // æŒ‡é’ˆå°ºå¯¸\n  pointerWidth = 8\n\n  startDraw() {\n    this.drawClock()\n    setInterval(() => {\n      this.drawClock()\n    }, 1000)\n  }\n\n  /**\n   * ç»˜åˆ¶é—¹é’Ÿ\n   */\n  drawClock() {\n    this.context.clearRect(0, 0, this.canvasSize, this.canvasSize)\n    this.context.drawImage(this.panImg, 0, 0, this.canvasSize, this.canvasSize)\n    // æ ¹æ®æ—¶é—´ç»˜åˆ¶æŒ‡é’ˆ\n    const date = new Date()\n    const hour = date.getHours()\n    const minute = date.getMinutes()\n    const second = date.getSeconds()\n    this.drawPointer(this.hourImg, hour % 12 * 360)\n    this.drawPointer(this.minuteImg, minute / 60 * 360)\n    this.drawPointer(this.secondImg, second / 60 * 360)\n  }\n\n  /**\n   * ç»˜åˆ¶æŒ‡é’ˆ\n   * @param img - æŒ‡é’ˆå›¾ç‰‡\n   * @param angle - æ—‹è½¬è§’åº¦ï¼Œèµ·ç‚¹æ˜¯ Y è½´ä¸Šæ–¹å‘\n   */\n  drawPointer(img: ImageBitmap, angle: number) {\n    this.context.save()\n    this.context.translate(this.canvasSize / 2, this.canvasSize / 2)\n    this.context.rotate((angle + 180) * Math.PI / 180)\n    this.context.translate(-this.canvasSize / 2, -this.canvasSize / 2)\n    this.context.drawImage(img, this.canvasSize / 2 - this.pointerWidth / 2, 0, this.pointerWidth, this.canvasSize)\n    this.context.restore()\n  }\n\n  build() {\n    Canvas(this.context)\n      .width(this.canvasSize)\n      .aspectRatio(1)\n      .onReady(() => {\n        this.startDraw()\n      })\n  }\n}\n\n\n\n3. é¡µé¢ç»“æž„-ç»˜åˆ¶é—¹é’Ÿä»»åŠ¡åˆ—è¡¨#\n\n@Component\nexport struct ClockItemComp {\n  build() {\n    Row(){\n      Column({ space: 5 }) {\n        Row({ space: 5 }){\n          Text('ä¸‹åˆ')\n            .fontColor('#666')\n          Text('04:30')\n            .fontWeight(600)\n            .fontSize(18)\n        }\n        Row({ space: 15 }){\n          Text('é—¹é’Ÿ')\n            .fontColor('#999')\n            .fontSize(14)\n          Text('ä¸é‡å¤')\n            .fontColor('#999')\n            .fontSize(14)\n        }\n      }\n      .alignItems(HorizontalAlign.Start)\n\n      // å¼€å…³\n      Toggle({ type: ToggleType.Switch , isOn: true })\n    }\n    .height(64)\n    .padding({ left: 20, right: 15 })\n    .width('100%')\n    .backgroundColor('#fff')\n    .borderRadius(30)\n    .justifyContent(FlexAlign.SpaceBetween)\n  }\n}\n\n\n\n4. é¡µé¢ç»“æž„-è¯¦æƒ…é¡µ#\n\n@Entry\n@Component\nstruct DetailPage {\n\n  submit () {\n    // TODO\n  }\n\n  @Builder\n  CellBuilder (title: string, value: string) {\n    Row(){\n      Text(title)\n        .layoutWeight(1)\n      Text(value)\n        .fontColor('#999')\n      Image('/images/ic_public_arrow_right.svg')\n        .width(18)\n        .aspectRatio(1)\n        .fillColor('#999')\n    }\n    .height(60)\n    .padding({ left: 15, right: 15 })\n    .backgroundColor('#fff')\n  }\n\n  build() {\n    Navigation(){\n      Column({ space: 15 }){\n        TimePicker()\n          .borderRadius(16)\n          .clip(true)\n\n        Column({ space: 1 }){\n          this.CellBuilder('é—¹é“ƒåç§°', 'é—¹é“ƒ')\n          this.CellBuilder('é‡å¤', 'ä¸é‡å¤')\n        }\n        .borderRadius(16)\n        .clip(true)\n\n        Text('åˆ é™¤é—¹é“ƒ')\n          .width(100)\n          .height(40)\n          .borderRadius(20)\n          .backgroundColor('#c3c4c5')\n          .textAlign(TextAlign.Center)\n          .fontColor('#f00')\n          .opacity(0.3)\n      }\n      .padding(15)\n    }\n    .title('æ–°å»ºé—¹é’Ÿ')\n    .titleMode(NavigationTitleMode.Mini)\n    .mode(NavigationMode.Stack)\n    .backgroundColor('#f5f5f5')\n    .menus([\n      { value: '', icon: '/images/ic_confirm.png', action: () => this.submit() }\n    ])\n  }\n}\n\n\n\n5. ä¸šåŠ¡é€»è¾‘-é¦–é€‰é¡¹å­˜å‚¨å·¥å…·#\n\n * åˆ›å»ºé¦–é€‰é¡¹å­˜å‚¨å·¥å…·ç±»\n * èŽ·å–é¦–é€‰é¡¹å®žä¾‹\n * è®¾ç½®å’Œä¿®æ”¹é—¹é’Ÿä¿¡æ¯\n * åˆ é™¤é—¹é’Ÿä¿¡æ¯\n * èŽ·å–æ‰€æœ‰çš„é—¹é’Ÿä¿¡æ¯\n\n\n\nexport class ClockItem {\n  hour?: number\n  minute?: number\n  id?: string\n  reminderId?: number\n  enabled?: boolean\n}\n\nexport class ClockStore {\n\n  getStore() {\n    return preferences.getPreferences(getContext(this), 'clockStore')\n  }\n\n  async addClock(clockItem: ClockItem) {\n    const store = await this.getStore()\n    await store.put(clockItem.id, JSON.stringify(clockItem))\n    await store.flush()\n  }\n\n  async delClock(id: string) {\n    const store = await this.getStore()\n    await store.delete(id)\n    await store.flush()\n  }\n\n  async getAllClock() {\n    const store = await this.getStore()\n    const data = await store.getAll()\n    const list = Object.keys(data).map(key => {\n      return JSON.parse(data[key])\n    })\n    return list\n  }\n}\n\n\n\n6. ä¸šåŠ¡é€»è¾‘-æ·»åŠ é—¹é’Ÿä»»åŠ¡#\n\n * ç»‘å®šæ—¶é—´é€‰æ‹©ç»„ä»¶ï¼Œå›žæ”¶é€‰ä¸­åŽçš„æ—¶é—´æ•°æ®\n * å¼€å¯æé†’\n * ä¿å­˜åˆ°é¦–é€‰é¡¹\n\n  @State\n  clockItem: ClockItem = {}\n\n  // Date ä¸èƒ½ç›´æŽ¥ä½¿ç”¨ @State è£…é¥°å™¨\n  @State\n  state: { now: Date } = { now: new Date() }\n  clockStore = new ClockStore()\n\n  async submit() {\n\n    // 1. å¼€å¯æé†’\n    const hour = this.state.now.getHours()\n    const minute = this.state.now.getMinutes()\n    const request: reminderAgentManager.ReminderRequestAlarm = {\n      reminderType: reminderAgentManager.ReminderType.REMINDER_TYPE_ALARM,\n      hour,\n      minute,\n      title: 'é—¹é’Ÿ',\n      ringDuration: 60\n    }\n    const reminderId = await reminderAgentManager.publishReminder(request)\n    // 2. è®°å½•æ•°æ®\n    this.clockItem = {\n      hour,\n      minute,\n      id: util.generateRandomUUID(),\n      reminderId,\n      enabled: true\n    }\n    await this.clockStore.addClock(this.clockItem)\n    promptAction.showToast({ message: 'æ·»åŠ é—¹é’ŸæˆåŠŸ' })\n    router.back()\n  } \n\n\n        TimePicker({\n          selected: this.state.now\n        })\n          .borderRadius(16)\n          .clip(true)\n\n\n\n7. ä¸šåŠ¡é€»è¾‘-æ¸²æŸ“é—¹é’Ÿä»»åŠ¡åˆ—è¡¨#\n\n * èŽ·å–é¦–é€‰é¡¹é—¹é’Ÿæ•°æ®\n * éåŽ†æ•°ç»„\n * åŽ»é—¹é’Ÿé¡¹ç»„ä»¶æ¸²æŸ“\n\n1ï¼‰ èŽ·å–é¦–é€‰é¡¹é—¹é’Ÿæ•°æ®\n\n  @State\n  clockList: ClockItem[] = []\n\n  clockStore = new ClockStore()\n\n  aboutToAppear() {\n    this.initData()\n  }\n  onPageShow() {\n    this.initData()\n  }\n  async initData() {\n    this.clockList = await this.clockStore.getAllClock()\n  }\n\n\n2ï¼‰ éåŽ†æ•°ç»„\n\n        ForEach(this.clockList, (item: ClockItem) => {\n          ClockItemComp({ item })\n            .onClick(() => {\n              router.pushUrl({\n                url: 'pages/DetailPage',\n                params: item\n              })\n            })\n        })\n\n\n3ï¼‰ åŽ»é—¹é’Ÿé¡¹ç»„ä»¶æ¸²æŸ“\n\n  @State\n  item: ClockItem = {}\n\n  padZero(val: number = 0) {\n    return val.toString().padStart(2, '0')\n  }\n\n\n        Row({ space: 5 }) {\n          Text(this.item.hour > 12 ? 'ä¸‹åˆ' : 'ä¸Šåˆ')\n            .fontColor('#666')\n          Text(`${this.padZero(this.item.hour > 12 ? this.item.hour - 12 : this.item.hour)}:${this.padZero(this.item.minute)}`)\n            .fontWeight(600)\n            .fontSize(18)\n        }\n\n\n\n8. ä¸šåŠ¡é€»è¾‘-ä¿®æ”¹é—¹é“ƒä»»åŠ¡#\n\n * ä¼ é€’é—¹é“ƒæ•°æ®åˆ°è¯¦æƒ…é¡µï¼Œéœ€è¦æŽ¥æ”¶ä¸‹\n\n * é¡µé¢ä¸Šçš„æ ‡é¢˜éœ€è¦åˆ¤æ–­æ˜¾ç¤º\n\n * åœ¨ submit å‡½æ•°ä¸­åŠ å…¥ç¼–è¾‘é€»è¾‘\n\n1ï¼‰ä¼ é€’é—¹é“ƒæ•°æ®åˆ°è¯¦æƒ…é¡µï¼Œéœ€è¦æŽ¥æ”¶ä¸‹\n\n  aboutToAppear() {\n    const params = router.getParams() as ClockItem\n    if (params && params.id) {\n      this.clockItem = { ...params }\n      this.state.now.setHours(this.clockItem.hour)\n      this.state.now.setMinutes(this.clockItem.minute)\n    }\n  }\n\n\n2ï¼‰é¡µé¢ä¸Šçš„æ ‡é¢˜éœ€è¦åˆ¤æ–­æ˜¾ç¤º\n\n+    .title((this.clockItem.id ? 'ç¼–è¾‘' : 'æ·»åŠ ') + 'é—¹é’Ÿ')\n    .titleMode(NavigationTitleMode.Mini)\n    .mode(NavigationMode.Stack)\n\n\n3ï¼‰åœ¨ submit å‡½æ•°ä¸­åŠ å…¥ç¼–è¾‘é€»è¾‘\n\n      // 2. è®°å½•æ•°æ®\n      if (this.clockItem.id) {\n        this.clockItem.hour = hour\n        this.clockItem.minute = minute\n        this.clockItem.enabled = true\n        // ä¸åŠ  await è®©å®ƒå¼‚æ­¥æ‰§è¡Œï¼Œå› ä¸ºå¯èƒ½å­˜åœ¨å¤±æ•ˆçš„ä»£ç†æé†’ï¼Œè¿™æ ·ä¸ä¼šé˜»ç¢åŽç»­é€»è¾‘\n        reminderAgentManager.cancelReminder(this.clockItem.reminderId)\n        this.clockItem.reminderId = reminderId\n        await this.clockStore.addClock(this.clockItem)\n        promptAction.showToast({ message:'ç¼–è¾‘é—¹é’ŸæˆåŠŸ' })\n      } else {\n        this.clockItem = {\n          hour,\n          minute,\n          id: util.generateRandomUUID(),\n          reminderId,\n          enabled: true\n        }\n        await this.clockStore.addClock(this.clockItem)\n        promptAction.showToast({ message:'æ·»åŠ é—¹é’ŸæˆåŠŸ' })\n      }\n\n\n\n9. ä¸šåŠ¡é€»è¾‘-åˆ é™¤é—¹é’Ÿä»»åŠ¡#\n\n * åˆ é™¤æŒ‰é’®åœ¨ç¼–è¾‘æ¡ä»¶ä¸‹å±•ç¤ºï¼Œç»‘å®šäº‹ä»¶å‡½æ•°\n\n * å®žçŽ°åˆ é™¤åŠŸèƒ½\n\n1ï¼‰åˆ é™¤æŒ‰é’®åœ¨ç¼–è¾‘æ¡ä»¶ä¸‹å±•ç¤ºï¼Œç»‘å®šäº‹ä»¶å‡½æ•°\n\n        if ( this.clockItem.id ) {\n          Text('åˆ é™¤é—¹é“ƒ')\n            .width(100)\n            .height(40)\n            .borderRadius(20)\n            .backgroundColor('#c3c4c5')\n            .textAlign(TextAlign.Center)\n            .fontColor('#f00')\n            .opacity(0.3)\n            .onClick(() => {\n              this.remove()\n            })\n        }\n\n\n2ï¼‰å®žçŽ°åˆ é™¤åŠŸèƒ½\n\n  async remove () {\n    try {\n      await this.clockStore.delClock(this.clockItem.id)\n      promptAction.showToast({ message: 'åˆ é™¤é—¹é’ŸæˆåŠŸ' })\n      // ä¸åŠ  await è®©å®ƒå¼‚æ­¥æ‰§è¡Œï¼Œå› ä¸ºå¯èƒ½å­˜åœ¨å¤±æ•ˆçš„ä»£ç†æé†’ï¼Œè¿™æ ·ä¸ä¼šé˜»ç¢è·³è½¬\n      reminderAgentManager.cancelReminder(this.clockItem.reminderId)\n      router.back()\n    } catch (e) {\n      console.error('CLOCK-REMOVE', e.message)\n    }\n  }\n\n\n\n10. ä¸šåŠ¡é€»è¾‘-é€šçŸ¥å”¤èµ·åº”ç”¨å’Œå…³é—­å»¶æ—¶#\n\n * æŠ½å–åˆ›å»ºåŽå°ä»£ç†å·¥å…·ç±»\n * åŠ å…¥å”¤èµ·é…ç½®ï¼ŒåŠ å…¥å»¶æ—¶å’Œå…³é—­é…ç½®\n * è¿›è¡Œå¤ç”¨\n\n1ï¼‰åŠ å…¥å”¤èµ·é…ç½®ï¼ŒåŠ å…¥å»¶æ—¶å’Œå…³é—­é…ç½®\n\n      // è·³è½¬\n      wantAgent: {\n        pkgName: 'com.itcast.myapplication',\n        abilityName: 'EntryAbility'\n      },\n      // æ“ä½œæŒ‰é’®\n      actionButton: [\n        { title: 'å…³é—­', type: reminderAgentManager.ActionButtonType.ACTION_BUTTON_TYPE_CLOSE },\n        { title: 'å»¶æ—¶æé†’', type: reminderAgentManager.ActionButtonType.ACTION_BUTTON_TYPE_SNOOZE }\n      ],\n      snoozeTimes: 1,\n      timeInterval: 10 * 60\n\n\n2ï¼‰æŠ½å–åˆ›å»ºåŽå°ä»£ç†å·¥å…·ç±»\n\n\n\nexport class AlarmManager {\n\n  // æ·»åŠ ä»£ç†æé†’\n  static async addReminder (hour: number, minute: number) {\n    // 1. æ·»åŠ åŽå°ä»£ç†æé†’-é—¹é’Ÿ\n    const reminderRequest: reminderAgentManager.ReminderRequestAlarm = {\n      reminderType: reminderAgentManager.ReminderType.REMINDER_TYPE_ALARM,\n      hour,\n      minute,\n      ringDuration: 60,\n      title: 'é—¹é“ƒ',\n      // è·³è½¬\n      wantAgent: {\n        pkgName: 'com.itcast.hmday05',\n        abilityName: 'EntryAbility'\n      },\n      // å»¶æ—¶å’Œå…³é—­\n      actionButton: [\n        { title: 'å…³é—­', type: reminderAgentManager.ActionButtonType.ACTION_BUTTON_TYPE_CLOSE },\n        { title: 'å»¶æ—¶æé†’', type: reminderAgentManager.ActionButtonType.ACTION_BUTTON_TYPE_SNOOZE }\n      ],\n      snoozeTimes: 2,\n      timeInterval: 10 * 60\n    }\n\n    const reminderId = await reminderAgentManager.publishReminder(reminderRequest)\n    return reminderId\n  }\n}\n\n\n\n3ï¼‰è¿›è¡Œå¤ç”¨\n\n      // 1. å¼€å¯æé†’\n      const hour = this.state.now.getHours()\n      const minute = this.state.now.getMinutes()\n+      const reminderId = await AlarmManager.createAlarmTask(hour, minute)\n      // 2. è®°å½•æ•°æ®\n\n\n    if (this.item.enabled) {\n+      const reminderId = await AlarmManager.createAlarmTask(this.item.hour, this.item.minute)\n      this.item.reminderId = reminderId\n    }\n\n\n\n11. ä¸šåŠ¡é€»è¾‘-åœæ­¢å’Œå¼€å¯é—¹é’Ÿä»»åŠ¡#\n\n  clockStore = new ClockStore()\n\n  async toggle(isOn: boolean) {\n    reminderAgentManager.cancelReminder(this.item.reminderId)\n\n    this.item.enabled = isOn\n    if (this.item.enabled) {\n      const request: reminderAgentManager.ReminderRequestAlarm = {\n        reminderType: reminderAgentManager.ReminderType.REMINDER_TYPE_ALARM,\n        hour: this.item.hour,\n        minute: this.item.minute,\n        title: 'é—¹é’Ÿ',\n        ringDuration: 60\n      }\n      const reminderId = await reminderAgentManager.publishReminder(request)\n      this.item.reminderId = reminderId\n    }\n    this.clockStore.addClock(this.item)\n    promptAction.showToast({ message: isOn ? 'å·²å¼€å¯' : 'å·²å…³é—­' })\n  }\n\n\n      // å¼€å…³\n      Toggle({ type: ToggleType.Switch, isOn: this.item.enabled })\n        .onChange(isOn => this.toggle(isOn))\n","frontmatter":{"title":"HM - é¸¿è’™-åŽä¸ºé—¹é’Ÿ"},"version":""},{"id":4,"title":"HM - é¸¿è’™-çŠ¶æ€ç®¡ç†","routePath":"/interview-handbook-project/guide/state","lang":"","toc":[{"text":"è‡ªå®šä¹‰æž„å»ºå‡½æ•°","id":"è‡ªå®šä¹‰æž„å»ºå‡½æ•°","depth":2,"charIndex":3},{"text":"1. æž„å»ºå‡½æ•°-@Builder","id":"1-æž„å»ºå‡½æ•°-builder","depth":3,"charIndex":14},{"text":"2. æž„å»ºå‡½æ•°-ä¼ å‚ä¼ é€’","id":"2-æž„å»ºå‡½æ•°-ä¼ å‚ä¼ é€’","depth":3,"charIndex":3172},{"text":"3. æž„å»ºå‡½æ•°-@BuilderParam ä¼ é€’UI","id":"3-æž„å»ºå‡½æ•°-builderparam-ä¼ é€’ui","depth":3,"charIndex":5542},{"text":"4. æž„å»ºå‡½æ•°-ç³»ç»Ÿç»„ä»¶è‡ªå®šä¹‰UI","id":"4-æž„å»ºå‡½æ•°-ç³»ç»Ÿç»„ä»¶è‡ªå®šä¹‰ui","depth":3,"charIndex":8867},{"text":"ç»„ä»¶çŠ¶æ€å…±äº«","id":"ç»„ä»¶çŠ¶æ€å…±äº«","depth":2,"charIndex":10287},{"text":"1. çŠ¶æ€å…±äº«-çˆ¶å­å•å‘","id":"1-çŠ¶æ€å…±äº«-çˆ¶å­å•å‘","depth":3,"charIndex":10297},{"text":"2. çŠ¶æ€å…±äº«-çˆ¶å­åŒå‘","id":"2-çŠ¶æ€å…±äº«-çˆ¶å­åŒå‘","depth":3,"charIndex":11022},{"text":"3. çŠ¶æ€å…±äº«-åŽä»£ç»„ä»¶","id":"3-çŠ¶æ€å…±äº«-åŽä»£ç»„ä»¶","depth":3,"charIndex":12363},{"text":"4. çŠ¶æ€å…±äº«-çŠ¶æ€ç›‘å¬å™¨","id":"4-çŠ¶æ€å…±äº«-çŠ¶æ€ç›‘å¬å™¨","depth":3,"charIndex":13237},{"text":"5. @Observedä¸Ž@ObjectLink","id":"5-observedä¸Žobjectlink","depth":3,"charIndex":14040},{"text":"åº”ç”¨çŠ¶æ€","id":"åº”ç”¨çŠ¶æ€","depth":2,"charIndex":21203},{"text":"1. UIAbilityå†…çŠ¶æ€-LocalStorage","id":"1-uiabilityå†…çŠ¶æ€-localstorage","depth":3,"charIndex":21241},{"text":"2. åº”ç”¨çŠ¶æ€-AppStorage","id":"2-åº”ç”¨çŠ¶æ€-appstorage","depth":3,"charIndex":24269},{"text":"3. çŠ¶æ€æŒä¹…åŒ–-PersistentStorage","id":"3-çŠ¶æ€æŒä¹…åŒ–-persistentstorage","depth":3,"charIndex":26455},{"text":"4. è®¾å¤‡çŽ¯å¢ƒ-Environment","id":"4-è®¾å¤‡çŽ¯å¢ƒ-environment","depth":3,"charIndex":28020},{"text":"ç½‘ç»œç®¡ç†","id":"ç½‘ç»œç®¡ç†","depth":2,"charIndex":28579},{"text":"1. åº”ç”¨æƒé™","id":"1-åº”ç”¨æƒé™","depth":3,"charIndex":28587},{"text":"2. HTTPè¯·æ±‚","id":"2-httpè¯·æ±‚","depth":3,"charIndex":29034}],"domain":"","content":"#\n\n\nè‡ªå®šä¹‰æž„å»ºå‡½æ•°#\n\n\n1. æž„å»ºå‡½æ•°-@Builder#\n\n> ArkUIè¿˜æä¾›äº†ä¸€ç§æ›´è½»é‡çš„UIå…ƒç´ å¤ç”¨æœºåˆ¶ @Builderï¼Œå¯ä»¥å°†é‡å¤ä½¿ç”¨çš„UIå…ƒç´ æŠ½è±¡æˆä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨ build æ–¹æ³•é‡Œè°ƒç”¨ã€‚\n\n * ç»„ä»¶å†…å®šä¹‰\n * å…¨å±€å®šä¹‰\n\n1ï¼‰ç»„ä»¶å†…å®šä¹‰\n\n@Builder MyBuilderFunction() {}\n\n\nthis.MyBuilderFunction()\n\n\n2ï¼‰å…¨å±€å®šä¹‰\n\n@Builder function MyGlobalBuilderFunction() {}\n\n\nMyGlobalBuilderFunction()\n\n\nðŸ“•ðŸ“•ðŸ“• ç»ƒä¹ æ¡ˆä¾‹â†’å•†å“è¯¦æƒ…-æ›´å¤šæŒ‰é’®\n\n * å¾…å®žçŽ°é¡µé¢\n\n@Entry\n@Component\nstruct Index {\n  build() {\n    Column() {\n      GridRow({ columns: 2, gutter: 15 }) {\n        GridCol({ span: 2 }) {\n          Column() {\n            Row() {\n              Text('è¯„ä»·ï¼ˆ2000+ï¼‰')\n                .layoutWeight(1)\n                .fontWeight(600)\n              // TODO\n            }\n            .padding(10)\n\n            Row()\n              .height(100)\n          }\n          .borderRadius(12)\n          .backgroundColor('#fff')\n        }\n\n        GridCol() {\n          Column() {\n            Row() {\n              Text('æŽ¨è')\n                .layoutWeight(1)\n                .fontWeight(600)\n              // TODO\n            }\n            .padding(10)\n\n            Row()\n              .height(100)\n          }\n          .borderRadius(12)\n          .backgroundColor('#fff')\n        }\n\n        GridCol() {\n          Column() {\n            Row() {\n              Text('ä½“éªŒ')\n                .layoutWeight(1)\n                .fontWeight(600)\n              // TODO\n            }\n            .padding(10)\n\n            Row()\n              .height(100)\n          }\n          .borderRadius(12)\n          .backgroundColor('#fff')\n        }\n      }\n    }\n    .height('100%')\n    .padding(15)\n    .backgroundColor('#f5f5f5')\n  }\n}\n\n\n * ä½¿ç”¨ @Builder æå–UIç»“æž„\n\n@Entry\n@Component\nstruct Index {\n\n  @Builder\n  MoreBuilder () {\n    Row() {\n      Text('æŸ¥çœ‹æ›´å¤š')\n        .fontSize(14)\n        .fontColor('#666666')\n      Image($r('app.media.ic_public_arrow_right'))\n        .width(16)\n        .fillColor('#666666')\n    }\n  }\n\n  build() {\n    Column() {\n      GridRow({ columns: 2, gutter: 15 }) {\n        GridCol({ span: 2 }) {\n          Column() {\n            Row() {\n              Text('è¯„ä»·ï¼ˆ2000+ï¼‰')\n                .layoutWeight(1)\n                .fontWeight(600)\n              this.MoreBuilder()\n            }\n            .padding(10)\n\n            Row()\n              .height(100)\n          }\n          .borderRadius(12)\n          .backgroundColor('#fff')\n        }\n\n        GridCol() {\n          Column() {\n            Row() {\n              Text('æŽ¨è')\n                .layoutWeight(1)\n                .fontWeight(600)\n              this.MoreBuilder()\n            }\n            .padding(10)\n\n            Row()\n              .height(100)\n          }\n          .borderRadius(12)\n          .backgroundColor('#fff')\n        }\n\n        GridCol() {\n          Column() {\n            Row() {\n              Text('ä½“éªŒ')\n                .layoutWeight(1)\n                .fontWeight(600)\n              this.MoreBuilder()\n            }\n            .padding(10)\n\n            Row()\n              .height(100)\n          }\n          .borderRadius(12)\n          .backgroundColor('#fff')\n        }\n      }\n    }\n    .height('100%')\n    .padding(15)\n    .backgroundColor('#f5f5f5')\n  }\n}\n\n\nTIP\n\nå°ç»“ï¼š\n\n * é‡åˆ°éžéåŽ†æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç»„ä»¶åˆ†æ•£ç€ç›¸åŒçš„UIç»“æž„ï¼Œå¯ä»¥ä½¿ç”¨ @Builder æ›´è½»é‡\n\nå…¶ä»–ï¼š\n\n * GridRow GridCol æ …æ ¼å¸ƒå±€\n\n\n2. æž„å»ºå‡½æ•°-ä¼ å‚ä¼ é€’#\n\n1ï¼‰æŒ‰å€¼ä¼ é€’ï¼ˆåœºæ™¯ï¼šæž„å»ºä¸åŒçš„UIï¼‰\n\n@Builder MyBuilderFunction( title: string ) {}\n\n\nthis.MyBuilderFunction('Title')\n\n\néœ€æ±‚ï¼šä¸åŒæ¿å—æŸ¥çœ‹æ›´å¤šæ–‡æ¡ˆä¸ä¸€æ ·\n\n * è¯„ä»· å¥½è¯„çŽ‡ 98%\n\n * æŽ¨è æŸ¥çœ‹å…¨éƒ¨\n\n * ä½“éªŒ 4 æ¡æµ‹è¯„\n\n  @Builder\n  MoreBuilder (title: string) {\n    Row() {\n      Text(title)\n        .fontSize(14)\n        .fontColor('#666666')\n      Image($r('app.media.ic_public_arrow_right'))\n        .width(16)\n        .fillColor('#666666')\n    }\n  }\n\n\nthis.MoreBuilder('å¥½è¯„çŽ‡ 98%')\nthis.MoreBuilder('æŸ¥çœ‹å…¨éƒ¨')\nthis.MoreBuilder('4 æ¡æµ‹è¯„')\n\n\n2ï¼‰å¼•ç”¨ä¼ é€’ï¼ˆåœºæ™¯ï¼šå½“ä¼ é€’çš„æ•°æ®æ›´æ–°ï¼Œéœ€è¦æ›´æ–°UIï¼‰\n\néœ€æ±‚ï¼š\n\n * ç‚¹å‡»æŒ‰é’®åŽæ¨¡æ‹ŸåŠ è½½å¥½è¯„çŽ‡æ•°æ®\n\n@Entry\n@Component\nstruct Index {\n  @State\n  rate: number = 0\n\n  @Builder\n  MoreBuilder(params: { title: string }) {\n    Row() {\n      Text(params.title)\n        .fontSize(14)\n        .fontColor('#666666')\n      Image($r('app.media.ic_public_arrow_right'))\n        .width(16)\n        .fillColor('#666666')\n    }\n  }\n\n  build() {\n    Column() {\n      Button('èŽ·å–æ•°æ®')\n        .margin({ bottom: 15 })\n        .onClick(() => {\n          this.rate = 99\n        })\n      GridRow({ columns: 2, gutter: 15 }) {\n        GridCol({ span: 2 }) {\n          Column() {\n            Row() {\n              Text('è¯„ä»·ï¼ˆ2000+ï¼‰')\n                .layoutWeight(1)\n                .fontWeight(600)\n              this.MoreBuilder({ title: `å¥½è¯„çŽ‡ ${this.rate} %` })\n            }\n            .padding(10)\n\n            Row()\n              .height(100)\n          }\n          .borderRadius(12)\n          .backgroundColor('#fff')\n        }\n\n        GridCol() {\n          Column() {\n            Row() {\n              Text('æŽ¨è')\n                .layoutWeight(1)\n                .fontWeight(600)\n              this.MoreBuilder({ title: 'æŸ¥çœ‹å…¨éƒ¨' })\n            }\n            .padding(10)\n\n            Row()\n              .height(100)\n          }\n          .borderRadius(12)\n          .backgroundColor('#fff')\n        }\n\n        GridCol() {\n          Column() {\n            Row() {\n              Text('ä½“éªŒ')\n                .layoutWeight(1)\n                .fontWeight(600)\n              this.MoreBuilder({ title: '4 æ¡æµ‹è¯„' })\n            }\n            .padding(10)\n\n            Row()\n              .height(100)\n          }\n          .borderRadius(12)\n          .backgroundColor('#fff')\n        }\n      }\n    }\n    .height('100%')\n    .padding(15)\n    .backgroundColor('#f5f5f5')\n  }\n}\n\n\nTIP\n * ä½¿ç”¨ @Builder å¤ç”¨é€»è¾‘çš„æ—¶å€™ï¼Œæ”¯æŒä¼ å‚å¯ä»¥æ›´çµæ´»çš„æ¸²æŸ“UI\n * å‚æ•°å¯ä»¥ä½¿ç”¨çŠ¶æ€æ•°æ®ï¼Œä¸è¿‡å»ºè®®é€šè¿‡å¯¹è±¡çš„æ–¹å¼ä¼ å…¥ @Builder\n\n\n3. æž„å»ºå‡½æ•°-@BuilderParam ä¼ é€’UI#\n\n> @BuilderParam è¯¥è£…é¥°å™¨ç”¨äºŽå£°æ˜Žä»»æ„UIæè¿°çš„ä¸€ä¸ªå…ƒç´ ï¼Œç±»ä¼¼ slot å ä½ç¬¦\n\nå‰ç½®çŸ¥è¯†\n\nç»„ä»¶å±žæ€§åˆå§‹åŒ–ï¼š\n\n * å®šä¹‰ç»„ä»¶å£°æ˜Žå±žæ€§ title: string\n * ä½¿ç”¨ç»„ä»¶åˆå§‹åŒ–å±žæ€§ Comp({ title: string })\n\n * å°¾éšé—­åŒ…åˆå§‹åŒ–ç»„ä»¶\n   \n   * ç»„ä»¶å†…æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªä½¿ç”¨ @BuilderParam è£…é¥°çš„å±žæ€§\n\n * å‚æ•°åˆå§‹åŒ–ç»„ä»¶\n   \n   * ç»„ä»¶å†…æœ‰å¤šä¸ªä½¿ç”¨ @BuilderParam è£…é¥°å™¨å±žæ€§\n\n1ï¼‰å°¾éšé—­åŒ…åˆå§‹åŒ–ç»„ä»¶(é»˜è®¤æ’æ§½)\n\néœ€æ±‚ï¼š\n\n * æ ‡é¢˜æ–‡å­—å’Œæ›´å¤šæ–‡æ¡ˆé€šè¿‡å±žæ€§ä¼ å…¥\n\n * å†…å®¹ç»“æž„éœ€è¦ä¼ å…¥\n\n@Component\nstruct PanelComp {\n  title: string\n  more: string\n  @BuilderParam\n  panelContent: () => void = this.DefaultPanelContent\n\n  // å¤‡ç”¨ Builder\n  @Builder\n  DefaultPanelContent () {\n    Text('é»˜è®¤å†…å®¹')\n  }\n\n  build() {\n    Column() {\n      Row() {\n        Text(this.title)\n          .layoutWeight(1)\n          .fontWeight(600)\n        Row() {\n          Text(this.more)\n            .fontSize(14)\n            .fontColor('#666666')\n          Image($r('app.media.ic_public_arrow_right'))\n            .width(16)\n            .fillColor('#666666')\n        }\n      }\n      .padding(10)\n\n      Row() {\n        this.panelContent()\n      }\n      .height(100)\n    }\n    .borderRadius(12)\n    .backgroundColor('#fff')\n  }\n}\n\n@Entry\n@Component\nstruct Index {\n  build() {\n    Column() {\n      GridRow({ columns: 2, gutter: 15 }) {\n        GridCol({ span: 2 }) {\n          PanelComp({ title: 'è¯„ä»·ï¼ˆ2000+ï¼‰', more: 'å¥½è¯„çŽ‡98%' })\n        }\n\n        GridCol() {\n          PanelComp({ title: 'æŽ¨è', more: 'æŸ¥çœ‹å…¨éƒ¨' }){\n            Text('æŽ¨èå†…å®¹')\n          }\n        }\n\n        GridCol() {\n          PanelComp({ title: 'ä½“éªŒ', more: '4 æ¡æµ‹è¯„' }){\n            Text('ä½“éªŒå†…å®¹')\n          }\n        }\n      }\n    }\n    .height('100%')\n    .padding(15)\n    .backgroundColor('#f5f5f5')\n  }\n}\n\n\n2ï¼‰å‚æ•°åˆå§‹åŒ–ç»„ä»¶ï¼ˆå…·åæ’æ§½ï¼‰\n\néœ€æ±‚ï¼šéœ€è¦ä¼ å…¥å†…å®¹ç»“æž„å’Œåº•éƒ¨ç»“æž„\n\n@Component\nstruct PanelComp {\n  title: string\n  more: string\n  @BuilderParam\n  panelContent: () => void\n  @BuilderParam\n  panelFooter: () => void\n\n  build() {\n    Column() {\n      Row() {\n        Text(this.title)\n          .layoutWeight(1)\n          .fontWeight(600)\n        Row() {\n          Text(this.more)\n            .fontSize(14)\n            .fontColor('#666666')\n          Image($r('app.media.ic_public_arrow_right'))\n            .width(16)\n            .fillColor('#666666')\n        }\n      }\n      .padding(10)\n\n      Row() {\n        this.panelContent()\n      }\n      .height(100)\n      Row() {\n        this.panelFooter()\n      }\n      .height(50)\n    }\n    .borderRadius(12)\n    .backgroundColor('#fff')\n  }\n}\n\n@Entry\n@Component\nstruct Index {\n  @Builder\n  ContentBuilderA() {\n    Text('è¯„ä»·å†…å®¹')\n  }\n  @Builder\n  FooterBuilderA() {\n    Text('è¯„ä»·åº•éƒ¨')\n  }\n\n  build() {\n    Column() {\n      GridRow({ columns: 2, gutter: 15 }) {\n        GridCol({ span: 2 }) {\n          PanelComp({\n            title: 'è¯„ä»·ï¼ˆ2000+ï¼‰',\n            more: 'å¥½è¯„çŽ‡98%',\n            panelFooter: this.FooterBuilderA,\n            panelContent: this.ContentBuilderA\n          })\n        }\n\n        // GridCol() {\n        //   PanelComp({ title: 'æŽ¨è', more: 'æŸ¥çœ‹å…¨éƒ¨' }){\n        //     Text('æŽ¨èå†…å®¹')\n        //   }\n        // }\n        //\n        // GridCol() {\n        //   PanelComp({ title: 'ä½“éªŒ', more: '4 æ¡æµ‹è¯„' }){\n        //     Text('ä½“éªŒå†…å®¹')\n        //   }\n        // }\n      }\n    }\n    .height('100%')\n    .padding(15)\n    .backgroundColor('#f5f5f5')\n  }\n}\n\n\nTIP\n * å½“å­ç»„ä»¶ä½¿ç”¨ä¸€ä¸ª @BuilderParam çš„æ—¶å€™ï¼Œä½¿ç”¨ç»„ä»¶çš„æ—¶å€™åœ¨å°¾éš {} æ’å…¥UIç»“æž„\n * å½“å­ç»„ä»¶ä½¿ç”¨å¤šä¸ª @BuilderParam çš„æ—¶å€™ï¼Œä½¿ç”¨ç»„ä»¶çš„æ—¶å€™ Comp({ xxx: this.builderFn }) ä¼ å…¥\n * å­ç»„ä»¶æœ¬èº«å¯ä»¥æä¾›ä¸€ä¸ªé»˜è®¤çš„ @Builder å‡½æ•°ä½œä¸º @BuilderParam å¤‡ç”¨å‡½æ•°ï¼Œå½“åšå¤‡ç”¨å†…å®¹ä½¿ç”¨\n\n\n4. æž„å»ºå‡½æ•°-ç³»ç»Ÿç»„ä»¶è‡ªå®šä¹‰UI#\n\n> åœ¨ä¸€äº›ç³»ç»Ÿç»„ä»¶ä¸­ï¼Œæ ¹æ®é…ç½®æ— æ³•è¾¾åˆ°é¢„æœŸUIï¼Œå¯ä»¥ä½¿ç”¨ @Builder æž„å»ºå‡½æ•°è‡ªå®šä¹‰UIï¼Œå‰æè¯¥ç»„ä»¶æ”¯æŒè‡ªå®šä¹‰ã€‚\n\néœ€æ±‚ï¼šè‡ªå®šä¹‰ Tabs ç»„ä»¶çš„ TabBar UIç»“æž„\n\nclass ToolBarItem {\n  defaultIcon: string | Resource\n  activeIcon: string | Resource\n  label: string\n}\n\n@Entry\n@Component\nstruct Index {\n  @State\n  activeIndex: number = 0\n  toolBars: ToolBarItem[] = [\n    { defaultIcon: $r('app.media.home'), activeIcon: $r('app.media.home_select'), label: 'é¦–é¡µ' },\n    { defaultIcon: $r('app.media.project'), activeIcon: $r('app.media.project_select'), label: 'é¡¹ç›®' },\n    { defaultIcon: $r('app.media.interview'), activeIcon: $r('app.media.interview_select'), label: 'é¢ç»' },\n    { defaultIcon: $r('app.media.mine'), activeIcon: $r('app.media.mine_select'), label: 'æˆ‘çš„' }\n  ]\n\n  @Builder\n  TabBarBuilder(item: ToolBarItem, index: number) {\n    Column() {\n      Image(this.activeIndex === index ? item.activeIcon : item.defaultIcon)\n        .width(24)\n      Text(item.label)\n        .fontSize(12)\n        .margin({ top: 4 })\n        .lineHeight(12)\n        .fontColor(this.activeIndex === index ? '#000' : '#aaa')\n    }\n  }\n\n  build() {\n    Tabs({\n      index: this.activeIndex\n    }) {\n      ForEach(this.toolBars, (item: ToolBarItem, index: number) => {\n        TabContent() {\n          Text(index.toString())\n        }\n        .tabBar(this.TabBarBuilder(item, index))\n      })\n    }\n    .barPosition(BarPosition.End)\n    .onChange(index => this.activeIndex = index)\n  }\n}\n\n\n\nç»„ä»¶çŠ¶æ€å…±äº«#\n\n\n1. çŠ¶æ€å…±äº«-çˆ¶å­å•å‘#\n\n> @Prop è£…é¥°çš„å˜é‡å¯ä»¥å’Œçˆ¶ç»„ä»¶å»ºç«‹å•å‘çš„åŒæ­¥å…³ç³»ã€‚@Prop è£…é¥°çš„å˜é‡æ˜¯å¯å˜çš„ï¼Œä½†æ˜¯å˜åŒ–ä¸ä¼šåŒæ­¥å›žå…¶çˆ¶ç»„ä»¶ã€‚\n\n@Entry\n@Component\nstruct Index {\n\n  @State\n  money: number = 0\n\n  build() {\n    Column({ space: 20 }){\n      Text('çˆ¶ç»„ä»¶ï¼š' + this.money)\n        .onClick(() => {\n          this.money ++\n        })\n      Child({ money: this.money })\n    }\n    .width('100%')\n    .height('100%')\n    .alignItems(HorizontalAlign.Center)\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n@Component\nstruct Child {\n\n  @Prop\n  money: number\n\n  build() {\n    Text('å­ç»„ä»¶ï¼š' + this.money)\n      .onClick(() => {\n        this.money ++\n      })\n  }\n}\n\n\nTIP\n * æ”¯æŒç±»åž‹ stringã€numberã€booleanã€enum ç±»åž‹\n * å­ç»„ä»¶å¯ä¿®æ”¹ Prop æ•°æ®å€¼ï¼Œä½†ä¸åŒæ­¥åˆ°çˆ¶ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶æ›´æ–°åŽè¦†ç›–å­ç»„ä»¶ Prop æ•°æ®\n * å­ç»„ä»¶å¯ä»¥åˆå§‹åŒ–é»˜è®¤å€¼ï¼Œæ³¨æ„ï¼šç›®å‰ç¼–è¯‘å™¨ä¼šæç¤ºé”™è¯¯ï¼Œè¯·å¿½ç•¥ï¼Œä¸‹ä¸ªç‰ˆæœ¬å°†ä¿®å¤\n\n\n2. çŠ¶æ€å…±äº«-çˆ¶å­åŒå‘#\n\n> å­ç»„ä»¶ä¸­è¢«@Linkè£…é¥°çš„å˜é‡ä¸Žå…¶çˆ¶ç»„ä»¶ä¸­å¯¹åº”çš„æ•°æ®æºå»ºç«‹åŒå‘æ•°æ®ç»‘å®šã€‚\n\n1ï¼‰ç®€å•ç±»åž‹ stringã€numberã€booleanã€enum\n\n@Entry\n@Component\nstruct Index {\n\n  @State\n  money: number = 0\n\n  build() {\n    Column({ space: 20 }){\n      Text('çˆ¶ç»„ä»¶ï¼š' + this.money)\n        .onClick(() => {\n          this.money ++\n        })\n      Child({ money: $money })\n    }\n    .width('100%')\n    .height('100%')\n    .alignItems(HorizontalAlign.Center)\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n@Component\nstruct Child {\n\n  @Link\n  money: number\n\n  build() {\n    Text('å­ç»„ä»¶ï¼š' + this.money)\n      .onClick(() => {\n        this.money ++\n      })\n  }\n}\n\n\n2ï¼‰å¤æ‚ç±»åž‹ Objectã€class\n\nclass Person {\n  name: string\n  age: number\n}\n\n@Entry\n@Component\nstruct Index {\n\n  @State\n  person: Person = { name: 'jack', age: 18 }\n\n  build() {\n    Column({ space: 20 }){\n      Text('çˆ¶ç»„ä»¶ï¼š' + `${this.person.name} ä»Šå¹´ ${ this.person.age } å²`)\n        .onClick(() => {\n          this.person.age ++\n        })\n      Child({ person: $person })\n    }\n    .width('100%')\n    .height('100%')\n    .alignItems(HorizontalAlign.Center)\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n@Component\nstruct Child {\n\n  @Link\n  person: Person\n\n  build() {\n    Text('å­ç»„ä»¶ï¼š' +  `${this.person.name} ä»Šå¹´ ${ this.person.age } å²`)\n      .onClick(() => {\n        this.person.age ++\n      })\n  }\n}\n\n\nTIP\n * çˆ¶ç»„ä»¶ä¼ å€¼çš„æ—¶å€™éœ€è¦ this. æ”¹æˆ $ï¼Œå­ç»„ä»¶ @Link ä¿®é¥°æ•°æ®\n\n\n3. çŠ¶æ€å…±äº«-åŽä»£ç»„ä»¶#\n\n> @Provide å’Œ @Consumeï¼Œåº”ç”¨äºŽä¸ŽåŽä»£ç»„ä»¶çš„åŒå‘æ•°æ®åŒæ­¥ï¼Œåº”ç”¨äºŽçŠ¶æ€æ•°æ®åœ¨å¤šä¸ªå±‚çº§ä¹‹é—´ä¼ é€’çš„åœºæ™¯ã€‚\n\n1ï¼‰é€šè¿‡ç›¸åŒçš„å˜é‡åç»‘å®š\n\n@Entry\n@Component\nstruct Index {\n  @Provide\n  money: number = 0\n\n  build() {\n    Column({ space: 20 }) {\n      Text('çˆ¶ç»„ä»¶ï¼š' + this.money)\n        .onClick(() => {\n          this.money++\n        })\n      Parent()\n    }\n    .width('100%')\n    .height('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n@Component\nstruct Parent {\n  @Consume\n  money: number\n\n  build() {\n    Column({ space: 20 }) {\n      Text('çˆ¶ç»„ä»¶ï¼š' + this.money)\n        .onClick(() => {\n          this.money++\n        })\n      Child()\n    }\n  }\n}\n\n@Component\nstruct Child {\n  @Consume\n  money: number\n\n  build() {\n    Text('å­ç»„ä»¶ï¼š' + this.money)\n      .onClick(() => {\n        this.money++\n      })\n  }\n}\n\n\nTIP\n * Objectã€classã€stringã€numberã€booleanã€enum ç±»åž‹å‡æ”¯æŒ\n * é€šè¿‡ç›¸åŒçš„å˜é‡åˆ«åç»‘å®š @Provide('key') å’Œ @Consume('key') keyéœ€è¦ä¿æŒä¸€è‡´\n\n\n4. çŠ¶æ€å…±äº«-çŠ¶æ€ç›‘å¬å™¨#\n\n> å¦‚æžœå¼€å‘è€…éœ€è¦å…³æ³¨æŸä¸ªçŠ¶æ€å˜é‡çš„å€¼æ˜¯å¦æ”¹å˜ï¼Œå¯ä»¥ä½¿ç”¨ @Watch ä¸ºçŠ¶æ€å˜é‡è®¾ç½®å›žè°ƒå‡½æ•°ã€‚\n\n * @Stateã€@Propã€@Link ç­‰è£…é¥°å™¨åœ¨ @Watch è£…é¥°ä¹‹å‰\n\n\n\n@Component\nstruct Child {\n  @Prop\n  @Watch('onActiveIndex')\n  activeIndex: number\n\n  onActiveIndex() {\n    promptAction.showToast({ message: 'ç›‘å¬å˜åŒ–' })\n  }\n\n  build() {\n    Column() {\n      Text('Child' + this.activeIndex)\n    }\n  }\n}\n\n@Entry\n@Component\nstruct Index {\n  @State activeIndex: number = 0\n\n  onChange (index: number) {\n    this.activeIndex = index\n    promptAction.showToast({ message: 'ç‚¹å‡»' })\n  }\n\n  build() {\n    Navigation() {\n      Child({ activeIndex: this.activeIndex })\n    }.toolBar({\n      items: [\n        { value: 'é¦–é¡µ', action: () => this.onChange(0) },\n        { value: 'æˆ‘çš„', action: () => this.onChange(1) },\n      ]\n    })\n  }\n}\n\n\nTIP\n * åœ¨ç¬¬ä¸€æ¬¡åˆå§‹åŒ–çš„æ—¶å€™ï¼Œ@Watchè£…é¥°çš„æ–¹æ³•ä¸ä¼šè¢«è°ƒç”¨\n\n\n5. @Observedä¸Ž@ObjectLink#\n\n> ä¹‹å‰æˆ‘ä»¬é€šè¿‡ èµ‹å€¼çš„æ–¹å¼ ä¿®æ”¹åµŒå¥—å¯¹è±¡æˆ–å¯¹è±¡æ•°ç»„è¿™ç±»å¤æ‚æ•°æ®æ¥æ›´æ–°UIï¼Œä¼šå½±å“å¯¹è±¡å¯¹åº”æ‰€æœ‰UIæ›´æ–°ï¼› é€šè¿‡ @Observed ä¸Ž @ObjectLink\n> å¯ä»¥ä¼˜åŒ–è¿™ä¸ªé—®é¢˜ï¼›\n\nä½¿ç”¨æ­¥éª¤ï¼š\n\n * ç±» class æ•°æ®æ¨¡æ‹Ÿéœ€è¦å®šä¹‰é€šè¿‡æž„é€ å‡½æ•°ï¼Œä½¿ç”¨ @Observed ä¿®é¥°è¿™ä¸ªç±»\n\n * åˆå§‹åŒ–æ•°æ®ï¼šéœ€è¦é€šè¿‡åˆå§‹åŒ–æž„é€ å‡½æ•°çš„æ–¹å¼æ·»åŠ \n\n * é€šè¿‡ @ObjectLink å…³è”å¯¹è±¡ï¼Œå¯ä»¥ç›´æŽ¥ä¿®æ”¹è¢«å…³è”å¯¹è±¡æ¥æ›´æ–°UI\n\néœ€æ±‚ï¼šæ”¹é€ ä¸‹çŸ¥ä¹Žè¯„è®ºæ¡ˆä¾‹\n\n1ï¼‰å®šä¹‰æž„é€ å‡½æ•°å’Œä½¿ç”¨@Observed ä¿®é¥°ç¬¦ï¼Œä»¥åŠåˆå§‹åŒ–æ•°æ®\n\n@Observed\nexport class ReplyItem {\n  id: number\n  avatar: string | Resource\n  author: string\n  content: string\n  time: string\n  area: string\n  likeNum: number\n  likeFlag?: boolean\n\n  constructor(item: ReplyItem) {\n    for (const key in item) {\n      this[key] = item[key]\n    }\n  }\n}\n\nexport const replyList: ReplyItem[] = [\n  new ReplyItem({\n    id: 1,\n    avatar: 'https://picx.zhimg.com/027729d02bdf060e24973c3726fea9da_l.jpg?source=06d4cd63',\n    author: 'åæ‰§ç‹‚-å¦„æƒ³å®¶',\n    content: 'æ›´ä½•å†µè¿˜åˆ†åˆ°ä¸€ä¸ªæ‘©æ´›å“¥[æƒŠå–œ]',\n    time: '11-30',\n    area: 'æµ·å—',\n    likeNum: 34\n  }),\n  new ReplyItem({\n    id: 2,\n    avatar: 'https://pic1.zhimg.com/v2-5a3f5190369ae59c12bee33abfe0c5cc_xl.jpg?source=32738c0c',\n    author: 'William',\n    content: 'å½“å¹´å¸Œè…Šå¯æ˜¯æŠŠ1ï¼š0å‘æŒ¥åˆ°æžè‡´äº†',\n    time: '11-29',\n    area: 'åŒ—äº¬',\n    likeNum: 58\n  }),\n  new ReplyItem({\n    id: 3,\n    avatar: 'https://picx.zhimg.com/v2-e6f4605c16e4378572a96dad7eaaf2b0_l.jpg?source=06d4cd63',\n    author: 'Andy Garcia',\n    content: 'æ¬§æ´²æ¯å…¶å®ž16é˜Ÿçƒé˜Ÿæ‰“æ­£èµ›å·²ç»å·®ä¸å¤šï¼Œ24é˜Ÿæ‰“æ­£èµ›æ„å‘³ç€æ­£èµ›é˜¶æ®µåœ¨å°ç»„èµ›ä¸€æ ·æœ‰å¼±é˜Ÿã€‚',\n    time: '11-28',\n    area: 'ä¸Šæµ·',\n    likeNum: 10\n  }),\n  new ReplyItem({\n    id: 4,\n    avatar: 'https://picx.zhimg.com/v2-53e7cf84228e26f419d924c2bf8d5d70_l.jpg?source=06d4cd63',\n    author: 'æ­£å®—å¥½é±¼å¤´',\n    content: 'ç¡®å®žçœ¼çº¢å•Šï¼Œäºšæ´²å°±æ²¡è¿™ç§çƒé˜Ÿï¼Œè®©ä¸­å›½é˜Ÿåˆ·',\n    time: '11-27',\n    area: 'é¦™æ¸¯',\n    likeNum: 139\n  }),\n  new ReplyItem({\n    id: 5,\n    avatar: 'https://pic1.zhimg.com/v2-eeddfaae049df2a407ff37540894c8ce_l.jpg?source=06d4cd63',\n    author: 'æŸ±å­å“¥',\n    content: 'æˆ‘æ˜¯æ”¯æŒæ‰©å¤§çš„ï¼Œäºšæ´²æ¯æ¬§æ´²æ¯æ‰©åˆ°32é˜Ÿï¼Œä¸–ç•Œæ¯æ‰©åˆ°64é˜Ÿæ‰æ˜¯å¥½çš„ï¼Œä¸–ç•Œä¸Šæœ‰è¶…è¿‡200æ”¯é˜Ÿä¼ï¼Œæ¬§æ´²åŒº55æ”¯é˜Ÿä¼ï¼Œäºšæ´²åŒº47æ”¯é˜Ÿä¼ï¼Œå³ä½¿å¦‚æ­¤ä¹Ÿå°±å…­æˆå‡ºçŽ°çŽ‡',\n    time: '11-27',\n    area: 'æ—§é‡‘å±±',\n    likeNum: 29\n  }),\n  new ReplyItem({\n    id: 6,\n    avatar: 'https://picx.zhimg.com/v2-fab3da929232ae911e92bf8137d11f3a_l.jpg?source=06d4cd63',\n    author: 'é£žè½©é€¸',\n    content: 'ç¦æ­¢æ¬§æ´²æ¯æ‰©å†›ä¹‹å‰ï¼Œåº”è¯¥å…ˆç¦æ­¢ä¸–ç•Œæ¯æ‰©å†›ï¼Œæˆ–è€…è‡³å°‘æŠŠäºšæ´²åé¢ä¸€åŠç»™æ¬§æ´²ã€‚',\n    time: '11-26',\n    area: 'é‡Œçº¦',\n    likeNum: 100\n  })\n]\n\n\n2ï¼‰åµŒå¥—çš„å¯¹è±¡ï¼Œæˆ–è€…æ•°ç»„ä¸­çš„å¯¹è±¡ï¼Œä¼ å…¥å­ç»„ä»¶ï¼Œç»„ä»¶ä½¿ç”¨ @ObjectLink ä¿®é¥°ç¬¦èŽ·å–æ•°æ®\n\n\n\n\n\n@Entry\n@Component\nstruct Index {\n  @State\n  replyList: ReplyItem[] = replyList\n  @State\n  content: string = ''\n\n  onReply() {\n    const reply: ReplyItem = new ReplyItem({\n      id: Math.random(),\n      content: this.content,\n      author: 'Zhousg',\n      avatar: $r('app.media.avatar'),\n      time: '12-01',\n      likeNum: 0,\n      area: 'åŒ—äº¬'\n    })\n    this.replyList.unshift(reply)\n    this.content = ''\n    promptAction.showToast({ message: 'å›žå¤æˆåŠŸ' })\n  }\n\n  build() {\n    Stack() {\n      Scroll() {\n        Column() {\n          NavComp()\n          CommentComp()\n          // space\n          Divider()\n            .strokeWidth(8)\n            .color('#f5f5f5')\n          // reply\n          Column() {\n            Text('å›žå¤ 7')\n              .width('100%')\n              .margin({ bottom: 15 })\n              .fontWeight(500)\n            ForEach(this.replyList, (item: ReplyItem) => {\n              ReplyComp({ item })\n            })\n          }\n          .padding({ left: 15, right: 15, top: 15 })\n        }\n      }\n      .padding({ bottom: 50 })\n\n      Row() {\n        TextInput({ placeholder: 'å›žå¤~', text: this.content })\n          .placeholderColor('#c3c4c5')\n          .layoutWeight(1)\n          .onChange((value) => {\n            this.content = value\n          })\n        Text('å‘å¸ƒ')\n          .fontSize(14)\n          .fontColor('#09f')\n          .margin({ left: 15 })\n          .onClick(() => {\n            this.onReply()\n          })\n      }\n      .width('100%')\n      .height(50)\n      .padding({ left: 15, right: 15 })\n      .position({ y: '100%' })\n      .translate({ y: -50 })\n      .backgroundColor('#fff')\n      .border({ width: { top: 0.5 }, color: '#e4e4e4' })\n    }\n\n  }\n}\n\n@Component\nstruct ReplyComp {\n  @ObjectLink\n  item: ReplyItem\n\n  onLike() {\n    if (this.item.likeFlag) {\n      this.item.likeNum--\n      this.item.likeFlag = false\n      promptAction.showToast({ message: 'å–æ¶ˆç‚¹èµž' })\n    } else {\n      this.item.likeNum++\n      this.item.likeFlag = true\n      promptAction.showToast({ message: 'ç‚¹èµžæˆåŠŸ' })\n    }\n  }\n\n  build() {\n    Row() {\n      Image(this.item.avatar)\n        .width(32)\n        .height(32)\n        .borderRadius(16)\n      Column() {\n        Text(this.item.author)\n          .fontSize(15)\n          .fontWeight(FontWeight.Bold)\n          .margin({ bottom: 5 })\n        Text(this.item.content)\n          .margin({ bottom: 5 })\n          .fontColor('#565656')\n          .lineHeight(20)\n        Row() {\n          Text(`${this.item.time}â€¢IP å±žåœ°${this.item.area}`)\n            .layoutWeight(1)\n            .fontSize(14)\n            .fontColor('#c3c4c5')\n          Row() {\n            Image($r('app.media.heart'))\n              .width(14)\n              .height(14)\n              .fillColor(this.item.likeFlag ? '#ff6600' : '#c3c4c5')\n              .margin({ right: 4 })\n            Text(this.item.likeNum.toString())\n              .fontSize(14)\n              .fontColor(this.item.likeFlag ? '#ff6600' : '#c3c4c5')\n          }\n          .onClick(() => {\n            this.onLike()\n          })\n        }\n      }\n      .layoutWeight(1)\n      .padding({ left: 10 })\n      .alignItems(HorizontalAlign.Start)\n    }\n    .width('100%')\n    .padding({ bottom: 15 })\n    .alignItems(VerticalAlign.Top)\n  }\n}\n\n@Component\nstruct NavComp {\n  build() {\n    // nav\n    Row() {\n      Row() {\n        Image($r('app.media.ic_public_arrow_left'))\n          .width(12)\n          .height(12)\n          .fillColor('#848484')\n      }\n      .width(24)\n      .height(24)\n      .borderRadius(12)\n      .backgroundColor('#f5f5f5')\n      .justifyContent(FlexAlign.Center)\n      .margin({ left: 13 })\n\n      Text('è¯„è®ºå›žå¤')\n        .padding({ right: 50 })\n        .textAlign(TextAlign.Center)\n        .fontSize(18)\n        .layoutWeight(1)\n    }\n    .height(50)\n\n  }\n}\n\n@Component\nstruct CommentComp {\n  build() {\n    // comment\n    Row() {\n      Image('https://picx.zhimg.com/1754b6bd9_xl.jpg?source=c885d018')\n        .width(32)\n        .height(32)\n        .borderRadius(16)\n      Column() {\n        Text('æ¬§æ´²è¶³çƒé”¦æ ‡èµ›')\n          .fontSize(15)\n          .fontWeight(FontWeight.Bold)\n          .margin({ bottom: 5 })\n        Text('14-0ï¼æ¬§æ´²æ¯è¶…çº§æƒ¨æ¡ˆ+åˆ·çˆ†çºªå½•ï¼å§†å·´ä½©å¸½å­æˆæ³•ï¼Œæ³•å›½7è¿žèƒœï¼Œæ€Žä¹ˆè¯„ä»·è¿™åœºæ¯”èµ›ï¼Ÿ')\n          .margin({ bottom: 5 })\n          .fontColor('#565656')\n          .lineHeight(20)\n        Row() {\n          Text('10-21â€¢IP å±žåœ°è¾½å®')\n            .layoutWeight(1)\n            .fontSize(14)\n            .fontColor('#c3c4c5')\n          Row() {\n            Image($r('app.media.heart'))\n              .width(14)\n              .height(14)\n              .fillColor('#c3c4c5')\n              .margin({ right: 4 })\n            Text('100')\n              .fontSize(14)\n              .fontColor('#c3c4c5')\n          }\n        }\n      }\n      .layoutWeight(1)\n      .padding({ left: 10 })\n      .alignItems(HorizontalAlign.Start)\n    }\n    .width('100%')\n    .padding({ left: 15, right: 15, bottom: 15 })\n    .alignItems(VerticalAlign.Top)\n  }\n}\n\n\næ³¨æ„ï¼š\n * å¯¹è±¡éœ€è¦é€šè¿‡æž„é€ å‡½æ•°åˆå§‹åŒ–\n * éœ€è¦åµŒå¥—ç»„ä»¶ï¼Œå› ä¸ºéœ€è¦ä½¿ç”¨ @ObjectLink\n\n\nåº”ç”¨çŠ¶æ€#\n\nTIP\n\nå…³äºŽåº”ç”¨çŠ¶æ€ç›¸å…³çš„å†…å®¹éœ€è¦ä½¿ç”¨æ¨¡æ‹Ÿå™¨æˆ–çœŸæœºè°ƒè¯•\n\n\n1. UIAbilityå†…çŠ¶æ€-LocalStorage#\n\n> LocalStorage æ˜¯é¡µé¢çº§çš„UIçŠ¶æ€å­˜å‚¨ï¼Œé€šè¿‡ @Entry è£…é¥°å™¨æŽ¥æ”¶çš„å‚æ•°å¯ä»¥åœ¨é¡µé¢å†…å…±äº«åŒä¸€ä¸ª LocalStorage å®žä¾‹ã€‚\n> LocalStorage ä¹Ÿå¯ä»¥åœ¨ UIAbility å†…ï¼Œé¡µé¢é—´å…±äº«çŠ¶æ€ã€‚\n\n1ï¼‰é¡µé¢å†…å…±äº«\n\n * åˆ›å»º LocalStorage å®žä¾‹ï¼šconst storage = new LocalStorage({ key: value })\n * å•å‘ @LocalStorageProp('user') ç»„ä»¶å†…å¯å˜\n * åŒå‘ @LocalStorageLink('user') å…¨å±€å‡å¯å˜\n\nclass User {\n  name?: string\n  age?: number\n}\nconst storage = new LocalStorage({\n  user: { name: 'jack', age: 18 }\n})\n\n@Entry(storage)\n@Component\nstruct Index {\n  @LocalStorageProp('user')\n  user: User = {}\n\n  build() {\n    Column({ space: 15 }){\n      Text('Indexï¼š')\n      Text(this.user.name + this.user.age)\n      Divider()\n      ChildA()\n      Divider()\n      ChildB()\n    }\n    .width('100%')\n    .height('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n@Component\nstruct ChildA {\n  @LocalStorageProp('user')\n  user: User = {}\n\n  build() {\n    Column({ space: 15 }){\n      Text('ChildAï¼š')\n      Text(this.user.name + this.user.age)\n        .onClick(()=>{\n          this.user.age ++\n        })\n    }\n  }\n}\n\n@Component\nstruct ChildB {\n  @LocalStorageLink('user')\n  user: User = {}\n\n  build() {\n    Column({ space: 15 }){\n      Text('ChildBï¼š')\n      Text(this.user.name + this.user.age)\n        .onClick(()=>{\n          this.user.age ++\n        })\n    }\n  }\n}\n\n\n2ï¼‰é¡µé¢é—´å…±äº«\n\n * åœ¨ UIAbility åˆ›å»º LocalStorage é€šè¿‡ loadContent æä¾›ç»™åŠ è½½çš„çª—å£\n\n * åœ¨é¡µé¢ä½¿ç”¨ const storage = LocalStorage.GetShared() å¾—åˆ°å®žä¾‹ï¼Œé€šè¿‡ @Entry(storage) ä¼ å…¥é¡µé¢\n\n+  storage = new LocalStorage({\n+    user: { name: 'jack', age: 18 }\n+  })\n\n  onWindowStageCreate(windowStage: window.WindowStage) {\n    // Main window is created, set main page for this ability\n    hilog.info(0x0000, 'testTag', '%{public}s', 'Ability onWindowStageCreate');\n\n+    windowStage.loadContent('pages/Index', this.storage , (err, data) => {\n      if (err.code) {\n        hilog.error(0x0000, 'testTag', 'Failed to load the content. Cause: %{public}s', JSON.stringify(err) ?? '');\n        return;\n      }\n      hilog.info(0x0000, 'testTag', 'Succeeded in loading the content. Data: %{public}s', JSON.stringify(data) ?? '');\n    });\n  }\n\n\nexport class User {\n  name?: string\n  age?: number\n}\n\n\n\nconst storage = LocalStorage.GetShared()\n\n@Entry(storage)\n@Component\nstruct Index {\n  @LocalStorageProp('user')\n  user: User = {}\n\n  build() {\n    Column({ space: 15 }) {\n      Text('Indexï¼š')\n      Text(this.user.name + this.user.age)\n        .onClick(()=>{\n          this.user.age ++\n        })\n      Navigator({ target: 'pages/OtherPage' }){\n        Text('Go Other Page')\n      }\n    }\n    .width('100%')\n    .height('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\n\nconst storage = LocalStorage.GetShared()\n\n@Entry(storage)\n@Component\nstruct OtherPage {\n  @LocalStorageLink('user')\n  user: User = {}\n\n  build() {\n    Column({ space: 15 }) {\n      Text('OtherPageï¼š')\n      Text(this.user.name + this.user.age)\n        .onClick(()=>{\n          this.user.age ++\n        })\n    }\n    .width('100%')\n    .height('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\nTIP\n * é¡µé¢é—´å…±äº«éœ€è¦è¦æ¨¡æ‹Ÿå™¨æµ‹è¯•\n * åº”ç”¨é€»è¾‘ä¸­ä½¿ç”¨å‚è€ƒ é“¾æŽ¥\n\n\n2. åº”ç”¨çŠ¶æ€-AppStorage#\n\n> AppStorage æ˜¯åº”ç”¨å…¨å±€çš„UIçŠ¶æ€å­˜å‚¨ï¼Œæ˜¯å’Œåº”ç”¨çš„è¿›ç¨‹ç»‘å®šçš„ï¼Œç”±UIæ¡†æž¶åœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶åˆ›å»ºï¼Œä¸ºåº”ç”¨ç¨‹åºUIçŠ¶æ€å±žæ€§æä¾›ä¸­å¤®å­˜å‚¨ã€‚\n\n * å¦‚æžœæ˜¯åˆå§‹åŒ–ä½¿ç”¨ AppStorage.SetOrCreate(key,value)\n * å•å‘ @StorageProp('user') ç»„ä»¶å†…å¯å˜\n * åŒå‘ @StorageLink('user') å…¨å±€å‡å¯å˜\n\n1ï¼‰é€šè¿‡UIè£…é¥°å™¨ä½¿ç”¨\n\n\n\nAppStorage.SetOrCreate('user', { name: 'jack', age: 18 })\n\n@Entry\n@Component\nstruct Index {\n  @StorageProp('user')\n  // å¯å¿½ç•¥ï¼Œç¼–è¾‘å™¨ç±»åž‹é”™è¯¯\n  user: User = {}\n\n  build() {\n    Column({ space: 15 }) {\n      Text('Indexï¼š')\n      Text(this.user.name + this.user.age)\n        .onClick(() => {\n          this.user.age++\n        })\n      Divider()\n      ChildA()\n    }\n    .width('100%')\n    .height('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n@Component\nstruct ChildA {\n  @StorageLink('user')\n  user: User = {}\n\n  build() {\n    Column({ space: 15 }){\n      Text('ChildAï¼š')\n      Text(this.user.name + this.user.age)\n        .onClick(()=>{\n          this.user.age ++\n        })\n    }\n  }\n}\n\n\n2ï¼‰é€šè¿‡é€»è¾‘ä½¿ç”¨\n\n * AppStorage.Get(key) èŽ·å–æ•°æ®\n * AppStorage.Set(key,value) è¦†ç›–æ•°æ®\n * const link: SubscribedAbstractProperty = AppStorage.Link(key) è¦†ç›–æ•°æ®\n   * link.set(value) ä¿®æ”¹\n   * link.get() èŽ·å–\n\n\n\n\nAppStorage.SetOrCreate('user', { name: 'jack', age: 18 })\n\n@Entry\n@Component\nstruct Index {\n  @StorageLink('user')\n  user: User = {}\n\n  build() {\n    Column({ space: 15 }) {\n      Text('Indexï¼š')\n      Text(this.user.name + this.user.age)\n        .onClick(() => {\n          this.user.age++\n        })\n      Divider()\n      Text('Get()')\n        .onClick(() => {\n          // ä»…èŽ·å–\n          const user = AppStorage.Get('user')\n          promptAction.showToast({\n            message: JSON.stringify(user)\n          })\n        })\n      Text('Set()')\n        .onClick(() => {\n          // ç›´æŽ¥è®¾ç½®\n          AppStorage.Set('user', {\n            name: 'tom',\n            age: 100\n          })\n          // è§‚å¯Ÿé¡µé¢æ›´æ–°æ²¡\n        })\n      Text('Link()')\n        .onClick(() => {\n          // èŽ·å–userçš„prop\n          const user: SubscribedAbstractProperty = AppStorage.Link('user')\n          user.set({\n            name: user.get().name,\n            // èŽ·å–åŽä¿®æ”¹\n            age: user.get().age + 1\n          })\n        })\n    }\n    .width('100%')\n    .height('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\n\n3. çŠ¶æ€æŒä¹…åŒ–-PersistentStorage#\n\n> PersistentStorage å°†é€‰å®šçš„ AppStorage å±žæ€§ä¿ç•™åœ¨è®¾å¤‡ç£ç›˜ä¸Šã€‚\n\nDETAILS\n\nUIå’Œä¸šåŠ¡é€»è¾‘ä¸ç›´æŽ¥è®¿é—® PersistentStorage ä¸­çš„å±žæ€§ï¼Œæ‰€æœ‰å±žæ€§è®¿é—®éƒ½æ˜¯å¯¹ AppStorage çš„è®¿é—®ï¼ŒAppStorage\nä¸­çš„æ›´æ”¹ä¼šè‡ªåŠ¨åŒæ­¥åˆ° PersistentStorageã€‚\n\nWARNING\n * æ”¯æŒï¼šnumber, string, boolean, enum ç­‰ç®€å•ç±»åž‹;\n * å¦‚æžœï¼šè¦æ”¯æŒå¯¹è±¡ç±»åž‹ï¼Œå¯ä»¥è½¬æ¢æˆjsonå­—ç¬¦ä¸²\n * æŒä¹…åŒ–å˜é‡æœ€å¥½æ˜¯å°äºŽ2kbçš„æ•°æ®ï¼Œå¦‚æžœå¼€å‘è€…éœ€è¦å­˜å‚¨å¤§é‡çš„æ•°æ®ï¼Œå»ºè®®ä½¿ç”¨æ•°æ®åº“apiã€‚\n\n1ï¼‰ç®€å•æ•°æ®ç±»åž‹çš„æŒä¹…åŒ–ï¼Œå’ŒèŽ·å–å’Œä¿®æ”¹\n\n\n\nPersistentStorage.PersistProp('count', 100)\n\n@Entry\n@Component\nstruct Index {\n  @StorageLink('count')\n  count: number = 0\n\n  build() {\n    Column({ space: 15 }) {\n      Text(this.count.toString())\n        .onClick(() => {\n          this.count++\n        })\n    }\n    .width('100%')\n    .height('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\n2ï¼‰å¤æ‚æ•°æ®ç±»åž‹çš„æŒä¹…åŒ–ï¼Œå’ŒèŽ·å–å’Œä¿®æ”¹\n\n\n\n\nPersistentStorage.PersistProp('userJson', `{ \"name\": \"jack\", \"age\": 18 }`)\n\n@Entry\n@Component\nstruct Index {\n  @StorageProp('userJson')\n  @Watch('onUpdateUser')\n  userJson: string = '{}'\n  @State\n  user: User = JSON.parse(this.userJson)\n\n  onUpdateUser() {\n    this.user = JSON.parse(this.userJson)\n  }\n\n  build() {\n    Column({ space: 15 }) {\n      Text('Indexï¼š')\n      Text(this.user.name + this.user.age)\n        .onClick(() => {\n          this.user.age++\n          // ä¿®æ”¹\n          AppStorage.Set('userJson', JSON.stringify(this.user))\n        })\n      Divider()\n      Text('Get()')\n        .onClick(() => {\n          // èŽ·å–\n          const user = AppStorage.Get('userJson')\n          promptAction.showToast({ message: user })\n        })\n    }\n    .width('100%')\n    .height('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\nTIP\n * æµ‹è¯•ï¼šéœ€è¦åœ¨çœŸæœºæˆ–æ¨¡æ‹Ÿå™¨è°ƒè¯•\n\n\n4. è®¾å¤‡çŽ¯å¢ƒ-Environment#\n\n> å¼€å‘è€…å¦‚æžœéœ€è¦åº”ç”¨ç¨‹åºè¿è¡Œçš„è®¾å¤‡çš„çŽ¯å¢ƒå‚æ•°ï¼Œä»¥æ­¤æ¥ä½œå‡ºä¸åŒçš„åœºæ™¯åˆ¤æ–­ï¼Œæ¯”å¦‚å¤šè¯­è¨€ï¼Œæš—é»‘æ¨¡å¼ç­‰ï¼Œéœ€è¦ç”¨åˆ° Environment è®¾å¤‡çŽ¯å¢ƒæŸ¥è¯¢ã€‚\n\n * Environment çš„æ‰€æœ‰å±žæ€§éƒ½æ˜¯ä¸å¯å˜çš„ï¼ˆå³åº”ç”¨ä¸å¯å†™å…¥ï¼‰ï¼Œæ‰€æœ‰çš„å±žæ€§éƒ½æ˜¯ç®€å•ç±»åž‹ã€‚\n\n\n// èŽ·å–ç³»ç»Ÿè¯­è¨€\nconst lang = i18n.getSystemLanguage()\n// è®¾ç½®çŽ¯å¢ƒçŠ¶æ€\nEnvironment.EnvProp('lang', lang);\n\n@Entry\n@Component\nstruct Index{\n  @StorageProp('lang')\n  lang: string = ''\n\n  build() {\n    Column() {\n      Text(this.lang)\n        .onClick(()=>{\n          // ä¸èƒ½ä¿®æ”¹\n          // Environment.EnvProp('lang', 'en');\n        })\n    }\n    .width('100%')\n    .height('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\n\nç½‘ç»œç®¡ç†#\n\n\n1. åº”ç”¨æƒé™#\n\n> ATM (AccessTokenManager) æ˜¯HarmonyOSä¸ŠåŸºäºŽAccessTokenæž„å»ºçš„ç»Ÿä¸€çš„åº”ç”¨æƒé™ç®¡ç†èƒ½åŠ›ã€‚\n\nåº”ç”¨æƒé™ä¿æŠ¤çš„å¯¹è±¡å¯ä»¥åˆ†ä¸ºæ•°æ®å’ŒåŠŸèƒ½ï¼š\n\n * æ•°æ®åŒ…å«äº†ä¸ªäººæ•°æ®ï¼ˆå¦‚ç…§ç‰‡ã€é€šè®¯å½•ã€æ—¥åŽ†ã€ä½ç½®ç­‰ï¼‰ã€è®¾å¤‡æ•°æ®ï¼ˆå¦‚è®¾å¤‡æ ‡è¯†ã€ç›¸æœºã€éº¦å…‹é£Žç­‰ï¼‰ã€åº”ç”¨æ•°æ®ã€‚\n\n * åŠŸèƒ½åˆ™åŒ…æ‹¬äº†è®¾å¤‡åŠŸèƒ½ï¼ˆå¦‚æ‰“ç”µè¯ã€å‘çŸ­ä¿¡ã€è”ç½‘ç­‰ï¼‰ã€åº”ç”¨åŠŸèƒ½ï¼ˆå¦‚å¼¹å‡ºæ‚¬æµ®æ¡†ã€åˆ›å»ºå¿«æ·æ–¹å¼ç­‰ï¼‰ç­‰ã€‚\n\næ ¹æ®æŽˆæƒæ–¹å¼çš„ä¸åŒï¼Œæƒé™ç±»åž‹å¯åˆ†ä¸ºsystem_grantï¼ˆç³»ç»ŸæŽˆæƒï¼‰å’Œuser_grantï¼ˆç”¨æˆ·æŽˆæƒï¼‰ã€‚\n\n * é…ç½®æ–‡ä»¶æƒé™å£°æ˜Ž\n\n * å‘ç”¨æˆ·ç”³è¯·æŽˆæƒ\n\nä¾‹å¦‚ï¼šè®¿é—®ç½‘ç»œéœ€è¦è”ç½‘æƒé™\n\n{\n  \"module\" : {\n    // ...\n    \"requestPermissions\":[\n      {\n        \"name\" : \"ohos.permission.INTERNET\"\n      }\n    ]\n  }\n}\n\n\nTIP\n * åº”ç”¨æƒé™åˆ—è¡¨\n\n\n2. HTTPè¯·æ±‚#\n\n> è¯·æ±‚æœåŠ¡å™¨éœ€è¦ä½¿ç”¨ IP åœ°å€ï¼Œæˆ–è€…åŸŸåã€‚ä¸å¯ä½¿ç”¨ localhost æˆ– 127.0.0.1\n\n1ï¼‰å¯åŠ¨ json-server æœåŠ¡ï¼Œnpm i json-server -g å…¨å±€å®‰è£…ã€‚\n\n * æ–°å»º data.json æ–‡ä»¶åœ¨ä»»æ„ç›®å½•ï¼Œæ¯”å¦‚ server æ–‡ä»¶å¤¹\n\n{\n  \"takeaway\": [\n    {\n      \"tag\": \"318569657\",\n      \"name\": \"ä¸€äººå¥—é¤\",\n      \"foods\": [\n        {\n          \"id\": 8078956697,\n          \"name\": \"çƒ¤ç¾Šè‚‰ä¸²(10ä¸²)\",\n          \"like_ratio_desc\": \"å¥½è¯„åº¦100%\",\n          \"month_saled\": 40,\n          \"unit\": \"10ä¸²\",\n          \"food_tag_list\": [\n            \"ç‚¹è¯„ç½‘å‹æŽ¨è\"\n          ],\n          \"price\": 90,\n          \"picture\": \"https://zqran.gitee.io/images/waimai/8078956697.jpg\",\n          \"description\": \"\",\n          \"tag\": \"318569657\",\n          \"count\": 1\n        },\n        {\n          \"id\": 7384994864,\n          \"name\": \"è…Šå‘³ç…²ä»”é¥­\",\n          \"like_ratio_desc\": \"å¥½è¯„åº¦81%\",\n          \"month_saled\": 100,\n          \"unit\": \"1äººä»½\",\n          \"food_tag_list\": [],\n          \"price\": 39,\n          \"picture\": \"https://zqran.gitee.io/images/waimai/7384994864.jpg\",\n          \"description\": \"\",\n          \"tag\": \"318569657\",\n          \"count\": 1\n        },\n        {\n          \"id\": 2305772036,\n          \"name\": \"é¸¡è…¿èƒ¡èåœç„–é¥­\",\n          \"like_ratio_desc\": \"å¥½è¯„åº¦91%\",\n          \"month_saled\": 300,\n          \"unit\": \"1äººä»½\",\n          \"food_tag_list\": [],\n          \"price\": 34.32,\n          \"picture\": \"https://zqran.gitee.io/images/waimai/2305772036.jpg\",\n          \"description\": \"ä¸»æ–™ï¼šå¤§ç±³ã€é¸¡è…¿ã€èœå¿ƒã€èƒ¡èåœ\",\n          \"tag\": \"318569657\",\n          \"count\": 1\n        },\n        {\n          \"id\": 2233861812,\n          \"name\": \"å°ä»½é…¸æ±¤èŽœé¢é±¼é±¼+è‚‰å¤¹é¦å¥—é¤\",\n          \"like_ratio_desc\": \"å¥½è¯„åº¦73%\",\n          \"month_saled\": 600,\n          \"unit\": \"1äººä»½\",\n          \"food_tag_list\": [\n            \"â€œå£å‘³å¥½,åŒ…è£…å¾ˆå¥½ï½žç‚¹èµžâ€\"\n          ],\n          \"price\": 34.32,\n          \"picture\": \"https://zqran.gitee.io/images/waimai/2233861812.jpg\",\n          \"description\": \"é…¸æ±¤èŽœé¢é±¼é±¼ï¼Œä¸»æ–™ï¼šé…¸æ±¤ã€èŽœé¢ è‚‰å¤¹é¦ï¼Œä¸»æ–™ï¼šç™½çš®é¥¼ã€çŒªè‚‰\",\n          \"tag\": \"318569657\",\n          \"count\": 1\n        }\n      ]\n    },\n    {\n      \"tag\": \"82022594\",\n      \"name\": \"ç‰¹è‰²çƒ§çƒ¤\",\n      \"foods\": [\n        {\n          \"id\": 3823780596,\n          \"name\": \"è—¤æ¤’é¸¡è‚‰ä¸²\",\n          \"like_ratio_desc\": \"\",\n          \"month_saled\": 200,\n          \"unit\": \"10ä¸²\",\n          \"food_tag_list\": [\n            \"ç‚¹è¯„ç½‘å‹æŽ¨è\"\n          ],\n          \"price\": 6,\n          \"picture\": \"https://zqran.gitee.io/images/waimai/3823780596.jpg\",\n          \"description\": \"1ä¸²ã€‚è—¤æ¤’å‘³ï¼Œä¸»æ–™ï¼šé¸¡è‚‰\",\n          \"tag\": \"82022594\",\n          \"count\": 1\n        },\n        {\n          \"id\": 6592009498,\n          \"name\": \"çƒ¤ç¾ŠæŽ’\",\n          \"like_ratio_desc\": \"\",\n          \"month_saled\": 50,\n          \"unit\": \"1äººä»½\",\n          \"food_tag_list\": [],\n          \"price\": 169,\n          \"picture\": \"https://zqran.gitee.io/images/waimai/6592009498.jpg\",\n          \"description\": \"6-8ä¸ªæœˆè‰åŽŸç¾”ç¾Šè‚‹æŽ’ï¼Œçƒ¤åˆ°çš®è„†è‚‰é¦™\",\n          \"tag\": \"82022594\",\n          \"count\": 1\n        }\n      ]\n    },\n    {\n      \"tag\": \"98147100\",\n      \"name\": \"æ‚ç²®ä¸»é£Ÿ\",\n      \"foods\": [\n        {\n          \"id\": 4056954171,\n          \"name\": \"äº”å¸¸ç¨»èŠ±é¦™ç±³é¥­\",\n          \"like_ratio_desc\": \"\",\n          \"month_saled\": 1000,\n          \"unit\": \"çº¦300å…‹\",\n          \"food_tag_list\": [],\n          \"price\": 5,\n          \"picture\": \"https://zqran.gitee.io/images/waimai/4056954171.jpg\",\n          \"description\": \"æµ“æµ“çš„ç¨»ç±³æ¸…é¦™ï¼Œè½¯ç³¯Qå¼¹æœ‰åš¼åŠ²\",\n          \"tag\": \"98147100\",\n          \"count\": 1\n        },\n        {\n          \"id\": 740430262,\n          \"name\": \"å°ç±³å‘ç³•(3ä¸ª)\",\n          \"like_ratio_desc\": \"å¥½è¯„åº¦100%\",\n          \"month_saled\": 100,\n          \"unit\": \"3å—\",\n          \"food_tag_list\": [],\n          \"price\": 13,\n          \"picture\": \"https://zqran.gitee.io/images/waimai/740430262.jpg\",\n          \"description\": \"æŸ”è½¯è“¬æ¾ï¼Œè‘¡è„å¹²å’Œè”“è¶ŠèŽ“é…¸ç”œé€‚å£\",\n          \"tag\": \"98147100\",\n          \"count\": 1\n        },\n        {\n          \"id\": 7466390504,\n          \"name\": \"æ²™æž£çŽ‰ç±³çªå¤´(3ä¸ª)\",\n          \"like_ratio_desc\": \"å¥½è¯„åº¦100%\",\n          \"month_saled\": 100,\n          \"unit\": \"3ä¸ª\",\n          \"food_tag_list\": [],\n          \"price\": 13,\n          \"picture\": \"https://zqran.gitee.io/images/waimai/7466390504.jpg\",\n          \"description\": \"\",\n          \"tag\": \"98147100\",\n          \"count\": 1\n        }\n      ]\n    }\n  ]\n}\n\n\n * è¿›å…¥ server æ–‡ä»¶å¤¹ï¼ŒæŒ‰ç…§ä¸‹é¢å‘½ä»¤å¯åŠ¨æŽ¥å£æœåŠ¡å™¨ï¼ŒæŸ¥çœ‹æœ¬æœºIP ipconfig | ifconfig\n\njson-server data.json --host 192.168.0.1\n\n\n2ï¼‰ä½¿ç”¨ @ohos.net.http æ¨¡å—å‘è¯·æ±‚\n\nTIP\n\nå¤‡ç”¨åœ°å€ï¼šhttps://zhoushugang.gitee.io/fe2022/takeaway.json\n\n\n\nconst req = http.createHttp()\nreq.request('https://zhoushugang.gitee.io/fe2022/takeaway.json')\n  .then(res => {\n    console.log('MEITUAN', res.result.toString().replace(/\\n/g, '').substr(0, 250))  // === 3  æ³¨æ„ï¼šå­—ç¬¦é•¿åº¦å¤§äºŽ1024å­—èŠ‚ï¼ŒæŽ§åˆ¶å°ä¸å¯è§ã€‚\n    const data = JSON.parse(res.result as string)\n    console.log('MEITUAN', data.length)\n  })\n  .catch(err => {\n    console.error('MEITUAN', err.message)\n  })\n","frontmatter":{"title":"HM - é¸¿è’™-çŠ¶æ€ç®¡ç†"},"version":""},{"id":5,"title":"HM - é¸¿è’™-çŸ¥ä¹Žè¯„è®º","routePath":"/interview-handbook-project/guide/zhihu","lang":"","toc":[{"text":"é˜¶æ®µæ¡ˆä¾‹-çŸ¥ä¹Žå›žå¤","id":"é˜¶æ®µæ¡ˆä¾‹-çŸ¥ä¹Žå›žå¤","depth":2,"charIndex":3},{"text":"1. åº•éƒ¨è¾“å…¥åŒºåŸŸ","id":"1-åº•éƒ¨è¾“å…¥åŒºåŸŸ","depth":3,"charIndex":16},{"text":"2. é™æ€å›žå¤åˆ—è¡¨","id":"2-é™æ€å›žå¤åˆ—è¡¨","depth":3,"charIndex":2471},{"text":"3. å®žçŽ°æ¸²æŸ“","id":"3-å®žçŽ°æ¸²æŸ“","depth":3,"charIndex":3571},{"text":"4. å®žçŽ°ç‚¹èµž","id":"4-å®žçŽ°ç‚¹èµž","depth":3,"charIndex":8325},{"text":"6. è¿›è¡Œå›žå¤","id":"6-è¿›è¡Œå›žå¤","depth":3,"charIndex":9074}],"domain":"","content":"#\n\n\né˜¶æ®µæ¡ˆä¾‹-çŸ¥ä¹Žå›žå¤#\n\n\n1. åº•éƒ¨è¾“å…¥åŒºåŸŸ#\n\n * æŠ½ç¦» Nav Comment ç»„ä»¶\n * ä½¿ç”¨ Stack ç»„ä»¶åº•éƒ¨è¾“å…¥æ¡†å›ºå®šåœ¨ä¸‹æ–¹\n * åŠ ä¸Š Scroll å°†æ¥é¡µé¢å†…å®¹å¯ä»¥æ»šåŠ¨\n\n@Entry\n@Component\nstruct Index {\n  build() {\n    Stack({ alignContent: Alignment.Bottom }) {\n      Column() {\n        Scroll() {\n          Column() {\n            // å¯¼èˆª\n            NavComp()\n            // è¯„è®º\n            CommentComp()\n            // åˆ†å‰²çº¿\n            Divider()\n              .strokeWidth(8)\n              .color('#f5f5f5')\n            // å›žå¤åˆ—è¡¨\n            \n          }\n          .padding({ bottom: 50 })\n        }\n      }\n      .width('100%')\n      .height('100%')\n\n      Row({ space: 15 }){\n        TextInput({ placeholder: 'å›žå¤~' })\n          .layoutWeight(1)\n        Text('å‘å¸ƒ')\n          .fontColor('#069')\n      }\n      .padding({ left: 15, right: 15 })\n      .width('100%')\n      .height(50)\n      .backgroundColor('#fff')\n      .border({ width: { top: 0.5 }, color: '#e4e4e4' })\n    }\n\n  }\n}\n\n// å¯¼èˆª\n@Component\nstruct NavComp {\n  build() {\n    Row() {\n      Row() {\n        Image($r('app.media.ic_public_arrow_left'))\n          .width(16)\n          .aspectRatio(1)\n        // svg å›¾æ ‡å¯ä»¥ä½¿ç”¨å¡«å……é¢œè‰²\n        // .fillColor('red')\n      }\n      .width(24)\n      .aspectRatio(1)\n      .backgroundColor('#f5f5f5')\n      .borderRadius(12)\n      .justifyContent(FlexAlign.Center)\n      .margin({ left: 16 })\n\n      Text('è¯„è®ºå›žå¤')\n        .layoutWeight(1)\n        .textAlign(TextAlign.Center)\n        .padding({ right: 40 })\n    }\n    .height(40)\n    .border({ width: { bottom: 0.5 }, color: '#e4e4e4' })\n  }\n}\n\n// è¯„è®º\n@Component\nstruct CommentComp {\n  build() {\n    Row() {\n      Image($r('app.media.avatar'))\n        .width(32)\n        .aspectRatio(1)\n        .borderRadius(16)\n      Column({ space: 5 }) {\n        Text('å‘¨æ°ä¼¦')\n          .width('100%')\n          .fontWeight(FontWeight.Bold)\n          .fontSize(15)\n        Text('å¤§ç†çŸ³èƒ½é›•åˆ»å‡ºè‚Œè‚‰å’Œçš®è‚¤çš„è´¨æ„Ÿï¼Œé‚£ä¸ªå¹´ä»£çš„å·¥åŒ å¥½ç‰›å•Š')\n          .width('100%')\n        Row() {\n          Text('10-21 Â· IPå±žåœ°åŒ—äº¬')\n            .fontSize(12)\n            .fontColor('#c3c4c5')\n          Row({ space: 4 }) {\n            Image($r('app.media.ic_public_heart'))\n              .width(14)\n              .aspectRatio(1)\n              .fillColor('#c3c4c5')\n            Text('100')\n              .fontSize(12)\n              .fontColor('#c3c4c5')\n          }\n        }\n        .width('100%')\n        .justifyContent(FlexAlign.SpaceBetween)\n      }\n      .layoutWeight(1)\n      .padding({ left: 10 })\n    }\n    .padding(15)\n    .alignItems(VerticalAlign.Top)\n  }\n}\n\n\n\n2. é™æ€å›žå¤åˆ—è¡¨#\n\n * å‚è€ƒè¯„è®ºç»„ä»¶ï¼Œä½¿ç”¨ ForEach å¾ªçŽ¯ç›¸åŒçš„å›žå¤å®¹å™¨\n\nColumn() {\n  Text('å›žå¤ 100')\n    .width('100%')\n    .fontWeight(600)\n  ForEach([1, 2, 3, 4, 5, 6, 7], () => {\n    Row() {\n      Image($r('app.media.avatar'))\n        .width(32)\n        .aspectRatio(1)\n        .borderRadius(16)\n      Column({ space: 5 }) {\n        Text('å‘¨æ°ä¼¦')\n          .width('100%')\n          .fontWeight(FontWeight.Bold)\n          .fontSize(15)\n        Text('å¤§ç†çŸ³èƒ½é›•åˆ»å‡ºè‚Œè‚‰å’Œçš®è‚¤çš„è´¨æ„Ÿï¼Œé‚£ä¸ªå¹´ä»£çš„å·¥åŒ å¥½ç‰›å•Š')\n          .width('100%')\n        Row() {\n          Text('10-21 Â· IPå±žåœ°åŒ—äº¬')\n            .fontSize(12)\n            .fontColor('#c3c4c5')\n          Row({ space: 4 }) {\n            Image($r('app.media.ic_public_heart'))\n              .width(14)\n              .aspectRatio(1)\n              .fillColor('#c3c4c5')\n            Text('100')\n              .fontSize(12)\n              .fontColor('#c3c4c5')\n          }\n        }\n        .width('100%')\n        .justifyContent(FlexAlign.SpaceBetween)\n      }\n      .layoutWeight(1)\n      .padding({ left: 10 })\n    }\n    .padding({ top: 15, bottom: 15 })\n    .alignItems(VerticalAlign.Top)\n  })\n\n}\n.padding(15)\n\n\n\n3. å®žçŽ°æ¸²æŸ“#\n\n * ä½¿ç”¨ class å®šä¹‰å¥½å›žå¤æ•°æ®æ¨¡åž‹ ReplyItem\n * åˆå§‹åŒ–ä¸€äº›æ¨¡æ‹Ÿæ•°æ®\n * å®Œæˆé¡µé¢æ¸²æŸ“\n\nexport class ReplyItem {\n  id: number\n  avatar: string\n  author: string\n  content: string\n  time: string\n  area: string\n  likeNum: number\n  likeFlag?: boolean\n}\n\nexport const replyList: ReplyItem[] = [\n  {\n    id: 1,\n    avatar: 'https://picx.zhimg.com/027729d02bdf060e24973c3726fea9da_l.jpg?source=06d4cd63',\n    author: 'åæ‰§ç‹‚-å¦„æƒ³å®¶',\n    content: 'æ›´ä½•å†µè¿˜åˆ†åˆ°ä¸€ä¸ªæ‘©æ´›å“¥[æƒŠå–œ]',\n    time: '11-30',\n    area: 'æµ·å—',\n    likeNum: 34\n  },\n  {\n    id: 2,\n    avatar: 'https://pic1.zhimg.com/v2-5a3f5190369ae59c12bee33abfe0c5cc_xl.jpg?source=32738c0c',\n    author: 'William',\n    content: 'å½“å¹´å¸Œè…Šå¯æ˜¯æŠŠ1ï¼š0å‘æŒ¥åˆ°æžè‡´äº†',\n    time: '11-29',\n    area: 'åŒ—äº¬',\n    likeNum: 58\n  },\n  {\n    id: 3,\n    avatar: 'https://picx.zhimg.com/v2-e6f4605c16e4378572a96dad7eaaf2b0_l.jpg?source=06d4cd63',\n    author: 'Andy Garcia',\n    content: 'æ¬§æ´²æ¯å…¶å®ž16é˜Ÿçƒé˜Ÿæ‰“æ­£èµ›å·²ç»å·®ä¸å¤šï¼Œ24é˜Ÿæ‰“æ­£èµ›æ„å‘³ç€æ­£èµ›é˜¶æ®µåœ¨å°ç»„èµ›ä¸€æ ·æœ‰å¼±é˜Ÿã€‚',\n    time: '11-28',\n    area: 'ä¸Šæµ·',\n    likeNum: 10\n  },\n  {\n    id: 4,\n    avatar: 'https://picx.zhimg.com/v2-53e7cf84228e26f419d924c2bf8d5d70_l.jpg?source=06d4cd63',\n    author: 'æ­£å®—å¥½é±¼å¤´',\n    content: 'ç¡®å®žçœ¼çº¢å•Šï¼Œäºšæ´²å°±æ²¡è¿™ç§çƒé˜Ÿï¼Œè®©ä¸­å›½é˜Ÿåˆ·',\n    time: '11-27',\n    area: 'é¦™æ¸¯',\n    likeNum: 139\n  },\n  {\n    id: 5,\n    avatar: 'https://pic1.zhimg.com/v2-eeddfaae049df2a407ff37540894c8ce_l.jpg?source=06d4cd63',\n    author: 'æŸ±å­å“¥',\n    content: 'æˆ‘æ˜¯æ”¯æŒæ‰©å¤§çš„ï¼Œäºšæ´²æ¯æ¬§æ´²æ¯æ‰©åˆ°32é˜Ÿï¼Œä¸–ç•Œæ¯æ‰©åˆ°64é˜Ÿæ‰æ˜¯å¥½çš„ï¼Œä¸–ç•Œä¸Šæœ‰è¶…è¿‡200æ”¯é˜Ÿä¼ï¼Œæ¬§æ´²åŒº55æ”¯é˜Ÿä¼ï¼Œäºšæ´²åŒº47æ”¯é˜Ÿä¼ï¼Œå³ä½¿å¦‚æ­¤ä¹Ÿå°±å…­æˆå‡ºçŽ°çŽ‡',\n    time: '11-27',\n    area: 'æ—§é‡‘å±±',\n    likeNum: 29\n  },\n  {\n    id: 6,\n    avatar: 'https://picx.zhimg.com/v2-fab3da929232ae911e92bf8137d11f3a_l.jpg?source=06d4cd63',\n    author: 'é£žè½©é€¸',\n    content: 'ç¦æ­¢æ¬§æ´²æ¯æ‰©å†›ä¹‹å‰ï¼Œåº”è¯¥å…ˆç¦æ­¢ä¸–ç•Œæ¯æ‰©å†›ï¼Œæˆ–è€…è‡³å°‘æŠŠäºšæ´²åé¢ä¸€åŠç»™æ¬§æ´²ã€‚',\n    time: '11-26',\n    area: 'é‡Œçº¦',\n    likeNum: 100\n  }\n]\n\n\n\n@Entry\n@Component\nstruct Index {\n\n  @State\n  replyList: ReplyItem[] = replyList\n\n  build() {\n    Stack({ alignContent: Alignment.Bottom }) {\n      Column() {\n        Scroll() {\n          Column() {\n            // å¯¼èˆª\n            NavComp()\n            // è¯„è®º\n            CommentComp()\n            // åˆ†å‰²çº¿\n            Divider()\n              .strokeWidth(8)\n              .color('#f5f5f5')\n            // å›žå¤åˆ—è¡¨\n            Column() {\n              Text('å›žå¤ 100')\n                .width('100%')\n                .fontWeight(600)\n              ForEach(\n                this.replyList, \n                (item: ReplyItem) => {\n                  Row() {\n                    Image(item.avatar)\n                      .width(32)\n                      .aspectRatio(1)\n                      .borderRadius(16)\n                    Column({ space: 5 }) {\n                      Text(item.author)\n                        .width('100%')\n                        .fontWeight(FontWeight.Bold)\n                        .fontSize(15)\n                      Text(item.content)\n                        .width('100%')\n                      Row() {\n                        Text(`${item.time} Â· IPå±žåœ°${item.area}`)\n                          .fontSize(12)\n                          .fontColor('#c3c4c5')\n                        Row({ space: 4 }) {\n                          Image($r('app.media.ic_public_heart'))\n                            .width(14)\n                            .aspectRatio(1)\n                            .fillColor('#c3c4c5')\n                          Text(item.likeNum.toString())\n                            .fontSize(12)\n                            .fontColor('#c3c4c5')\n                        }\n                      }\n                      .width('100%')\n                      .justifyContent(FlexAlign.SpaceBetween)\n                    }\n                    .layoutWeight(1)\n                    .padding({ left: 10 })\n                  }\n                  .padding({ top: 15, bottom: 15 })\n                  .alignItems(VerticalAlign.Top)\n                },\n                // key æœ‰é»˜è®¤ä½ è§„åˆ™\n                // key ä¸ºäº†å…ƒç´ å¤ç”¨\n                // å¦‚æžœæ²¡æœ‰å†™ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªkeyï¼Œindex_ + JSON.stringify(item)ï¼Œä¸å»ºè®®ä¸å†™\n                // (item: ReplyItem) => item.id.toString() å†™ä¸€ä¸ªIDåšå”¯ä¸€æ ‡è¯†ï¼Œéœ€è¦keyä¹Ÿæ›´æ–°æ‰èƒ½æ›´æ–°å¯¹åº”UI\n                // item => id + likeNum + likeFlag æŠŠéœ€è¦æ›´æ–°çš„å­—æ®µåˆåœ¨ä¸€èµ·å½“åškey\n                // ({ id, likeNum, likeFlag }) => JSON.stringify({ id, likeNum, likeFlag })\n\n                // å­¦ä¹ äº† @Observed @ObjectLink è¿™æ ·ä¹Ÿå¯ä»¥æ›´æ–°~\n                // (item: ReplyItem) => item.id.toString()\n              )\n\n            }\n            .padding(15)\n          }\n          .padding({ bottom: 50 })\n        }\n      }\n      .width('100%')\n      .height('100%')\n\n      Row({ space: 15 }){\n        TextInput({ placeholder: 'å›žå¤~' })\n          .layoutWeight(1)\n        Text('å‘å¸ƒ')\n          .fontColor('#069')\n      }\n      .padding({ left: 15, right: 15 })\n      .width('100%')\n      .height(50)\n      .backgroundColor('#fff')\n      .border({ width: { top: 0.5 }, color: '#e4e4e4' })\n    }\n\n  }\n}\n\n\n\n4. å®žçŽ°ç‚¹èµž#\n\n * æ³¨å†Œç‚¹èµžåŒºåŸŸç‚¹å‡»äº‹ä»¶\n * é€šè¿‡ç´¢å¼•å¤åˆ¶çš„æ–¹å¼å®Œæˆæ•°æ®çš„æ›´æ–°å’ŒUIçš„æ›´æ–°\n\nonLike(item: ReplyItem) {\n  const reply = { ...item }\n  if (reply.likeFlag) {\n    reply.likeNum--\n    reply.likeFlag = false\n    promptAction.showToast({ message: 'å–æ¶ˆç‚¹èµž' })\n  } else {\n    reply.likeNum++\n    reply.likeFlag = true\n    promptAction.showToast({ message: 'ç‚¹èµžæˆåŠŸ' })\n  }\n  const index = this.replyList.findIndex(rep => rep.id === reply.id)\n  this.replyList[index] = reply\n}\n\n\nRow({ space: 4 }) {\n  Image($r('app.media.heart'))\n    .width(14)\n    .height(14)\n    .fillColor(item.likeFlag ? '#ff6600' : '#c3c4c5')\n    .margin({ right: 4 })\n  Text(item.likeNum.toString())\n    .fontSize(14)\n    .fontColor(item.likeFlag ? '#ff6600' : '#c3c4c5')\n}\n.onClick(() => {\n  this.onLike(item)\n})\n\n\n\n6. è¿›è¡Œå›žå¤#\n\n * æ”¶é›†è¾“å…¥æ¡†æ•°æ®\n * å‘å¸ƒè¯„è®ºå†…å®¹ï¼Œå’Œæƒ…å†µè¾“å…¥å†…å®¹\n * éœ€è¦æ‰©å±•å¤´åƒç±»åž‹å…¼å®¹ Resource ç±»åž‹\n\nexport class ReplyItem {\n  id: number\n+  avatar: string | Resource\n  author: string\n  content: string\n  time: string\n  area: string\n  likeNum: number\n  likeFlag?: boolean\n}\n\n\nonReply () {\n  const reply: ReplyItem = {\n    id: Math.random(),\n    content: this.content,\n    author: 'Zhousg',\n    avatar: $r('app.media.avatar'),\n    time: '12-01',\n    likeNum: 0,\n    area: 'åŒ—äº¬'\n  }\n  this.replyList.unshift(reply)\n  this.content = ''\n  promptAction.showToast({ message: 'å›žå¤æˆåŠŸ' })\n}\n\n\nRow({ spcae: 15 }) {\n  TextInput({ placeholder: 'å›žå¤~', text: this.content })\n    .placeholderColor('#c3c4c5')\n    .layoutWeight(1)\n    .onChange((value) => {\n      this.content = value\n    })\n  Text('å‘å¸ƒ')\n    .fontSize(14)\n    .fontColor('#09f')\n    .onClick(()=>{\n      this.onReply()\n    })\n}\n","frontmatter":{"title":"HM - é¸¿è’™-çŸ¥ä¹Žè¯„è®º"},"version":""},{"id":7,"title":"HM - é¢è¯•å®å…¸APP-é¦–é¡µæ¨¡å—","routePath":"/interview-handbook-project/project/home","lang":"","toc":[{"text":"é¦–é¡µæ¨¡å—","id":"é¦–é¡µæ¨¡å—","depth":2,"charIndex":3},{"text":"1. é™æ€ç»“æž„","id":"1-é™æ€ç»“æž„","depth":3,"charIndex":11},{"text":"2. åˆ†ç±» Tabs åŠ¨æ€å±•ç¤º","id":"2-åˆ†ç±»-tabs-åŠ¨æ€å±•ç¤º","depth":3,"charIndex":1770},{"text":"3. è¯•é¢˜åˆ—è¡¨ç»„ä»¶æŠ½å–","id":"3-è¯•é¢˜åˆ—è¡¨ç»„ä»¶æŠ½å–","depth":3,"charIndex":3688},{"text":"4. è¯•é¢˜åˆ—è¡¨åŠ è½½","id":"4-è¯•é¢˜åˆ—è¡¨åŠ è½½","depth":3,"charIndex":6103},{"text":"5. åŠ è½½æ›´å¤š","id":"5-åŠ è½½æ›´å¤š","depth":3,"charIndex":9049},{"text":"6. LazyForEach æ€§èƒ½ä¼˜åŒ–","id":"6-lazyforeach-æ€§èƒ½ä¼˜åŒ–","depth":3,"charIndex":10132}],"domain":"","content":"#\n\n\né¦–é¡µæ¨¡å—#\n\n\n1. é™æ€ç»“æž„#\n\n1ï¼‰è½®æ’­å›¾\n\nRow() {\n  Swiper() {\n    Flex() {\n      Image('/common/images/banner_ai.png')\n        .objectFit(ImageFit.Fill)\n    }\n    .padding({ left: vp2vp(15), right: vp2vp(15) })\n\n    Flex() {\n      Image('/common/images/banner_pj.png')\n        .objectFit(ImageFit.Fill)\n    }\n    .padding({ left: vp2vp(15), right: vp2vp(15) })\n\n    Flex() {\n      Image('/common/images/banner_qa.png')\n        .objectFit(ImageFit.Fill)\n    }\n    .padding({ left: vp2vp(15), right: vp2vp(15) })\n  }\n  .autoPlay(true)\n  .indicator(false)\n}\n.aspectRatio(2.8)\n\n\n2ï¼‰éª¨æž¶æ•ˆæžœ\n\n  @Builder\n  SkeletonBuilder() {\n    Column() {\n      Row({ space: vp2vp(15) }) {\n        IvSkeleton()\n        IvSkeleton({ widthValue: vp2vp(60) })\n        IvSkeleton({ widthValue: vp2vp(80) })\n      }\n      .width('100%')\n      .margin({ bottom: vp2vp(15) })\n\n      List({ space: vp2vp(15) }){\n        ForEach([1, 2, 3, 4, 5, 6, 7], () => {\n          ListItem(){\n            Column({ space: vp2vp(15) }){\n              Row({ space: vp2vp(15) }){\n                IvSkeleton({ widthValue: vp2vp(30) })\n                IvSkeleton({ widthValue: '100%' }).layoutWeight(1)\n              }\n              Row({ space: vp2vp(15) }){\n                IvSkeleton({ widthValue: vp2vp(50) })\n                IvSkeleton({ widthValue: vp2vp(50) })\n                IvSkeleton({ widthValue: vp2vp(50) })\n              }\n              .width('100%')\n            }\n            .padding({ top: vp2vp(10), bottom: vp2vp(10) })\n          }\n        })\n      }\n      .divider({ strokeWidth: 0.5, color: $r('app.color.gray_bg') })\n    }\n    .width('100%')\n    .padding(vp2vp(15))\n    .layoutWeight(1)\n  }\n\n\n  @State\n  loading: boolean = false\n\n\n  if (this.loading) {\n    this.SkeletonBuilder()\n  } else {\n    // Tabs\n  }\n\n\n\n2. åˆ†ç±» Tabs åŠ¨æ€å±•ç¤º#\n\n1ï¼‰æ•°æ®ç±»åž‹\n\nexport class TagModel {\n  tagName: string\n  nameColor: string\n  borderColor: string\n}\n\nexport class QuestionTypeModel {\n  public id: number\n  public name: string\n  public icon?: string\n  public describeInfo?: string\n  public displayNewestFlag?: 0 | 1\n  public tags?: TagModel[]\n}\n\n\n3ï¼‰ èŽ·å–æ•°æ®\n\n  @State\n  questionTypeList: QuestionTypeModel[] = []\n  @State\n  activeIndex: number = 0\n\n  aboutToAppear() {\n    this.loading = true\n    Request.get('question/type')\n      .then(res => {\n        this.questionTypeList = res.data\n      })\n      .finally(() => {\n        this.loading = false\n      })\n  }\n\n\n4ï¼‰æ¸²æŸ“ tabs\n\n    if (this.loading) {\n        this.SkeletonBuilder()\n      } else {\n        Tabs() {\n          ForEach(this.questionTypeList, (item: QuestionTypeModel, index) => {\n            TabContent() {\n              // åˆ—è¡¨ç»„ä»¶\n            }\n            .tabBar(this.TabItemBuilder(item, index))\n            .height('100%')\n          })\n        }\n        .layoutWeight(1)\n        .barMode(BarMode.Scrollable)\n        .onChange(i => this.activeIndex = i)\n      }\n\n\n5ï¼‰è‡ªå®šä¹‰æž„å»ºå‡½æ•°\n\n\n  @Builder\n  TabItemBuilder(q: QuestionTypeModel, index: number) {\n    Row() {\n      Stack({ alignContent: Alignment.Bottom }) {\n        Text(q.name)\n          .fontSize(vp2vp(15))\n          .height(vp2vp(44))\n          .fontColor(this.activeIndex === index ? $r('app.color.black') : $r('app.color.gray'))\n        Text()\n          .width(this.activeIndex === index ? vp2vp(20) : 0)\n          .height(vp2vp(2))\n          .backgroundColor($r('app.color.black'))\n          .animation({ duration: this.activeIndex === index ? 300 : 0 })\n      }\n      .padding({ left: vp2vp(index === 0 ? 15 : 0) })\n\n      if (q.displayNewestFlag === 1) {\n        Image($r('app.media.new'))\n          .width(vp2vp(34))\n          .height(vp2vp(14))\n          .padding({ left: vp2vp(5) })\n      }\n    }\n    .padding({ right: vp2vp(15) })\n  }\n\n\n\n3. è¯•é¢˜åˆ—è¡¨ç»„ä»¶æŠ½å–#\n\n1ï¼‰æ ‡ç­¾ç»„ä»¶\n\n\n\n@Component\nexport struct IvTag {\n  text: string\n  difficulty: number = 1\n\n  getTag() {\n    if (this.difficulty === 3 || this.difficulty === 4) {\n      return { text: 'ä¸€èˆ¬', color: $r('app.color.blue') }\n    } else if (this.difficulty === 5) {\n      return { text: 'å›°éš¾', color: $r('app.color.orange') }\n    }\n    return { text: this.text ? this.text : 'ç®€å•', color: $r('app.color.green') }\n  }\n\n  build() {\n    Text(this.getTag().text)\n      .fontColor(this.getTag().color)\n      .fontSize(vp2vp(10))\n      .width(vp2vp(34))\n      .height(vp2vp(18))\n      .backgroundColor($r('app.color.gray_bg'))\n      .borderRadius(vp2vp(2))\n      .textAlign(TextAlign.Center)\n      .margin({ right: vp2vp(7) })\n  }\n}\n\n\n2ï¼‰è¯•é¢˜é¡¹ç»„ä»¶\n\n\n\n\n\n@Component\nexport struct IvQuestionItem {\n  @Builder\n  SplitBuilder() {\n    Text('|')\n      .width(vp2vp(30))\n      .textAlign(TextAlign.Center)\n      .fontColor('#C3C3C5')\n      .fontSize(vp2vp(12))\n  }\n\n  @Builder\n  TextBuilder(text: string) {\n    Text(text)\n      .fontColor('#C3C3C5')\n      .fontSize(vp2vp(12))\n  }\n\n  build() {\n    Column() {\n      Row() {\n        IvTag({ difficulty: 4 })\n        Text('é—­åŒ…ä½ æ˜¯æ€Žä¹ˆç†è§£çš„ï¼Ÿ')\n          .fontSize(vp2vp(15))\n          .layoutWeight(1)\n          .textOverflow({ overflow: TextOverflow.Ellipsis })\n          .maxLines(1)\n      }.width('100%')\n\n      Row() {\n        this.TextBuilder(`ç‚¹èµž 100`)\n        this.SplitBuilder()\n        this.TextBuilder(`æµè§ˆ 200`)\n        this.SplitBuilder()\n        this.TextBuilder(`å·²çœ‹è¿‡`)\n      }\n      .width('100%')\n      .margin({ top: vp2vp(10) })\n    }\n    .height(vp2vp(80))\n    .justifyContent(FlexAlign.Center)\n    .width('100%')\n    .onClick(() => {\n      Auth.pushUrl({\n        url: 'pages/QuestionDetail',\n      })\n    })\n  }\n}\n\n\n3ï¼‰è¯•é¢˜åˆ—è¡¨ç»„ä»¶\n\n\n\n\n@Component\nexport struct IvQuestionList {\n  build() {\n    List() {\n      ForEach([1, 2, 3, 4, 5, 6, 7, 8], () => {\n        ListItem() {\n          IvQuestionItem()\n        }\n      })\n    }\n    .divider({\n      strokeWidth: 0.5,\n      color: $r('app.color.gray_bg')\n    })\n    .padding({ left: vp2vp(15), right: vp2vp(15) })\n    .height('100%')\n    .width('100%')\n  }\n}\n\n\n4ï¼‰é¦–é¡µä½¿ç”¨ç»„ä»¶\n\n          ForEach(this.questionTypeList, (item: QuestionTypeModel, index) => {\n            TabContent() {\n              // åˆ—è¡¨ç»„ä»¶\n              IvQuestionList()\n            }\n            .tabBar(this.TabItemBuilder(item, index))\n            .height('100%')\n          })\n\n\n\n4. è¯•é¢˜åˆ—è¡¨åŠ è½½#\n\n1ï¼‰è¯·æ±‚å‚æ•°ç±»åž‹\n\nexport class QueryQuestionListParams {\n  type: number\n  page: number\n  questionBankType: number\n  sort?: number\n  keyword?: string\n}\n\n@Observed\nexport class QuestionItemModel {\n  public id: string\n  public stem: string\n  public difficulty: number\n  public likeCount: number\n  public views: number\n  public readFlag?: 0 | 1\n}\n\n\n2ï¼‰è¯•é¢˜åˆ—è¡¨ç»„ä»¶\n\n\n\n\n\n\n\n@Component\nexport struct IvQuestionList {\n  @Prop\n  questionType: number\n  @Prop\n  @Watch('initQuestionList')\n  activeIndex: number\n  @Prop\n  selfIndex: number\n\n  params: QueryQuestionListParams = {\n    questionBankType: 10,\n    type: this.questionType,\n    page: 1,\n    sort: 0,\n  }\n  @State\n  questionList: QuestionItemModel[] = []\n\n  aboutToAppear() {\n    this.initQuestionList()\n  }\n\n  initQuestionList () {\n    if (this.activeIndex === this.selfIndex && this.questionList.length === 0) {\n      this.getQuestionList(this.params)\n    }\n  }\n\n  getQuestionList() {\n    return Request.get<{\n      total: number,\n      pageTotal: number,\n      rows: QuestionItemModel[]\n    }>('question/list', this.params)\n      .then(res => {\n        this.questionList = res.data.rows\n      })\n      .catch(e => {\n        promptAction.showToast({ message: JSON.stringify(e) })\n      })\n  }\n\n  build() {\n    List() {\n      ForEach(this.questionList, (item: QuestionItemModel) => {\n        ListItem() {\n          IvQuestionItem({ item })\n        }\n      },\n        ({id, likeCount, readFlag, views}: QuestionItemModel) => {\n          return JSON.stringify({ id, likeCount, readFlag, views })\n        }\n      )\n    }\n    .divider({\n      strokeWidth: 0.5,\n      color: $r('app.color.gray_bg')\n    })\n    .padding({ left: vp2vp(15), right: vp2vp(15) })\n    .height('100%')\n    .width('100%')\n  }\n}\n\n\n3ï¼‰è¯•é¢˜é€‰é¡¹ç»„ä»¶\n\n\n\n\n\n\n@Component\nexport struct IvQuestionItem {\n  @ObjectLink\n  item: QuestionItemModel\n\n  @Builder\n  SplitBuilder() {\n    Text('|')\n      .width(vp2vp(30))\n      .textAlign(TextAlign.Center)\n      .fontColor('#C3C3C5')\n      .fontSize(vp2vp(12))\n  }\n\n  @Builder\n  TextBuilder(text: string) {\n    Text(text)\n      .fontColor('#C3C3C5')\n      .fontSize(vp2vp(12))\n  }\n\n  build() {\n    Column() {\n      Row() {\n        IvTag({ difficulty: this.item.difficulty })\n        Text(this.item.stem)\n          .fontSize(vp2vp(15))\n          .layoutWeight(1)\n          .textOverflow({ overflow: TextOverflow.Ellipsis })\n          .maxLines(1)\n      }.width('100%')\n\n      Row() {\n        this.TextBuilder(`ç‚¹èµž ${this.item.likeCount}`)\n        this.SplitBuilder()\n        this.TextBuilder(`æµè§ˆ ${this.item.views}`)\n        this.SplitBuilder()\n        if (this.item.readFlag === 1) {\n          this.TextBuilder(`å·²çœ‹è¿‡`)\n        }\n      }\n      .width('100%')\n      .margin({ top: vp2vp(10) })\n    }\n    .height(vp2vp(80))\n    .justifyContent(FlexAlign.Center)\n    .width('100%')\n    .onClick(() => {\n      Auth.pushUrl({\n        url: 'pages/QuestionDetail',\n        params: this.item\n      })\n    })\n  }\n}\n\n\n\n5. åŠ è½½æ›´å¤š#\n\n1ï¼‰åŠ è½½å’Œå®ŒæˆçŠ¶æ€\n\n  @State\n  finished: boolean = false\n  @State\n  loading: boolean = false\n\n\n2ï¼‰åˆ¤æ–­æ˜¯å¦å¯ä»¥åŠ è½½æ›´å¤š\n\n  getQuestionList() {\n+    if (this.loading || this.finished)  return\n\n\n        if ( this.params.page < res.data.pageTotal ) {\n          this.params.page ++\n        } else {\n          this.finished = true\n        }\n        this.loading = false\n\n\n3ï¼‰ç›‘å¬æ»šåŠ¨åˆ°æœ€ä¸‹æ–¹\n\n    .onReachEnd(() => {\n      this.getQuestionList()\n    })\n\n\n4ï¼‰åŠ ä¸ŠåŠ è½½UIç»“æž„\n\n@Builder\n  LoadingBuilder () {\n    if (this.finished) {\n      Row() {\n        Text('æ²¡æœ‰æ›´å¤šäº†~')\n          .fontColor($r('app.color.gray'))\n          .fontSize(vp2vp(14))\n      }\n      .width('100%')\n      .height(vp2vp(50))\n      .justifyContent(FlexAlign.Center)\n    } else {\n      if (this.loading) {\n        Row() {\n          LoadingProgress()\n            .width(vp2vp(24))\n            .margin({ right: vp2vp(5) })\n          Text('åŠ è½½ä¸­...')\n            .fontColor($r('app.color.gray'))\n            .fontSize(vp2vp(14))\n        }\n        .width('100%')\n        .height(vp2vp(50))\n        .justifyContent(FlexAlign.Center)\n      }\n    }\n  }\n\n\n\n6. LazyForEach æ€§èƒ½ä¼˜åŒ–#\n\n1ï¼‰å®žçŽ°æ•°æ®æº\n\nexport class BasicDataSource implements IDataSource {\n  private listeners: DataChangeListener[] = [];\n\n  public totalCount(): number {\n    return 0;\n  }\n\n  public getData(index: number): any {\n\n  }\n\n  registerDataChangeListener(listener: DataChangeListener): void {\n    if (this.listeners.indexOf(listener) < 0) {\n      console.info('add listener');\n      this.listeners.push(listener);\n    }\n  }\n\n  unregisterDataChangeListener(listener: DataChangeListener): void {\n    const pos = this.listeners.indexOf(listener);\n    if (pos >= 0) {\n      console.info('remove listener');\n      this.listeners.splice(pos, 1);\n    }\n  }\n\n  notifyDataReload(): void {\n    this.listeners.forEach(listener => {\n      listener.onDataReloaded();\n    })\n  }\n\n  notifyDataAdd(index: number): void {\n    this.listeners.forEach(listener => {\n      listener.onDataAdd(index);\n    })\n  }\n\n  notifyDataChange(index: number): void {\n    this.listeners.forEach(listener => {\n      listener.onDataChange(index);\n    })\n  }\n\n  notifyDataDelete(index: number): void {\n    this.listeners.forEach(listener => {\n      listener.onDataDelete(index);\n    })\n  }\n}\n\n\n2ï¼‰ç»§æ‰¿æ•°æ®æºè¿›è¡Œæ‰©å±•\n\n\nclass QuestionListDataSource extends BasicDataSource {\n\n  private questionList: QuestionItemModel[] = []\n\n  totalCount () {\n    return this.questionList.length\n  }\n\n  getData(index: number): QuestionItemModel  {\n    return this.questionList[index]\n  }\n\n  public addData(index: number, data: QuestionItemModel): void {\n    this.questionList.splice(index, 0, data);\n    this.notifyDataAdd(index);\n  }\n\n  public pushData(data: QuestionItemModel): void {\n    this.questionList.push(data);\n    this.notifyDataAdd(this.questionList.length - 1);\n  }\n\n}\n\n\n3ï¼‰æ”¹ç”¨æ•°æ®æºæ¸²æŸ“åˆ—è¡¨\n\n  questionListDataSource = new QuestionListDataSource()\n\n\n  initQuestionList () {\n+    if (this.activeIndex === this.selfIndex && this.questionListDataSource.totalCount() === 0) {\n      this.getQuestionList()\n    }\n  }\n\n\n    }>('question/list', this.params)\n      .then(res => {\n\n+        res.data.rows.forEach(item => {\n+          this.questionListDataSource.pushData(item)\n+        })\n\n\n+      LazyForEach(this.questionListDataSource, (item: QuestionItemModel) => {\n        ListItem() {\n          IvQuestionItem({ item })\n        }\n      },\n","frontmatter":{"title":"HM - é¢è¯•å®å…¸APP-é¦–é¡µæ¨¡å—"},"version":""},{"id":8,"title":"HM - é¢è¯•å®å…¸APP-é€šç”¨è®¾æ–½","routePath":"/interview-handbook-project/project/","lang":"","toc":[{"text":"é¡¹ç›®ç‰©æ–™","id":"é¡¹ç›®ç‰©æ–™","depth":2,"charIndex":3},{"text":"åŸºç¡€èƒ½åŠ›","id":"åŸºç¡€èƒ½åŠ›","depth":2,"charIndex":242},{"text":"1. åˆ›å»ºé¡¹ç›®","id":"1-åˆ›å»ºé¡¹ç›®","depth":3,"charIndex":250},{"text":"2. æ—¥å¿—å·¥å…·ç±»","id":"2-æ—¥å¿—å·¥å…·ç±»","depth":3,"charIndex":771},{"text":"3. è®¿é—®æƒé™å·¥å…·ç±»","id":"3-è®¿é—®æƒé™å·¥å…·ç±»","depth":3,"charIndex":2466},{"text":"4. è¯·æ±‚å·¥å…·ç±»-è¯·æ±‚å¤„ç†","id":"4-è¯·æ±‚å·¥å…·ç±»-è¯·æ±‚å¤„ç†","depth":3,"charIndex":3557},{"text":"5. è¯·æ±‚å·¥å…·ç±»-å“åº”å¤„ç†","id":"5-è¯·æ±‚å·¥å…·ç±»-å“åº”å¤„ç†","depth":3,"charIndex":4905},{"text":"UI ç®¡ç†","id":"ui-ç®¡ç†","depth":2,"charIndex":6732},{"text":"1. ç•Œé¢ä¸€å¤š","id":"1-ç•Œé¢ä¸€å¤š","depth":3,"charIndex":6741},{"text":"2. æ‰‹æœºä¾§é€‚é…","id":"2-æ‰‹æœºä¾§é€‚é…","depth":3,"charIndex":8503},{"text":"3. é…ç½®æ–‡ä»¶","id":"3-é…ç½®æ–‡ä»¶","depth":3,"charIndex":9814},{"text":"4. å‡†å¤‡é¡µé¢","id":"4-å‡†å¤‡é¡µé¢","depth":3,"charIndex":10696},{"text":"5. é€šç”¨å±•ç¤ºåž‹ç»„ä»¶","id":"5-é€šç”¨å±•ç¤ºåž‹ç»„ä»¶","depth":3,"charIndex":11522}],"domain":"","content":"#\n\n\né¡¹ç›®ç‰©æ–™#\n\n * å‚è€ƒè®¾è®¡\n\nã€è…¾è®¯ CoDesignã€‘é¢è¯•å®å…¸ https://codesign.qq.com/s/2kY5j3LVeb9ExNd è®¿é—®å¯†ç ï¼š2YDD\n\n * æŽ¥å£æ–‡æ¡£\n\nã€apifoxã€‘é¢è¯•å®å…¸\nhttps://apifox.com/apidoc/shared-31e6a8d7-316a-4c5a-83c1-e5c7a2c343bf\n\n * æ•ˆæžœä¾‹å›¾\n\nç™»å½•   é¦–é¡µ\n     \n\næˆ‘çš„   æ‰“å¡\n     \n\né¢è¯•é¢˜   å­¦ä¹ æ—¶é—´\n      \n\n\nåŸºç¡€èƒ½åŠ›#\n\n\n1. åˆ›å»ºé¡¹ç›®#\n\n> åˆ›å»ºé¡¹ç›®ï¼Œå‚è€ƒåŽä¸º Codelabs ä¼˜ç§€æ¡ˆä¾‹ç»“åˆé¡¹ç›®è‡ªèº«æƒ…å†µå¯¹é¡¹ç›®ç»“æž„è¿›è¡Œç»´æŠ¤\n\n1ï¼‰åˆ›å»ºé¡¹ç›®\n\n2ï¼‰å‡†å¤‡å¥½é¡¹ç›®ç»“æž„\n\nets\nâ”œâ”€â”€ common                      // é€šç”¨æ¨¡å—\nâ”‚Â Â  â”œâ”€â”€ components              // - é€šç”¨ç»„ä»¶\nâ”‚Â Â  â”œâ”€â”€ constants               // - å¸¸é‡æ•°æ®\nâ”‚Â Â  â”œâ”€â”€ images                  // - å›¾ç‰‡èµ„æº\nâ”‚Â Â  â””â”€â”€ utils                   // - å·¥å…·ç±»\nâ”œâ”€â”€ entryability                // å…¥å£UIAbility\nâ”‚Â Â  â””â”€â”€ EntryAbility.ts\nâ”œâ”€â”€ models                      // - æ•°æ®æ¨¡åž‹\nâ”œâ”€â”€ pages                       // - é¡µé¢ç»„ä»¶\nâ”‚Â Â  â””â”€â”€ Index.ets\nâ””â”€â”€ views                       // - é¡µé¢å¯¹åº”è‡ªå®šä¹‰ç»„ä»¶\n    â””â”€â”€ Index\n\n\n\n2. æ—¥å¿—å·¥å…·ç±»#\n\n1ï¼‰å°è£… logger å·¥å…·ç±»\n\n\n\nconst DOMAIN = 0xFF00\nconst PREFIX = 'INTERVIEW'\nconst FORMAT = '%{public}s, %{public}s'\n\nexport class Logger {\n  static debug(...args: string[]) {\n    hilog.debug(DOMAIN, PREFIX, FORMAT, args)\n  }\n\n  static info(...args: string[]) {\n    hilog.info(DOMAIN, PREFIX, FORMAT, args)\n  }\n\n  static warn(...args: string[]) {\n    hilog.warn(DOMAIN, PREFIX, FORMAT, args)\n  }\n\n  static error(...args: string[]) {\n    hilog.error(DOMAIN, PREFIX, FORMAT, args)\n  }\n\n  static fatal(...args: string[]) {\n    hilog.fatal(DOMAIN, PREFIX, FORMAT, args)\n  }\n\n  static isLoggable(level: hilog.LogLevel) {\n    return hilog.isLoggable(DOMAIN, PREFIX, level)\n  }\n}\n\n\n2ï¼‰ä¿®æ”¹ entryAbility çš„æ—¥å¿—æ‰“å°\n\n\n\n\n\nexport default class EntryAbility extends UIAbility {\n  onCreate(want, launchParam) {\n    Logger.info('Ability onCreate')\n  }\n\n  onDestroy() {\n    Logger.info('Ability onDestroy')\n  }\n\n  onWindowStageCreate(windowStage: window.WindowStage) {\n    // Main window is created, set main page for this ability\n    Logger.info('Ability onWindowStageCreate')\n\n    windowStage.loadContent('pages/Index', (err, data) => {\n      if (err.code) {\n        Logger.info('Failed to load the content', JSON.stringify(err) ?? '')\n        return;\n      }\n      Logger.info('Succeeded in loading the content', JSON.stringify(data) ?? '');\n    });\n  }\n\n  onWindowStageDestroy() {\n    // Main window is destroyed, release UI related resources\n    Logger.info( 'Ability onWindowStageDestroy');\n  }\n\n  onForeground() {\n    // Ability has brought to foreground\n    Logger.info('Ability onForeground');\n  }\n\n  onBackground() {\n    // Ability has back to background\n    Logger.info('Ability onBackground');\n  }\n} \n\n\n\n3. è®¿é—®æƒé™å·¥å…·ç±»#\n\n1ï¼‰ç”¨æˆ·ä¿¡æ¯æŒä¹…åŒ–ï¼ŒèŽ·å–ç”¨æˆ·ï¼Œè®¾ç½®ç”¨æˆ·ï¼Œåˆ é™¤ç”¨æˆ·ä»¥åŠç”¨æˆ·è®¿é—®é¡µé¢æŽ§åˆ¶\n\nexport class UserModel {\n  id: string\n  username: string\n  avatar: string\n  refreshToken: string\n  token: string\n  totalTime?: number\n  nickName?: string\n  clockinNumbers?: number\n}\n\n\n\n\n\nconst USER_KEY = 'interview-user'\nconst PASS_LIST = ['pages/LoginPage']\n\nexport class Auth {\n  static initLocalUser() {\n    PersistentStorage.PersistProp(USER_KEY, '{}')\n  }\n\n  static setUser(user: UserModel) {\n    AppStorage.Set(USER_KEY, JSON.stringify(user))\n  }\n\n  static getUser() {\n    const str = AppStorage.Get(USER_KEY) || '{}'\n    return JSON.parse(str) as UserModel\n  }\n\n  static delUser() {\n    AppStorage.Set(USER_KEY, '{}')\n  }\n\n  // éœ€è¦ç™»å½•é¡µé¢ä½¿ç”¨\n  static pushUrl(options: router.RouterOptions) {\n    const user = this.getUser()\n    if (!PASS_LIST.includes(options.url) && !user.token) {\n      return router.pushUrl({\n        url: 'pages/LoginPage',\n        params: {\n          ...options.params,\n          return_url: options.url\n        }\n      })\n    }\n    return router.pushUrl(options)\n  }\n}\n\n\n2ï¼‰åœ¨ Index åˆå§‹åŒ–æŒä¹…åŒ–ç”¨æˆ·\n\n  Auth.initLocalUser()\n\n\n\n4. è¯·æ±‚å·¥å…·ç±»-è¯·æ±‚å¤„ç†#\n\n * ç»´æŠ¤åŸºå‡†åœ°å€\n * get ä¼ å‚æ‹¼æŽ¥åœ°å€ä¸Šï¼Œå…¶ä»–è¯·æ±‚æ–¹å¼åœ¨ extraData ä¸Š\n * æä¾›å¿«æ·è°ƒç”¨é™æ€æ–¹æ³•\n\n\n\n\nconst BASE_URL = 'https://api-harmony-teach.itheima.net/hm/'\n\nconst req = http.createHttp()\n\nconst request = (\n  url: string,\n  method: http.RequestMethod = http.RequestMethod.GET,\n  params: object = {}\n) => {\n  let fullUrl = BASE_URL + url\n  const options: http.HttpRequestOptions = {\n    header: {\n      'Content-Type': 'application/json',\n    },\n    readTimeout: 30000,\n    method,\n  }\n\n  // å¦‚æžœæ˜¯å¯¹è±¡æ•°æ®æ‹¼æŽ¥URLï¼Œå¦‚æžœæ˜¯å…¶ä»–åˆ™æºå¸¦åœ¨ extraData\n  if (method === http.RequestMethod.GET) {\n    const urlParams = Object.keys(params).map(key => `${key}=${params[key]}`)\n    fullUrl += `?${urlParams.join('&')}`\n  } else {\n    options.extraData = params\n  }\n\n  // æºå¸¦ token\n  const user = Auth.getUser()\n  if (user.token) {\n    options.header['Authorization'] = `Bearer ${user.token}`\n  }\n\n  return req.request(fullUrl, options)\n\n}\n\nexport class Request {\n  static get(url: string, params?: object) {\n    return request(url, http.RequestMethod.GET, params)\n  }\n\n  static post(url: string, params?: object) {\n    return request(url, http.RequestMethod.POST, params)\n  }\n\n  static put(url: string, params?: object) {\n    return request(url, http.RequestMethod.PUT, params)\n  }\n\n  static delete(url: string, params?: object) {\n    return request(url, http.RequestMethod.DELETE, params)\n  }\n}\n\n\n\n5. è¯·æ±‚å·¥å…·ç±»-å“åº”å¤„ç†#\n\n * å¤„ç†ä¸šåŠ¡å¤±è´¥\n * å¤„ç†ç™»å½•å¤±æ•ˆ\n * æ·»åŠ æ—¥å¿—è¡Œä¸º\n\n  return req.request(fullUrl, options)\n    .then(res => {\n      if (res.result) {\n        // 1. å¤„ç†å“åº”\n        const response = JSON.parse(res.result as string) as {\n          code: number\n          message: string\n          data: T\n        }\n        if (response.code === 10000) {\n          return response\n        }\n        // 2. å¤„ç† token å¤±æ•ˆ\n        if (response.code === 401) {\n          Auth.delUser()\n          router.pushUrl({\n            url: 'pages/Login'\n          }, router.RouterMode.Single)\n        }\n      }\n      return Promise.reject(res.result)\n    })\n    .catch(err => {\n      promptAction.showToast({ message: 'ç½‘ç»œé”™è¯¯' })\n      return Promise.reject(err)\n    })\n    .finally(() => {\n      // é”€æ¯è¯·æ±‚é‡Šæ”¾èµ„æº\n      req.destroy()\n    })\n\n\n  // è¯·æ±‚æ—¥å¿—ï¼š\n+  Logger.info(`REQUESTâ†’${url}â†’${method}`, JSON.stringify(params))\n\n  return req.request(fullUrl, options)\n    .then(res => {\n      if (res.result) {\n        // å“åº”æ—¥å¿—ï¼š\n+        Logger.info(`RESPONSEâ†’${url}â†’${method}`, res.result.toString().substring(0, 250))\n        // 1. å¤„ç†å“åº”\n        const response = JSON.parse(res.result as string) as {\n          code: number\n          message: string\n          data: T\n        }\n        if (response.code === 10000) {\n          return response\n        }\n        // 2. å¤„ç† token å¤±æ•ˆ\n        if (response.code === 401) {\n          Auth.delUser()\n          router.pushUrl({\n            url: 'pages/Login'\n          }, router.RouterMode.Single)\n        }\n      }\n      return Promise.reject(res.result)\n    })\n    .catch(err => {\n      promptAction.showToast({ message: 'ç½‘ç»œé”™è¯¯' })\n      // é”™è¯¯æ—¥å¿—ï¼š\n+      Logger.error(`RESPONSEâ†’${url}â†’${method}`, JSON.stringify(err).substring(0, 250))\n      return Promise.reject(err)\n    })\n    .finally(() => {\n      // é”€æ¯è¯·æ±‚é‡Šæ”¾èµ„æº\n      req.destroy()\n    })\n\n\n\n\nUI ç®¡ç†#\n\n\n1. ç•Œé¢ä¸€å¤š#\n\n> ä¸€ä¸ªç•Œé¢é€‚é…å¤šç±»ç»ˆç«¯\n\næ‰‹æœº-ç«–å±\n\npad-æ¨ªå±\n\n * åª’ä½“æŸ¥è¯¢ tablet ä¸”æ¨ªå±\n * tabs çš„æ¨ªç«–æ¨¡å¼\n * è®¾ç½® bar çš„ä½ç½®å’Œé«˜åº¦\n\n\nclass ToolBarItem {\n  defaultIcon: string | Resource\n  activeIcon: string | Resource\n  label: string\n}\n\n@Entry\n@Component\nstruct Index {\n  @State\n  activeIndex: number = 0\n\n  @State\n  isLandscape: boolean = false\n\n  listenerScreen = mediaquery.matchMediaSync('(orientation: landscape) and (device-type: tablet)')\n\n  aboutToAppear() {\n    this.listenerScreen.on('change', (mediaQueryResult) => {\n      this.isLandscape = mediaQueryResult.matches\n    })\n  }\n\n  toolBars: ToolBarItem[] = [\n    { defaultIcon: $r('app.media.home'), activeIcon: $r('app.media.home_select'), label: 'é¦–é¡µ' },\n    { defaultIcon: $r('app.media.project'), activeIcon: $r('app.media.project_select'), label: 'é¡¹ç›®' },\n    { defaultIcon: $r('app.media.interview'), activeIcon: $r('app.media.interview_select'), label: 'é¢ç»' },\n    { defaultIcon: $r('app.media.mine'), activeIcon: $r('app.media.mine_select'), label: 'æˆ‘çš„' }\n  ]\n\n  @Builder\n  TabBarBuilder(item: ToolBarItem, index: number) {\n    Column({ space: 4 }) {\n      Image(this.activeIndex === index ? item.activeIcon : item.defaultIcon)\n        .width(24)\n      Text(item.label)\n        .fontSize(12)\n        .fontColor(this.activeIndex === index ? '#000' : '#aaa')\n    }\n  }\n\n  build() {\n    Tabs({\n      index: this.activeIndex,\n    }) {\n      ForEach(this.toolBars, (item: ToolBarItem, index: number) => {\n        TabContent() {\n          Text(index.toString())\n        }\n        .tabBar(this.TabBarBuilder(item, index))\n      })\n    }\n    .barPosition(this.isLandscape ? BarPosition.Start : BarPosition.End)\n    .vertical(this.isLandscape)\n    .barHeight(this.isLandscape ? 400 : 50)\n    .onChange(index => this.activeIndex = index)\n  }\n}\n\n\n\n2. æ‰‹æœºä¾§é€‚é…#\n\n> æ‰‹æœºç«¯ç­‰æ¯”ä¾‹ç¼©æ”¾é€‚é…è®¾å¤‡\n\n * çŸ¥é“ç­‰æ¯”ä¾‹ç¼©æ”¾åŽŸç†\n\n// å®‰å“ä¸€èˆ¬ 360 è®¾è®¡ç¨¿ 1080ï¼Œé¢è¯•å®å…¸æ˜¯ 375\nconst designWidth = 375\n// ä¹¦å†™å°ºå¯¸ = è®¾å¤‡å®½åº¦ / è®¾è®¡ç¨¿å®½åº¦ * æµ‹é‡å°ºå¯¸\nconst useSize =  deviceWidth / designWidth * measureSize\n\n\n * å°è£…ç­‰æ¯”ä¾‹ç¼©æ”¾å‡½æ•°\n\n\n\n\nconst designWidth = 375\nconst devicePhysics = display.getDefaultDisplaySync().width\n\nexport const vp2vp = (originSize: number) => {\n  // ä¸æ˜¯PADæ˜¯æ‰‹æœºç­‰æ¯”ä¾‹ç¼©æ”¾\n  if ( deviceInfo.deviceType !== 'tablet' ) {\n    return px2vp(devicePhysics) / designWidth * originSize\n  }\n  return originSize\n}\n\n\n * ä¿®æ”¹ Tabs ç›¸å…³å°ºå¯¸\n\n @Builder\n  TabBarBuilder(item: ToolBarItem, index: number) {\n    Column({ space: vp2vp(4) }) {\n      Image(this.activeIndex === index ? item.activeIcon : item.defaultIcon)\n        .width(vp2vp(24))\n      Text(item.label)\n        .fontSize(vp2vp(12))\n        .fontColor(this.activeIndex === index ? '#000' : '#aaa')\n    }\n  }\n\n  build() {\n    Tabs({\n      index: this.activeIndex,\n    }) {\n      ForEach(this.toolBars, (item: ToolBarItem, index: number) => {\n        TabContent() {\n          Text(index.toString())\n        }\n        .tabBar(this.TabBarBuilder(item, index))\n      })\n    }\n    .barPosition(this.isLandscape ? BarPosition.Start : BarPosition.End)\n    .vertical(this.isLandscape)\n    .barHeight(this.isLandscape ? vp2vp(400) : vp2vp(50))\n    .onChange(index => this.activeIndex = index)\n  }\n\n\n\n3. é…ç½®æ–‡ä»¶#\n\n * åº”ç”¨åç§°\n\n * ä¸»é¢˜é¢œè‰²\n\n1ï¼‰åº”ç”¨åç§°\n\n{\n  \"string\": [\n    {\n      \"name\": \"module_desc\",\n      \"value\": \"æ¨¡å—æè¿°\"\n    },\n    {\n      \"name\": \"EntryAbility_desc\",\n      \"value\": \"å‰ç«¯é¢è¯•å®å…¸ï¼ŒåŒ…å«å¸¸è§é¢è¯•é¢˜ï¼Œå’Œä¼ä¸šçœŸå®žé¢ç»\"\n    },\n    {\n      \"name\": \"EntryAbility_label\",\n      \"value\": \"é¢è¯•é€š\"\n    },\n    {\n      \"name\": \"reason\",\n      \"value\": \"èŽ·å–é€šçŸ¥æƒé™\"\n    }\n  ]\n}\n\n\n2ï¼‰ä¸»é¢˜é¢œè‰²\n\n{\n  \"color\": [\n    {\n      \"name\": \"start_window_background\",\n      \"value\": \"#FFFFFF\"\n    },\n    {\n      \"name\": \"green\",\n      \"value\": \"#27AE60\"\n    },\n    {\n      \"name\": \"gray\",\n      \"value\": \"#979797\"\n    },\n    {\n      \"name\": \"black\",\n      \"value\": \"#121826\"\n    },\n    {\n      \"name\": \"gray_bg\",\n      \"value\": \"#F6F7F9\"\n    },\n    {\n      \"name\": \"orange\",\n      \"value\": \"#F2994A\"\n    },\n    {\n      \"name\": \"blue\",\n      \"value\": \"#3266EE\"\n    },\n    {\n      \"name\": \"blue_bg\",\n      \"value\": \"#EDF2FF\"\n    }\n  ]\n}\n\n\n\n4. å‡†å¤‡é¡µé¢#\n\n * å‡†å¤‡é¦–é¡µã€é¡¹ç›®ã€é¢ç»ã€æˆ‘çš„å››ä¸ª tabs é¡µé¢\n\n * ä½¿ç”¨ é¡µé¢ç»„ä»¶\n\n1ï¼‰å‡†å¤‡ç»„ä»¶\n\n@Component\nexport struct Home {\n  build() {\n    Column(){\n      Text('é¦–é¡µ')\n    }\n    .width('100%')\n    .height('100%')\n  }\n}\n\n\n@Component\nexport struct Project {\n  build() {\n    Column(){\n      Text('é¡¹ç›®')\n    }\n    .width('100%')\n    .height('100%')\n  }\n}\n\n\n@Component\nexport struct Interview {\n  build() {\n    Column(){\n      Text('é¢ç»')\n    }\n    .width('100%')\n    .height('100%')\n  }\n}\n\n\n@Component\nexport struct Mine {\n  build() {\n    Column(){\n      Text('æˆ‘çš„')\n    }\n    .width('100%')\n    .height('100%')\n  }\n}\n\n\n2ï¼‰ä½¿ç”¨ç»„ä»¶\n\n\n\n\n\n\n// ...\n\n        TabContent() {\n          if (index === 0) Home()\n          else if (index === 1) Project()\n          else if (index === 2) Interview()\n          else Mine()\n        }\n        .tabBar(this.TabBarBuilder(item, index))\n\n\n\n5. é€šç”¨å±•ç¤ºåž‹ç»„ä»¶#\n\n * æœç´¢æ¡†ç»„ä»¶\n\n * æ‰“å¡ç»„ä»¶\n\n * éª¨æž¶å±ç»„ä»¶\n\n1ï¼‰æœç´¢æ¡†ç»„ä»¶\n\n\n\n@Component\nexport struct IvSearch {\n\n  textAlign: FlexAlign = FlexAlign.Start\n\n  build() {\n    Row() {\n      Image($r('app.media.icon_public_search'))\n        .width(vp2vp(15))\n        .aspectRatio(1)\n        .fillColor($r('app.color.gray'))\n\n      Text('è¯·è¾“å…¥å…³é”®è¯')\n        .fontSize(vp2vp(14))\n        .fontColor($r('app.color.gray'))\n        .margin({ left: vp2vp(3) })\n    }\n    .layoutWeight(1)\n    .height(vp2vp(28))\n    .backgroundColor($r('app.color.gray_bg'))\n    .borderRadius(vp2vp(14))\n    .padding({ left: vp2vp(10), right: vp2vp(10) })\n    .justifyContent(this.textAlign)\n  }\n}\n\n\n2ï¼‰æ‰“å¡ç»„ä»¶\n\n\n\n@Component\nexport struct IvClock {\n  @Prop\n  clockCount: number = 0\n\n  build() {\n    Stack({ alignContent: Alignment.End }) {\n      Image(this.clockCount > 0 ? $r('app.media.clocked') : $r('app.media.unclock'))\n        .objectFit(ImageFit.Fill)\n      if (this.clockCount > 0) {\n        Column() {\n          Text('å·²è¿žç»­æ‰“å¡')\n            .fontSize(8)\n          Text() {\n            Span(this.clockCount.toString())\n              .fontWeight(600)\n              .fontSize(12)\n            Span(' å¤©')\n              .fontSize(10)\n          }\n        }\n        .width('50')\n      } else {\n        Text('æ‰“å¡')\n          .width('50')\n          .textAlign(TextAlign.Center)\n          .fontSize(vp2vp(18))\n          .fontWeight(500)\n          .fontColor('#333C4F')\n          .margin({ bottom: vp2vp(4) })\n      }\n    }\n    .width(vp2vp(74))\n    .height(vp2vp(28))\n  }\n}\n\n\n\n\n\n@Component\nexport struct Home {\n  build() {\n    Column() {\n      Row({ space: 15 }) {\n        IvSearch()\n        IvClock()\n      }\n      .padding(15)\n\n      Text('é¦–é¡µ')\n    }\n    .width('100%')\n    .height('100%')\n  }\n}\n\n\n3ï¼‰éª¨æž¶å±ç»„ä»¶\n\n * èƒŒæ™¯æ¸å˜ linearGradient\n\nlinearGradient({\n// è§’åº¦ï¼Œé»˜è®¤ 180\nangle?: number | string,\n// é¢œè‰²ï¼Œæ¯”ä¾‹\ncolors: Array<[ResourceColor, number]>,\n})\n\n\n * ç»„ä»¶ç»“æž„\n\n\n\n@Component\nexport struct IvSkeleton {\n  widthValue: number | string = 100\n  heightValue: number | string = 20\n  @State\n  translateValue: string = '-100%'\n\n  build() {\n    Stack() {\n      Text()\n        .backgroundColor($r('app.color.gray_bg'))\n        .height('100%')\n        .width('100%')\n      Text()\n        .linearGradient({\n          angle: 90,\n          colors: [\n            ['rgba(255,255,255,0)', 0],\n            ['rgba(255,255,255,0.5)', 0.5],\n            ['rgba(255,255,255,0)', 1]\n          ]\n        })\n        .height('100%')\n        .width('100%')\n        .translate({\n          x: this.translateValue,\n        })\n        .animation({\n          duration: 1500,\n          iterations: -1\n        })\n    }\n    .height(this.heightValue)\n    .width(this.widthValue)\n    .borderRadius(vp2vp(4))\n    .clip(true)\n    .onAppear(() => {\n      this.translateValue = '100%'\n    })\n  }\n}\n","frontmatter":{"title":"HM - é¢è¯•å®å…¸APP-é€šç”¨è®¾æ–½"},"version":""},{"id":9,"title":"HM - é¢è¯•å®å…¸APP-æˆ‘çš„æ¨¡å—","routePath":"/interview-handbook-project/project/mine","lang":"","toc":[{"text":"ä¸ªäººä¸­å¿ƒ","id":"ä¸ªäººä¸­å¿ƒ","depth":2,"charIndex":3},{"text":"1. æˆ‘çš„-é¡µé¢ç»“æž„","id":"1-æˆ‘çš„-é¡µé¢ç»“æž„","depth":3,"charIndex":11},{"text":"2. æˆ‘çš„-é¡µé¢é€»è¾‘","id":"2-æˆ‘çš„-é¡µé¢é€»è¾‘","depth":3,"charIndex":3927},{"text":"3. ç™»å½•-é¡µé¢ç»“æž„","id":"3-ç™»å½•-é¡µé¢ç»“æž„","depth":3,"charIndex":6436},{"text":"4. ç™»å½•-é¡µé¢é€»è¾‘","id":"4-ç™»å½•-é¡µé¢é€»è¾‘","depth":3,"charIndex":9589},{"text":"5. æˆ‘çš„-é€€å‡ºç™»å½•","id":"5-æˆ‘çš„-é€€å‡ºç™»å½•","depth":3,"charIndex":11025},{"text":"æ‰“å¡æ—¥åŽ†","id":"æ‰“å¡æ—¥åŽ†","depth":2,"charIndex":11878},{"text":"1. å®žçŽ°æ‰“å¡","id":"1-å®žçŽ°æ‰“å¡","depth":3,"charIndex":11886},{"text":"2. æ‰“å¡æ—¥åŽ†-é¡µé¢ç»“æž„","id":"2-æ‰“å¡æ—¥åŽ†-é¡µé¢ç»“æž„","depth":3,"charIndex":13027},{"text":"3. æ‰“å¡æ—¥åŽ†-ç¬¬ä¸‰æ–¹åº“","id":"3-æ‰“å¡æ—¥åŽ†-ç¬¬ä¸‰æ–¹åº“","depth":3,"charIndex":14886},{"text":"4. æ‰“å¡æ—¥åŽ†-å…±äº«æ—¥åŽ†æœ¬åœ°åº“","id":"4-æ‰“å¡æ—¥åŽ†-å…±äº«æ—¥åŽ†æœ¬åœ°åº“","depth":3,"charIndex":14999},{"text":"3. æ‰“å¡æ—¥åŽ†-æ˜¾ç¤ºç­¾åˆ°","id":"3-æ‰“å¡æ—¥åŽ†-æ˜¾ç¤ºç­¾åˆ°","depth":3,"charIndex":21405},{"text":"ç¼–è¾‘èµ„æ–™","id":"ç¼–è¾‘èµ„æ–™","depth":2,"charIndex":22516},{"text":"1. èµ„æ–™é¡µé¢","id":"1-èµ„æ–™é¡µé¢","depth":3,"charIndex":22524},{"text":"2. ä¿®æ”¹æ˜µç§°","id":"2-ä¿®æ”¹æ˜µç§°","depth":3,"charIndex":24719},{"text":"3. ä¿®æ”¹å¤´åƒ","id":"3-ä¿®æ”¹å¤´åƒ","depth":3,"charIndex":25824}],"domain":"","content":"#\n\n\nä¸ªäººä¸­å¿ƒ#\n\n\n1. æˆ‘çš„-é¡µé¢ç»“æž„#\n\n\n\n\n@Preview\n@Component\nexport struct Mine {\n  @Builder\n  NavBuilder(icon: Resource, title: string,) {\n    Column({ space: vp2vp(8) }) {\n      Image(icon)\n        .width(vp2vp(30))\n        .height(vp2vp(30))\n        .objectFit(ImageFit.Fill)\n      Text(title)\n        .fontColor($r('app.color.gray'))\n        .fontSize(vp2vp(13))\n    }\n  }\n\n  @Builder\n  CellBuilder(title: string, cb?: () => void) {\n    Row() {\n      Text(title)\n        .fontSize(vp2vp(15))\n        .fontColor($r('app.color.black'))\n      Image($r('app.media.icon_my_arrow'))\n        .fillColor('#C3C3C5')\n        .width(vp2vp(18))\n        .height(vp2vp(18))\n    }\n    .width('100%')\n    .height(vp2vp(40))\n    .justifyContent(FlexAlign.SpaceBetween)\n    .padding({ left: vp2vp(15), right: vp2vp(15) })\n    .onClick(()=>{\n      cb && cb()\n    })\n  }\n\n  build() {\n    Column({ space: vp2vp(15) }) {\n      // å¤´éƒ¨\n      Row() {\n        Image('/common/images/avatar.png')\n          .alt('/common/images/avatar.png')\n          .width(vp2vp(55))\n          .aspectRatio(1)\n          .borderRadius(vp2vp(30))\n          .border({ width: 0.5, color: '#e4e4e4' })\n        Column({ space: vp2vp(5) }) {\n          Text('é»‘é©¬ç¨‹åºå‘˜')\n            .fontSize(vp2vp(18))\n            .fontWeight(FontWeight.Bold)\n          Row() {\n            Text('ç¼–è¾‘èµ„æ–™')\n              .fontSize(vp2vp(12))\n              .fontColor($r('app.color.gray'))\n            Image($r('app.media.icon_edit'))\n              .width(vp2vp(12))\n              .aspectRatio(1)\n              .fillColor($r('app.color.gray'))\n          }\n        }\n        .padding({ left: vp2vp(12) })\n        .alignItems(HorizontalAlign.Start)\n        .layoutWeight(1)\n\n        IvClock({ clockCount: 0 })\n      }\n      .height(vp2vp(80))\n\n      // å¯¼èˆª\n      GridRow({ columns: 4 }) {\n        GridCol() {\n          this.NavBuilder($r('app.media.icon_my_history'), 'åŽ†å²è®°å½•')\n        }\n\n        GridCol() {\n          this.NavBuilder($r('app.media.icon_my_favo'), 'æˆ‘çš„æ”¶è—')\n        }\n\n        GridCol() {\n          this.NavBuilder($r('app.media.icon_my_zan'), 'æˆ‘çš„ç‚¹èµž')\n        }\n\n        GridCol() {\n          Column() {\n            this.NavBuilder($r('app.media.icon_my_time'), 'ç´¯è®¡å­¦æ—¶')\n            Row() {\n              Text('10åˆ†é’Ÿ')\n                .fontColor('#C3C3C5')\n                .fontSize(vp2vp(11))\n              Image($r('app.media.icon_my_arrow'))\n                .fillColor('#C3C3C5')\n                .width(vp2vp(13))\n                .height(vp2vp(13))\n            }\n            .margin({ top: vp2vp(3) })\n          }\n        }\n      }\n      .backgroundColor('#fff')\n      .padding({ top: vp2vp(15), bottom: vp2vp(15) })\n      .borderRadius(vp2vp(8))\n\n      Row() {\n        Text()\n          .width(vp2vp(3))\n          .height(vp2vp(12))\n          .backgroundColor($r('app.color.green'))\n        Text('å‰ç«¯å¸¸ç”¨è¯')\n          .fontSize(vp2vp(15))\n          .fontColor($r('app.color.black'))\n          .layoutWeight(1)\n          .padding({ left: vp2vp(12) })\n        Image($r('app.media.icon_my_new'))\n          .width(vp2vp(53))\n          .height(vp2vp(22))\n          .margin({ right: vp2vp(10) })\n      }\n      .backgroundColor('#fff')\n      .padding({ top: vp2vp(15), bottom: vp2vp(15) })\n      .borderRadius(vp2vp(8))\n\n      List() {\n        ListItem() {\n          this.CellBuilder('æŽ¨èåˆ†äº«')\n        }\n\n        ListItem() {\n          this.CellBuilder('æ„è§åé¦ˆ')\n        }\n\n        ListItem() {\n          this.CellBuilder('å…³äºŽæˆ‘ä»¬')\n        }\n\n        if (this.user.token) {\n          ListItem() {\n            this.CellBuilder('é€€å‡ºç™»å½•', () => {\n              // é€€å‡ºç™»å½•\n            })\n          }\n        }\n      }\n      .padding({ top: vp2vp(10), bottom: vp2vp(10) })\n      .borderRadius(vp2vp(8))\n      .backgroundColor('#fff')\n      .divider({ strokeWidth: 0.5, color: $r('app.color.gray_bg') })\n\n    }\n    .padding(vp2vp(15))\n    .width('100%')\n    .height('100%')\n    .backgroundColor($r('app.color.gray_bg'))\n  }\n}\n\n\n\n2. æˆ‘çš„-é¡µé¢é€»è¾‘#\n\n1ï¼‰åœ¨ Index åˆå§‹åŒ–æŒä¹…åŒ–ç”¨æˆ·\n\n  Auth.initLocalUser()\n\n\n2ï¼‰èŽ·å– AppStorage ç”¨æˆ·æ•°æ®\n\n  @StorageProp(USER_KEY)\n  @Watch('updateUser')\n  userJson: string = '{}'\n  @State\n  user: UserModel = JSON.parse(this.userJson)\n\n  updateUser() {\n    this.user = JSON.parse(this.userJson)\n  }\n\n\n3ï¼‰è¿›è¡Œå±•ç¤º\n\n      // å¤´éƒ¨\n      Row() {\n        Image(this.user.avatar || '/common/images/avatar.png')\n          .alt('/common/images/avatar.png')\n          .width(vp2vp(55))\n          .aspectRatio(1)\n          .borderRadius(vp2vp(30))\n          .border({ width: 0.5, color: '#e4e4e4' })\n        Column({ space: vp2vp(5) }) {\n          if (this.user.token) {\n            Text(this.user.nickName || this.user.username)\n              .fontSize(vp2vp(18))\n              .fontWeight(FontWeight.Bold)\n            Row() {\n              Text('ç¼–è¾‘èµ„æ–™')\n                .fontSize(vp2vp(12))\n                .fontColor($r('app.color.gray'))\n              Image($r('app.media.icon_edit'))\n                .width(vp2vp(12))\n                .aspectRatio(1)\n                .fillColor($r('app.color.gray'))\n            }\n          } else {\n            Text('ç‚¹å‡»ç™»å½•')\n              .fontSize(vp2vp(18))\n              .fontWeight(FontWeight.Bold)\n              .onClick(() => {\n                router.pushUrl({\n                  url: 'pages/LoginPage'\n                })\n              })\n          }\n        }\n        .padding({ left: vp2vp(12) })\n        .alignItems(HorizontalAlign.Start)\n        .layoutWeight(1)\n\n        IvClock({ clockCount: this.user.clockinNumbers || 0  })\n      }\n      .height(vp2vp(80))\n\n\n          Column() {\n            this.NavBuilder($r('app.media.icon_my_time'), 'ç´¯è®¡å­¦æ—¶')\n            Row() {\n              Text(formatTime(this.user.totalTime))\n                .fontColor('#C3C3C5')\n                .fontSize(vp2vp(11))\n              Image($r('app.media.icon_my_arrow'))\n                .fillColor('#C3C3C5')\n                .width(vp2vp(13))\n                .height(vp2vp(13))\n            }\n            .margin({ top: vp2vp(3) })\n          }\n\n\n        if (this.user.token) {\n          this.CellBuilder('é€€å‡ºç™»å½•')\n        }\n\n\n4ï¼‰Basic å°è£…æ—¶é—´è½¬æ¢å‡½æ•°\n\nexport const formatTime = (time: number = 0, hasUnit: boolean = true) => {\n  if (time < 3600) {\n    return String(Math.floor(time / 60)) + (hasUnit ? ' åˆ†é’Ÿ' : '')\n  } else {\n    return String(Math.round(time / 3600 * 10) / 10) + (hasUnit ? ' å°æ—¶' : '')\n  }\n}\n\n\n              Text(formatTime(this.user.totalTime))\n                .fontColor('#C3C3C5')\n                .fontSize(vp2vp(11))\n\n\n\n3. ç™»å½•-é¡µé¢ç»“æž„#\n\n\n\n@Extend(TextInput) function customStyle() {\n  .height(vp2vp(44))\n  .borderRadius(vp2vp(2))\n  .backgroundColor('#ffffff')\n  .border({ width: { bottom: 0.5 }, color: '#e4e4e4' })\n  .padding({ left: 0 })\n  .placeholderColor('#C3C3C5')\n  .caretColor('#fa711d')\n}\n\n@Entry\n@Component\nstruct LoginPage {\n  @State\n  username: string = 'hmheima'\n  @State\n  password: string = 'Hmheima%123'\n  @State\n  isAgree: boolean = false\n  @State\n  loading: boolean = false\n\n  build() {\n    Navigation() {\n      Scroll() {\n        Column() {\n          Column() {\n            Image($r('app.media.icon'))\n              .width(vp2vp(120))\n              .aspectRatio(1)\n            Text('é¢è¯•å®å…¸')\n              .fontSize(vp2vp(28))\n              .margin({ bottom: vp2vp(15) })\n            Text('æžå®šä¼ä¸šé¢è¯•çœŸé¢˜ï¼Œå°±ç”¨é¢è¯•å®å…¸')\n              .fontSize(vp2vp(14))\n              .fontColor($r('app.color.gray'))\n          }\n\n          Column({ space: vp2vp(15) }) {\n            TextInput({ placeholder: 'è¯·è¾“å…¥ç”¨æˆ·å', text: this.username })\n              .customStyle()\n              .onChange(val => this.username = val)\n            TextInput({ placeholder: 'è¯·è¾“å…¥å¯†ç ', text: this.password, })\n              .type(InputType.Password)\n              .showPasswordIcon(false)\n              .customStyle()\n              .onChange(val => this.password = val)\n            Row() {\n              Checkbox()\n                .selectedColor('#fa711d')\n                .width(vp2vp(14))\n                .aspectRatio(1)\n                .select(this.isAgree)\n                .onChange((val) => {\n                  this.isAgree = val\n                })\n              Row({ space: vp2vp(4) }) {\n                Text('å·²é˜…è¯»å¹¶åŒæ„')\n                  .fontSize(vp2vp(14))\n                  .fontColor($r('app.color.gray'))\n                Text('ç”¨æˆ·åè®®')\n                  .fontSize(vp2vp(14))\n                Text('å’Œ')\n                  .fontSize(vp2vp(14))\n                  .fontColor($r('app.color.gray'))\n                Text('éšç§æ”¿ç­–')\n                  .fontSize(vp2vp(14))\n              }\n            }\n            .width('100%')\n\n            Button({ type: ButtonType.Normal   }) {\n              Row() {\n                if (this.loading) {\n                  LoadingProgress()\n                    .color('#ffffff')\n                    .width(vp2vp(24))\n                    .height(vp2vp(24))\n                    .margin({ right: vp2vp(10) })\n                }\n                Text('ç«‹å³ç™»å½•').fontColor('#ffffff')\n              }\n            }\n            .width('100%')\n            .backgroundColor('transparent')\n            .stateEffect(false)\n            .borderRadius(vp2vp(4))\n            .height(vp2vp(44))\n            .linearGradient({\n              direction: GradientDirection.Right,\n              colors: [['#fc9c1c', 0], ['#fa711d', 1]]\n            })\n          }\n          .padding(vp2vp(30))\n\n          Column() {\n            Text('å…¶ä»–ç™»å½•æ–¹å¼')\n              .fontSize(vp2vp(14))\n              .fontColor($r('app.color.gray'))\n          }\n          .padding({ top: vp2vp(70), bottom: vp2vp(100) })\n        }\n      }\n    }\n    .titleMode(NavigationTitleMode.Mini)\n    .mode(NavigationMode.Stack)\n  }\n}\n\n\n\n4. ç™»å½•-é¡µé¢é€»è¾‘#\n\n1ï¼‰æŽ§åˆ¶æŒ‰é’®ï¼Œç¦ç”¨|å¯ç”¨çŠ¶æ€ï¼Œç‚¹å‡»äº‹ä»¶\n\nButton({ type: ButtonType.Normal }) {\n  Row() {\n    if (this.loading) {\n      LoadingProgress()\n        .color('#ffffff')\n        .width(vp2vp(24))\n        .height(vp2vp(24))\n        .margin({ right: vp2vp(10) })\n    }\n    Text('ç«‹å³ç™»å½•')\n      .fontColor('#ffffff')\n  }\n}\n.width('100%')\n.backgroundColor('transparent')\n.borderRadius(vp2vp(4))\n.height(vp2vp(44))\n.stateEffect(false)\n.linearGradient({\n  direction: GradientDirection.Right,\n  colors: [['#fc9c1c', 0], ['#fa711d', 1]]\n})\n.enabled(!this.loading)\n.onClick(() => {\n  this.login()\n})\n\n\n2ï¼‰å®žçŽ°ç™»å½•ï¼Œéžç©ºæ ¡éªŒã€ç™»å½•è·³è½¬\n\nlogin() {\n  if (!this.username) {\n    return promptAction.showToast({ message: 'è¯·è¾“å…¥ç”¨æˆ·å' })\n  }\n  if (!this.password) {\n    return promptAction.showToast({ message: 'è¯·è¾“å…¥å¯†ç ' })\n  }\n  if (!this.isAgree) {\n    return promptAction.showToast({ message: 'è¯·å‹¾é€‰å·²é˜…è¯»å¹¶åŒæ„' })\n  }\n\n  this.loading = true\n  Request.post('login', {\n    username: this.username,\n    password: this.password\n  }).then(res => {\n    Auth.setUser(res.data)\n\n    const params = router.getParams()\n    if (params && params['return_url']) {\n      const url = params['return_url']\n      delete params['return_url']\n      router.replaceUrl({ url, params })\n    } else {\n      router.back()\n    }\n    this.loading = false\n    return promptAction.showToast({ message: 'ç™»å½•æˆåŠŸ' })\n  }).catch(e => {\n    this.loading = false\n    return promptAction.showToast({ message: 'ç™»å½•å¤±è´¥' })\n  })\n\n}\n\n\n\n5. æˆ‘çš„-é€€å‡ºç™»å½•#\n\n1ï¼‰é€€å‡ºç™»å½•\n\nif (this.user.token) {\n  this.CellBuilder('é€€å‡ºç™»å½•', async () => {\n    const ok = await promptAction.showDialog({\n      title: 'æ¸©é¦¨æç¤º',\n      message: 'æ‚¨ç¡®è®¤è¦é€€å‡ºé¢è¯•å®å…¸APPå—ï¼Ÿ',\n      buttons: [\n        { text: 'å–æ¶ˆ', color: '#c3c4c5' },\n        { text: 'ç¡®è®¤', color: '#333333', }\n      ]\n    })\n    if (ok.index === 1) {\n      Auth.delUser()\n    }\n  })\n}\n\n\n2ï¼‰é€€å‡ºå’Œç™»å½•ï¼Œä½¿ç”¨ emitter é€šçŸ¥ Home æ›´æ–°é¡µé¢\n\nåŸºæœ¬è¯­æ³•ï¼š\n\non(event: InnerEvent, callback: Callback): void\n\nemit(event: InnerEvent, data?: EventData): void\n\ninterface InnerEvent {\n  eventId: number\n}\n\n\n * Home æ³¨å†Œäº‹ä»¶\n\naboutToAppear() {\n  this.getQuestionTypeList()\n\n  emitter.on(LOGIN_EVENT, () => this.getQuestionTypeList())\n}\n\n\n * ç™»å½•è§¦å‘äº‹ä»¶\n\nAuth.setUser(res.data)\n// é€šçŸ¥ Home æ›´æ–°é¡µé¢\nemitter.emit(LOGIN_EVENT)\n\n\n * é€€å‡ºè§¦å‘äº‹ä»¶\n\nif (ok.index === 1) {\n  Auth.delUser()\n  // é€šçŸ¥ Home æ›´æ–°é¡µé¢\n  emitter.emit(LOGIN_EVENT)\n}\n\n\n\næ‰“å¡æ—¥åŽ†#\n\n\n1. å®žçŽ°æ‰“å¡#\n\n1ï¼‰é¦–é¡µæ‰“å¼€æ•°é‡æ˜¾ç¤º\n\n  @StorageProp(USER_KEY)\n  @Watch('updateUser')\n  userJson: string = '{}'\n  @State\n  user: UserModel = JSON.parse(this.userJson)\n\n  updateUser() {\n    this.user = JSON.parse(this.userJson)\n  }\n\n\n      Row({ space: vp2vp(10) }) {\n        IvSearch()\n+        IvClock({ clockCount: this.user.clockinNumbers || 0 })\n      }\n\n\n2ï¼‰æ‰“å¡åŠŸèƒ½å®žçŽ°\n\n.onClick(() => {\n  const user = Auth.getUser()\n  if (user.token) {\n    if (user.clockinNumbers > 0) {\n      // è·³è½¬æ‰“å¡æ—¥åŽ†é¡µé¢\n      return router.pushUrl({ url: 'pages/ClockPage' })\n    } else {\n      // è¿›è¡Œæ‰“å¡\n      Request.post<{ clockinNumbers: number }>('clockin').then(res => {\n        Auth.setUser({ ...user, clockinNumbers: res.data.clockinNumbers })\n        promptAction.showToast({ message: 'æ‰“å¡æˆåŠŸ' })\n      })\n    }\n  } else {\n    router.pushUrl({ url: 'pages/LoginPage' })\n  }\n})\n\n\n3ï¼‰æ›´æ–°æ‰“å¡ä¿¡æ¯ï¼ˆç”¨æˆ·ä¿¡æ¯ï¼‰é‡æ–°ç™»å½•ç³»ç»Ÿçš„æ—¶å€™\n\n\n// èŽ·å–ç”¨æˆ·ä¿¡æ¯\naboutToAppear(){\n  if (this.user.token) {\n    Request.get('userInfo')\n      .then(res => {\n        const { avatar, nickName, clockinNumbers, totalTime } = res.data\n        Auth.setUser({ ...this.user, avatar, nickName, clockinNumbers, totalTime })\n      })\n  }\n}\n\n\n\n\n2. æ‰“å¡æ—¥åŽ†-é¡µé¢ç»“æž„#\n\n\n\n@Entry\n@Component\nstruct ClockPage {\n  @Builder\n  dayBuilder(params: {\n    day: number,\n    text: string\n  }) {\n    Column() {\n      Row() {\n        Text(params.day.toString())\n          .fontSize(vp2vp(40))\n          .fontWeight(FontWeight.Bold)\n        Text('å¤©')\n          .fontSize(vp2vp(10))\n          .fontColor($r('app.color.gray'))\n          .margin({ bottom: vp2vp(8), left: vp2vp(10) })\n      }\n      .alignItems(VerticalAlign.Bottom)\n\n      Text(params.text)\n        .fontSize(vp2vp(10))\n        .fontColor($r('app.color.gray'))\n    }.margin({ right: vp2vp(36) })\n  }\n\n  build() {\n    Column() {\n      Navigation() {\n        Column() {\n          Row() {\n            Text('ä»Šæ—¥å·²æ‰“å¡')\n              .fontSize(vp2vp(20))\n              .margin({ right: vp2vp(5) })\n            Image($r('app.media.icon_clock_card'))\n              .width(vp2vp(20))\n              .aspectRatio(1)\n              .objectFit(ImageFit.Fill)\n          }\n          .width('100%')\n\n          Row() {\n            this.dayBuilder({ day: 10, text: 'ç´¯è®¡æ‰“å¡' })\n            this.dayBuilder({ day: 10, text: 'è¿žç»­æ‰“å¡' })\n          }\n          .padding({ top: vp2vp(10), bottom: vp2vp(25) })\n          .width('100%')\n          .justifyContent(FlexAlign.Start)\n\n          Row() {\n\n          }\n          .height(300)\n          .margin({ bottom: vp2vp(50) })\n\n          Image('/common/images/clock_btn.png')\n            .width(vp2vp(145))\n            .height(vp2vp(38))\n            .objectFit(ImageFit.Fill)\n\n        }\n        .padding(vp2vp(15))\n        .layoutWeight(1)\n      }\n      .title('æ¯æ—¥æ‰“å¡')\n      .titleMode(NavigationTitleMode.Mini)\n      .mode(NavigationMode.Stack)\n      .backgroundImage('/common/images/clock_bg.png')\n      .backgroundImageSize(ImageSize.Contain)\n      .backgroundImagePosition(Alignment.Top)\n    }.backgroundColor($r('app.color.gray_bg'))\n  }\n}\n\n\n\n3. æ‰“å¡æ—¥åŽ†-ç¬¬ä¸‰æ–¹åº“#\n\n1ï¼‰æ–¹å¼1ï¼šä½¿ç”¨ ohmp å‘½ä»¤è¡Œï¼Œå‚è€ƒï¼šé“¾æŽ¥\n\n2ï¼‰æ–¹å¼2ï¼š\n\n  \"dependencies\": {\n    \"dayjs\": \"latest\"\n  }\n\n\n3ï¼‰æŸ¥æ‰¾æ”¯æŒçš„ç¬¬ä¸‰æ–¹åŒ… é“¾æŽ¥\n\n\n4. æ‰“å¡æ—¥åŽ†-å…±äº«æ—¥åŽ†æœ¬åœ°åº“#\n\n1ï¼‰åˆ›å»ºæœ¬åœ°åŒ…\n\n * åˆ›å»ºæ¨¡å—\n\n * åŒ…åç§° miniCalendar\n\n2ï¼‰ä¿®æ”¹æ—¥åŽ†æ–‡ä»¶ï¼Œåç§° MainPage.ets æ”¹æˆ MiniCalendar.ets\n\n\n\n\n\n// è®¾è®¡ç¨¿å®½åº¦\nconst designWidth = 375\n// ç‰©ç†åƒç´ \nconst devicePhysics = display.getDefaultDisplaySync().width\n\nexport const vp2vp = (originSize: number) => {\n  // useSize =  deviceWidth / designWidth * measureSize\n  // åªæœ‰ æ‰‹æœº æ‰éœ€è¦\n  // if (deviceInfo.deviceType !== 'tablet') {\n  //   return px2vp(devicePhysics) / designWidth * originSize\n  // }\n  return originSize\n}\n\nconst img = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAABECAYAAAA4E5OyAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAF5SURBVHgB7drLUcMwFIXhGzvOMKwoJXSAO0gJ0BkdECoQJaQT2II1MTo8NiZsmLm6R+R8mzjJIuN/Yo0tyUxERERERERE/rmVOUopXa3Xm4dyeFN+ap/z6904ji9GrDNHfT/s7CMGzLsSJyGSEXMNMs+2PPktexTXIMfjdF9eDouPqaO4jiHwNY6kcrhdfHXI+W1kG1Pcg0BLUaoEgVaiVAsCLUSpGgTYo1QPAsxRQoIAa5SwIMAYJTQIsEUJDwJMUSiCAEsUmiDAEIUqCERHoQsCkVFcH///CieME7cTUwddN9yaI8og31Yn/r993z+bI8oguGSGYZPKjNuPS2aaLh7NEeWg+luMnC/L1XR9PoNqdAygujGLjgE0t+4MMYDi4Y4lBoQ//jPFgNAJIrYYEDaFyBgDQiaZWWNA9WUI5hhQdaGKPQZUW8psIQZUWexuJQa47yBqKQa47yBqKQbU3kFEHQNq7CDaf76bn9hjiIiIiIiIiMhZeAeOPE1Nm7TnTQAAAABJRU5ErkJggg=='\n\nclass DayItem {\n  public date: number\n  public month: number\n  public year: number\n  public isSelected?: boolean\n}\n\n@Component\nexport struct MiniCalendar {\n  // å†…éƒ¨å±žæ€§\n  private weeks: string[] = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­']\n  private selectedText: string = 'å·²æ‰“å¡'\n  private format: string = 'YYYY-MM-DD'\n  // å½“å‰æ—¶é—´\n  @Prop\n  @Watch('onCurrentDateUpdate')\n  currentDate: string\n  // é€‰ä¸­æ—¶é—´\n  @Link\n  @Watch('onCurrentDateUpdate')\n  selectedDays: string[]\n  @State\n  days: DayItem[] = []\n  onClickDate: (date: string) => void\n  onChangeMonth: (date: string) => void\n\n  onCurrentDateUpdate() {\n    this.days = this.getDays(this.currentDate)\n  }\n\n  aboutToAppear() {\n    this.days = this.getDays(this.currentDate)\n  }\n\n  getDays(originDate?: string) {\n    const date = originDate ? dayjs(originDate) : dayjs()\n    const days: DayItem[] = []\n    const len = 42\n\n    // å½“å‰æœˆ\n    const currDays = date.daysInMonth()\n    for (let index = 1; index <= currDays; index++) {\n      days.push({\n        date: index,\n        month: date.month() + 1,\n        year: date.year(),\n        isSelected: this.selectedDays.some(item => date.date(index).isSame(item))\n      })\n    }\n    // ä¸Šä¸ªæœˆ\n    const prevMonth = date.date(0)\n    const prevMonthLastDate = prevMonth.date()\n    const prevDays = prevMonth.day()\n    if (prevDays < 6) {\n      for (let index = 0; index <= prevDays; index++) {\n        days.unshift({\n          date: prevMonthLastDate - index,\n          month: prevMonth.month() + 1,\n          year: prevMonth.year()\n        })\n      }\n    }\n    // ä¸‹ä¸ªæœˆ\n    const nextMonth = date.date(currDays + 1)\n    const start = days.length\n    for (let index = 1; index <= len - start; index++) {\n      days.push({\n        date: index,\n        month: nextMonth.month() + 1,\n        year: nextMonth.year()\n      })\n    }\n\n    return days\n  }\n\n  isTheMonth(month: number) {\n    return dayjs(this.currentDate).month() === month - 1\n  }\n\n  @Styles\n  btnStyle() {\n    .width(vp2vp(20))\n    .height(vp2vp(20))\n    .backgroundColor('#f6f7f9')\n    .borderRadius(vp2vp(4))\n  }\n\n  build() {\n    Column() {\n      Row() {\n        Column() {\n          Image(img)\n            .width(vp2vp(14))\n            .aspectRatio(1)\n            .rotate({ angle: 180 })\n        }\n        .btnStyle()\n        .justifyContent(FlexAlign.Center)\n        .onClick(() => {\n          const date = dayjs(this.currentDate).subtract(1, 'month')\n          this.currentDate = date.format(this.format)\n          this.onChangeMonth && this.onChangeMonth(date.format('YYYY-MM'))\n        })\n\n        Text(dayjs(this.currentDate).format('YYYYå¹´MMæœˆ'))\n          .fontColor('#6B7897')\n          .margin({ right: vp2vp(20), left: vp2vp(20) })\n          .width(vp2vp(110))\n          .textAlign(TextAlign.Center)\n\n        Column() {\n          Image(img)\n            .width(vp2vp(14))\n            .aspectRatio(1)\n        }\n        .btnStyle()\n        .justifyContent(FlexAlign.Center)\n        .onClick(() => {\n          const date = dayjs(this.currentDate).add(1, 'month')\n          this.currentDate = date.format(this.format)\n          this.onChangeMonth && this.onChangeMonth(date.format('YYYY-MM'))\n        })\n      }\n      .padding(15)\n\n      GridRow({ columns: 7 }) {\n        ForEach(this.weeks, (item) => {\n          GridCol() {\n            Column() {\n              Text(item)\n                .fontColor('#6E7B8A')\n            }\n          }.height(vp2vp(40))\n        })\n        ForEach(this.days, (item: DayItem) => {\n          GridCol() {\n            Column() {\n              if (item.isSelected) {\n                Text(item.date.toString())\n                  .fontColor('#fff')\n                  .width(vp2vp(32))\n                  .height(vp2vp(32))\n                  .borderRadius(vp2vp(16))\n                  .backgroundColor('#FFC531')\n                  .textAlign(TextAlign.Center)\n                  .fontSize(vp2vp(14))\n                Text(this.selectedText)\n                  .fontColor('#FFC531')\n                  .fontSize(vp2vp(10))\n                  .margin({ top: vp2vp(2) })\n\n              } else {\n                Text(item.date.toString())\n                  .width(vp2vp(32))\n                  .height(vp2vp(32))\n                  .fontSize(vp2vp(14))\n                  .textAlign(TextAlign.Center)\n                  .fontColor(this.isTheMonth(item.month) ? '#6E7B8A' : '#E1E4E7')\n              }\n            }.onClick(() => {\n              const date = `${item.year}-${item.month.toString().padStart(2, '0')}-${item.date.toString()\n                .padStart(2, '0')}`\n              this.onClickDate && this.onClickDate(date)\n            })\n          }.height(vp2vp(48))\n        })\n      }\n      .padding({ top: vp2vp(15) })\n      .border({ width: { top: 0.5 }, color: '#f6f7f9' })\n    }\n    .width('100%')\n    .backgroundColor('#fff')\n    .borderRadius(vp2vp(8))\n  }\n}\n\n\n3ï¼‰å¯¼å‡ºç»„ä»¶\n\nexport { MiniCalendar } from './src/main/ets/components/mainpage/MiniCalendar'\n\n\n4ï¼‰ä½¿ç”¨ç»„ä»¶\n\n  \"dependencies\": {\n    \"@ohos/miniCalendar\": \"file:../miniCalendar\"\n  }\n\n\n\n\n\n            MiniCalendar({\n              currentDate: '2023-12-9',\n              selectedDays: $selectedDays,\n              onChangeMonth: (date: string) => {\n                promptAction.showToast({ message: date })\n              }\n            })\n\n\n\n3. æ‰“å¡æ—¥åŽ†-æ˜¾ç¤ºç­¾åˆ°#\n\n1ï¼‰æ•°æ®æ¨¡åž‹\n\nexport class ClockModel {\n  flag?: boolean\n  clockinNumbers?: number\n  totalClockinNumber?: number\n  clockins?: ClockInModel[]\n}\n\nexport class ClockInModel {\n  id: string\n  createdAt: string\n}\n\n\n2ï¼‰èŽ·å–æ•°æ®\n\n  @State\n  clockData: ClockModel = {\n    totalClockinNumber: 0,\n    clockinNumbers: 0\n  }\n\n  aboutToAppear() {\n    this.getData()\n  }\n\n  async getData(date?: {\n    year: string,\n    month: string\n  }) {\n    const res = await Request.get('clockinInfo', date || {})\n    this.clockData = res.data\n    this.selectedDays = res.data.clockins.map(item => item.createdAt)\n  }\n\n\n3ï¼‰æ¸²æŸ“é¡µé¢\n\n          Row() {\n            this.dayBuilder({ day: this.clockData.totalClockinNumber, text: 'ç´¯è®¡æ‰“å¡' })\n            this.dayBuilder({ day: this.clockData.clockinNumbers, text: 'è¿žç»­æ‰“å¡' })\n          }\n\n\n4ï¼‰åˆ‡æ¢æœˆä»½æŸ¥è¯¢æ‰“å¡æ•°æ®\n\n            MiniCalendar({\n              currentDate: '2023-12-9',\n              selectedDays: $selectedDays,\n              onChangeMonth: (date: string) => {\n                const [year, month] = date.split('-')\n                this.getData({ year, month })\n              }\n            })\n\n\n\nç¼–è¾‘èµ„æ–™#\n\n\n1. èµ„æ–™é¡µé¢#\n\n            Row() {\n              Text('ç¼–è¾‘èµ„æ–™')\n                .fontSize(vp2vp(12))\n                .fontColor($r('app.color.gray'))\n              Image($r('app.media.icon_edit'))\n                .width(vp2vp(12))\n                .aspectRatio(1)\n                .fillColor($r('app.color.gray'))\n            }\n            .onClick(() => {\n              router.pushUrl({\n                url: 'pages/ProfilePage'\n              })\n            })\n\n\n\n\n\n\n@Entry\n@Component\nstruct ProfilePage {\n  @StorageProp(USER_KEY)\n  @Watch('updateUser')\n  userJson: string = '{}'\n  @State\n  user: UserModel = JSON.parse(this.userJson)\n\n  updateUser() {\n    this.user = JSON.parse(this.userJson)\n  }\n\n  pickerAvatar() {\n    // TODO\n  }\n\n  updateNickName() {\n    // TODO\n  }\n\n  build() {\n    Navigation() {\n      List() {\n        ListItem() {\n          Row() {\n            Text('å¤´åƒ')\n            Image(this.user.avatar)\n              .alt('/common/images/avatar.png')\n              .width(vp2vp(40))\n              .aspectRatio(1)\n              .borderRadius(vp2vp(20))\n              .border({ width: 0.5, color: '#e4e4e4' })\n              .onClick(() => {\n                this.pickerAvatar()\n              })\n          }\n          .width('100%')\n          .height(vp2vp(60))\n          .justifyContent(FlexAlign.SpaceBetween)\n        }\n\n        ListItem() {\n          Row() {\n            Text('æ˜µç§°')\n            TextInput({ text: this.user.nickName })\n              .textAlign(TextAlign.End)\n              .layoutWeight(1)\n              .padding(0)\n              .height(vp2vp(60))\n              .backgroundColor(Color.White)\n              .borderRadius(0)\n              .onChange((value) => this.user.nickName = value)\n              .onSubmit(() => {\n                this.updateNickName()\n              })\n          }\n          .width('100%')\n          .justifyContent(FlexAlign.SpaceBetween)\n        }\n      }\n      .width('100%')\n      .height('100%')\n      .padding({ left: vp2vp(30), right: vp2vp(30), top: vp2vp(15), bottom: vp2vp(15) })\n      .divider({ strokeWidth: 0.5, color: '#f5f5f5' })\n    }\n    .title('å®Œå–„ä¸ªäººä¿¡æ¯')\n    .titleMode(NavigationTitleMode.Mini)\n    .mode(NavigationMode.Stack)\n  }\n}\n\n\n\n2. ä¿®æ”¹æ˜µç§°#\n\n1ï¼‰å®žçŽ°æ›´æ–°\n\n  updateNickName() {\n    Request.put('userInfo/profile', {\n      nickName: this.user.nickName\n    }).then(res => {\n      promptAction.showToast({ message: 'æ›´æ–°æ˜µç§°æˆåŠŸ' })\n      Auth.setUser(this.user)\n    })\n  }\n\n\n2ï¼‰è‡ªå®šä¹‰å¼¹çª—\n\n\n\n@CustomDialog\nexport struct IvLoadingDialog {\n  message: string = ''\n  controller: CustomDialogController\n\n  build() {\n    Column() {\n      LoadingProgress()\n        .width(vp2vp(48))\n        .aspectRatio(1)\n        .color('#fff')\n      if (this.message) {\n        Text(this.message)\n          .fontSize(vp2vp(14))\n          .fontColor('#fff')\n      }\n    }\n    .width(vp2vp(120))\n    .aspectRatio(1)\n    .backgroundColor('rgba(0,0,0,0.5)')\n    .borderRadius(vp2vp(16))\n    .justifyContent(FlexAlign.Center)\n  }\n}\n\n\n3ï¼‰åˆå§‹åŒ–åŠ è½½æ¡†\n\n  dialog: CustomDialogController = new CustomDialogController({\n    builder: IvLoadingDialog({ message: 'æ›´æ–°ä¸­...' }),\n    customStyle: true,\n\n  })\n\n  updateNickName() {\n  this.dialog.open()\n  Request.post('userInfo/profile', {\n    nickName: this.user.nickName\n  }).then(res => {\n    Auth.setUser(this.user)\n    this.dialog.close()\n  })\n}\n\n\n\n3. ä¿®æ”¹å¤´åƒ#\n\n1ï¼‰é€‰æ‹©æ–‡ä»¶\n\nURI: string = null\n\npickerAvatar() {\n  const photoSelectOptions = new picker.PhotoSelectOptions()\n  photoSelectOptions.MIMEType = picker.PhotoViewMIMETypes.IMAGE_TYPE\n  photoSelectOptions.maxSelectNumber = 1\n\n  const photoViewPicker = new picker.PhotoViewPicker()\n  photoViewPicker.select(photoSelectOptions).then(result => {\n    // 1. å¾—åˆ°æ–‡ä»¶è·¯å¾„\n    this.URI = result.photoUris[0]\n    this.uploadAvatar()\n  })\n}\n\n\n2ï¼‰ä¸Šä¼ å›¾ç‰‡\n\nuploadAvatar() {\n  this.dialog.open()\n\n  const context = getContext(this)\n  const fileType = 'jpg'\n  const fileName = Date.now() + '.' + fileType\n  const copyFilePath = context.cacheDir + '/' + fileName\n\n  const file = fs.openSync(this.URI, fs.OpenMode.READ_ONLY)\n  fs.copyFileSync(file.fd, copyFilePath)\n\n  const config: request.UploadConfig = {\n    url: BaseURL + 'userInfo/avatar',\n    method: 'POST',\n    header: {\n      'Accept': '*/*',\n      'Authorization': `Bearer ${this.user.token}`,\n      'Content-Type': 'multipart/form-data'\n    },\n    files: [\n      { name: 'file', uri: `internal://cache/` + fileName, type: fileType, filename: fileName }\n    ],\n    data: []\n  }\n\n  request.uploadFile(context, config, (err, data) => {\n    if (err) return Logger.error('UPLOAD', err.message)\n    data.on('progress', (size) => {\n      Logger.info(size.toString())\n    })\n    data.on('complete', () => {\n      this.getUserInfo()\n    })\n  })\n}\n\n\n3ï¼‰æ›´æ–°æ•°æ®\n\ngetUserInfo () {\n  Request.get<{ avatar: string }>('userInfo').then(res => {\n    this.user.avatar = res.data.avatar\n    Auth.setUser(this.user)\n    this.dialog.close()\n  })\n}\n","frontmatter":{"title":"HM - é¢è¯•å®å…¸APP-æˆ‘çš„æ¨¡å—"},"version":""},{"id":10,"title":"HM - é¢è¯•å®å…¸APP-åº”ç”¨åˆ†å‘","routePath":"/interview-handbook-project/project/publish","lang":"","toc":[{"text":"å‘å¸ƒåº”ç”¨","id":"å‘å¸ƒåº”ç”¨","depth":2,"charIndex":3},{"text":"é¡¹ç›®ç»éªŒ","id":"é¡¹ç›®ç»éªŒ","depth":2,"charIndex":17},{"text":"å­¦ä¹ å»ºè®®","id":"å­¦ä¹ å»ºè®®","depth":2,"charIndex":1217}],"domain":"","content":"#\n\n\nå‘å¸ƒåº”ç”¨#\n\nå‚è€ƒæ–‡æ¡£\n\n\né¡¹ç›®ç»éªŒ#\n\n 1. é¡¹ç›®æè¿°\n\né¢è¯•APPæä¾›äº†å¤šç§é¢˜ç›®å’Œå†…å®¹ï¼ŒåŒ…æ‹¬åŸºç¡€çŸ¥è¯†ç‚¹é—®é¢˜ã€åŽŸç†é—®é¢˜ã€é¡¹ç›®é—®é¢˜ç­‰ï¼Œæ»¡è¶³ä¸åŒå‰ç«¯ç¨‹åºå‘˜çš„éœ€æ±‚ã€‚åŒæ—¶ï¼Œé¢è¯•é€šAPPè¿˜åŒ…å«å„å¤§å…¬å¸çš„çœŸå®žé¢è¯•ç»éªŒï¼Œä¾¿äºŽç”¨æˆ·æ‰¾åˆ°\nå¿ƒä»ªå…¬å¸çš„é¢ç»ã€‚é¢è¯•é€šAPPæ”¯æŒç”¨æˆ·è‡ªä¸»é€‰æ‹©å­¦ä¹ å†…å®¹ï¼ŒåŒæ—¶è¿˜æä¾›äº†æ™ºèƒ½æŽ¨èå’Œåé¦ˆæœºåˆ¶ï¼Œå¸®åŠ©ç”¨æˆ·æ›´å¥½åœ°æŽŒæ¡çŸ¥è¯†å’ŒæŠ€èƒ½ã€‚\n\næ ¸å¿ƒåŠŸèƒ½ï¼š\n\nâ€¢åˆ·é¢˜ç³»ç»Ÿï¼šé¢˜åº“é¢‘é“ã€é¢è¯•é¢˜é•¿åˆ—è¡¨ã€ç‚¹èµžã€æ”¶è—ã€åˆ†äº«ã€å¯Œæ–‡æœ¬é¢„è§ˆ\n\nâ€¢é¡¹ç›®ç³»ç»Ÿï¼šä¼ä¸šçº§é¡¹ç›®åœºæ™¯é¢è¯•é¢˜å±•ç¤ºã€ä¸šåŠ¡ç±»é—®ç­”ã€æŠ€æœ¯ç±»é—®ç­”\n\nâ€¢é¢ç»ç³»ç»Ÿï¼šå¤§åŽ‚é¢è¯•ç»éªŒã€æ–‡ç« é˜…è¯»ã€è¯•é¢˜é˜…è¯»æ•°æ®åŸ‹ç‚¹\n\nâ€¢ä¸ªäººä¸­å¿ƒï¼šæ‰“å¡ã€æ‰“å¡è®°å½•ã€å­¦ä¹ æ—¶é—´ç»Ÿè®¡ã€æ•°æ®å¯è§†åŒ–ã€ç¼–è¾‘å¤´åƒã€ç¼–è¾‘æ˜µç§°ã€é€€å‡ºç™»å½•\n\nâ€¢åŽ†å²è®°å½•ï¼šè¯•é¢˜é˜…è¯»è®°å½•ã€é¢ç»é˜…è¯»è®°å½•ã€ç‚¹èµžæ”¶è—è®°å½•ã€ä¸ªäººåé¦ˆè®°å½•\n\n 2. ä½¿ç”¨æŠ€æœ¯\n\n * åŸºäºŽ API9 ä½¿ç”¨ ArtTS ä¸Ž ArtUI å®žçŽ°é¡µé¢æž„å»ºå’ŒçŠ¶æ€ç®¡ç†\n * åŸºäºŽ PersistentStorage å’Œ AppStorage å®žçŽ°ç”¨æˆ·ä¿¡æ¯å­˜å‚¨å’Œè®¿é—®æƒé™æŽ§åˆ¶\n * åŸºäºŽ display å’Œ deviceInfo å®žçŽ°é€‚é…æ‰‹æœºä¾§å‡½æ•° vp2vp åšåˆ°è§†è§‰ç»Ÿä¸€\n * åŸºäºŽ IDataSource å’Œ LazyForEach å®žçŽ°åˆ—è¡¨æ‡’åŠ è½½ä¼˜åŒ–åˆ—è¡¨æ€§èƒ½\n * åŸºäºŽ emitter å®žçŽ° UIAbility è¿›ç¨‹å†…é€šä¿¡å®žçŽ°é€šçŸ¥æ›´æ–°é¦–é¡µä¿¡æ¯\n * åŸºäºŽ mediaquery å®žçŽ°è®¾å¤‡å’Œæ¨ªç«–å±æŸ¥è¯¢å®žçŽ°å¤šè®¾å¤‡å¸ƒå±€é€‚é…\n * åŸºäºŽ http å°è£…è¯·æ±‚å·¥å…·ç±»ï¼Œå®žçŽ°æŽ¥å£å“åº”æ•°æ®æ³›åž‹æ”¯æŒå’Œå‚æ•°å¤„ç†ä¸Žå“åº”æ‹¦æˆª\n * åŸºäºŽé¸¿è’™ç³»ç»Ÿç»„ä»¶ï¼ŒæŠ½è±¡å°è£…é€šç”¨ç»„ä»¶ Searchã€Skeletonã€MiniCalendarã€LoadingDialogã€Tagç­‰\n * åŸºäºŽ UIAbility å’Œ Page ç”Ÿå‘½å‘¨æœŸå®žçŽ°é˜…è¯»å®žçŽ°åŸ‹ç‚¹\n * åŸºäºŽ fs è¯»å–å’Œå¤åˆ¶åˆ°åº”ç”¨æ²™ç®±çŽ¯å¢ƒå®žçŽ°æ–‡ä»¶ä¸Šä¼ ï¼Œä¸”å®Œæˆæ•°æ®å›žæ˜¾åŠŸèƒ½\n * åŸºäºŽ Web ç»„ä»¶å®žçŽ° webview èƒ½åŠ›ï¼Œå®žçŽ°ç”¨æˆ·åè®®å’Œéšç§åè®®åŠŸèƒ½\n * åŸºäºŽ router éƒ½é¡µé¢æ ˆè¿›è¡ŒæŽ§åˆ¶ï¼Œå®Œæˆé¡µé¢æ ˆç»´æŠ¤å’Œæ¸…ç†\n * åŸºäºŽ notificationManager å®žçŽ°ç”¨æˆ·å­¦ä¹ æ—¶é—´é€šçŸ¥æé†’\n * åŸºäºŽåŠ¨ç”»æ¨¡å—ï¼Œå®žçŽ°é¡µé¢è½¬åœºåŠ¨ç”»çš„è‡ªå®šä¹‰ä»¥åŠä¸‹æ‹‰åˆ·æ–°è‡ªå®šä¹‰ç»„ä»¶åŠ¨ç”»æ•ˆæžœ\n * ä½¿ç”¨é¸¿è’™ç¬¬ä¸‰æ–¹åº“ dayjs å®žçŽ°æ—¶é—´ç›¸å…³å¤„ç†ä¸šåŠ¡é€»è¾‘\n * å°è£…æœ¬åœ°åº“ï¼ŒæŠ½ç¦» MiniCalendar ç»„ä»¶è¿›è¡Œå…±äº«ç»´æŠ¤å’Œè¿­ä»£\n\næ•´ä¸ªé¡¹ç›®æ¶‰åŠåˆ°é¸¿è’™åŽŸç”Ÿèƒ½åŠ›åº”ç”¨ï¼Œæ–‡ä»¶ç®¡ç†ã€ç½‘ç»œç®¡ç†ã€WebViewã€çª—å£ç®¡ç†å®Œæˆé¡¹ç›®éœ€æ±‚ã€‚\n\n 3. æŠ€æœ¯äº®ç‚¹\n\nâ€¢ å®žçŽ°æ‰‹æœºä¾§ç»Ÿä¸€è§†è§‰æ¯”ä¾‹é€‚é…ï¼Œè§£å†³ Meta50 æ˜¾ç¤ºé—®é¢˜\n\nâ€¢ çªç ´äº†æ–‡ä»¶ä¸Šä¼  API è®¾è®¡ç¼ºé™·ï¼Œå’ŒåŽå°çº¦å®šä¸Šä¼ è§„èŒƒ\n\nâ€¢ å…±äº«åº“ç»´æŠ¤ï¼Œå°†ä¸€äº›é€šç”¨çš„ç»„ä»¶ç»Ÿä¸€ç»´æŠ¤ï¼Œä¸ºåŽæœŸé¡¹ç›®è¿­ä»£å‡†å¤‡\n\nå…¶ä»–ï¼š\n\n * å¦‚ä½•å®žçŽ°åœ°å›¾ï¼Ÿ\n * å¦‚ä½•å®žçŽ°æ”¯ä»˜ï¼Ÿ\n\n\nå­¦ä¹ å»ºè®®#\n\n 1. é¸¿è’™èƒ½åŠ›é›†\n 2. å¡ç‰‡å¼€å‘\n 3. æœ¬åœ°æ•°æ®åº“\n 4. åŽŸå­åŒ–æœåŠ¡\n 5. ç«¯äº‘ä¸€ä½“\n 6. ä¸‰ä¸ªä¸€å¤š","frontmatter":{"title":"HM - é¢è¯•å®å…¸APP-åº”ç”¨åˆ†å‘"},"version":""}]